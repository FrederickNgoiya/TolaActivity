(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+aul":function(e,t,r){"use strict";r.r(t);var o=r("q1tI"),n=r.n(o),i=r("i8i4"),a=r.n(i),c=r("okNM"),l=r("2vnA");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var m,f,d,y,h,b,g,v,P,w,O=function(){function r(e,t){s(this,r),this.rootStore=e,this.id=parseInt(t.id),this.name=t.name,this.frequencies=t.frequencies,this.periodDateRanges=t.periodDateRanges}return p(r,[{key:"periods",value:function(e){return e in this.periodDateRanges&&this.periodDateRanges[e]}},{key:"periodCount",value:function(e){return this.periods(e)?this.periods(e).length:0}}]),r}(),S=function(){function o(e,t){var r=this;s(this,o),this.rootStore=e,this.programs={},t.forEach(function(e){r.programs[e.id]=new O(r.rootStore,e)})}return p(o,[{key:"getProgram",value:function(e){return this.programs[e]}},{key:"programList",get:function(){return Object.values(this.programs).sort(function(e,t){return e.name.toUpperCase()<t.name.toUpperCase()?-1:e.name.toUpperCase()>t.name.toUpperCase()?1:0})}}]),o}();function E(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function j(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(r,o,e,t,n){var i={};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=e.slice().reverse().reduce(function(e,t){return t(r,o,e)||e},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(r,o,i),i=null),i}var k,q,R,I={value:null,label:"---------"},_="undefined"!=typeof gettext?gettext:function(e){return e},N=(f=C((m=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),E(this,"tvaProgramId",f,this),E(this,"timeperiodsProgramId",d,this),E(this,"frequencyId",y,this),E(this,"showAll",h,this),E(this,"mostRecent",b,this),E(this,"mostRecentCount",g,this),E(this,"setMostRecent",v,this),E(this,"setMostRecentCount",P,this),E(this,"setShowAll",w,this),this.programStore=new S(this,e.programs),this.periodLabels={1:_("Life of Program (LoP) only"),3:_("Annual"),2:_("Midline and endline"),5:_("Tri-annual"),4:_("Semi-annual"),7:_("Monthly"),6:_("Quarterly")},this.iptt_url=e.iptt_url;Object(l.o)(function(){return t.tvaProgramId},function(e){null!==e&&null!==t.frequencyId&&-1==t.programStore.getProgram(e).frequencies.indexOf(t.frequencyId)&&t.setFrequency(null)});this.setTVAProgram(e.initial_selected_program_id),this.setTimeperiodsProgram(e.initial_selected_program_id)}var e,t,o;return e=r,(t=[{key:"setTVAProgram",value:function(e){this.tvaProgramId=null===e?null:e}},{key:"setTimeperiodsProgram",value:function(e){this.timeperiodsProgramId=null===e?null:e}},{key:"setFrequency",value:function(e){this.frequencyId=e}},{key:"timeperiodsProgramOptions",get:function(){return this.programStore.programList.map(function(e){return{value:e.id,label:e.name}})}},{key:"tvaProgramOptions",get:function(){return this.programStore.programList.filter(function(e){return 0<e.frequencies.length}).map(function(e){return{value:e.id,label:e.name}})}},{key:"frequencyOptions",get:function(){var t=this;return null===this.tvaProgramId?[I]:this.programStore.getProgram(this.tvaProgramId).frequencies.map(function(e){return{value:e,label:t.periodLabels[e]}})}},{key:"selectedTVAProgram",get:function(){return null===this.tvaProgramId?I:{value:this.tvaProgramId,label:this.programStore.getProgram(this.tvaProgramId).name}}},{key:"selectedTimeperiodsProgram",get:function(){return null===this.timeperiodsProgramId?I:{value:this.timeperiodsProgramId,label:this.programStore.getProgram(this.timeperiodsProgramId).name}}},{key:"selectedFrequency",get:function(){return null===this.tvaProgramId||null===this.frequencyId?I:{value:this.frequencyId,label:this.periodLabels[this.frequencyId]}}},{key:"periodCountDisabled",get:function(){return null===this.tvaProgramId||-1==[3,4,5,6,7].indexOf(this.frequencyId)}},{key:"mostRecentCountDisplay",get:function(){return!this.periodCountDisabled&&this.mostRecent?this.mostRecentCount:""}},{key:"tvaURL",get:function(){if(null===this.tvaProgramId||null===this.frequencyId)return!1;var e="".concat(this.iptt_url).concat(this.tvaProgramId,"/targetperiods/?frequency=").concat(this.frequencyId);return 1==this.frequencyId||2==this.frequencyId?e:this.showAll?"".concat(e,"&timeframe=1"):"".concat(e,"&timeframe=2&numrecentcount=").concat(this.mostRecentCount)}},{key:"timeperiodsURL",get:function(){return null!==this.timeperiodsProgramId&&"".concat(this.iptt_url).concat(this.timeperiodsProgramId,"/timeperiods/")+"?frequency=7&timeframe=2&numrecentcount=2"}}])&&j(e.prototype,t),o&&j(e,o),r}()).prototype,"tvaProgramId",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C(m.prototype,"timeperiodsProgramId",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C(m.prototype,"frequencyId",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=C(m.prototype,"showAll",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=C(m.prototype,"mostRecent",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=C(m.prototype,"mostRecentCount",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),C(m.prototype,"frequencyOptions",[l.f],Object.getOwnPropertyDescriptor(m.prototype,"frequencyOptions"),m.prototype),C(m.prototype,"selectedTVAProgram",[l.f],Object.getOwnPropertyDescriptor(m.prototype,"selectedTVAProgram"),m.prototype),C(m.prototype,"selectedTimeperiodsProgram",[l.f],Object.getOwnPropertyDescriptor(m.prototype,"selectedTimeperiodsProgram"),m.prototype),C(m.prototype,"selectedFrequency",[l.f],Object.getOwnPropertyDescriptor(m.prototype,"selectedFrequency"),m.prototype),C(m.prototype,"periodCountDisabled",[l.f],Object.getOwnPropertyDescriptor(m.prototype,"periodCountDisabled"),m.prototype),C(m.prototype,"mostRecentCountDisplay",[l.f],Object.getOwnPropertyDescriptor(m.prototype,"mostRecentCountDisplay"),m.prototype),C(m.prototype,"setTVAProgram",[l.d],Object.getOwnPropertyDescriptor(m.prototype,"setTVAProgram"),m.prototype),C(m.prototype,"setTimeperiodsProgram",[l.d],Object.getOwnPropertyDescriptor(m.prototype,"setTimeperiodsProgram"),m.prototype),C(m.prototype,"setFrequency",[l.d],Object.getOwnPropertyDescriptor(m.prototype,"setFrequency"),m.prototype),v=C(m.prototype,"setMostRecent",[l.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showAll=!1,e.mostRecent=!0}}}),P=C(m.prototype,"setMostRecentCount",[l.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.setMostRecent(),e=Math.min(e,t.programStore.getProgram(t.tvaProgramId).periodCount(t.frequencyId)),t.mostRecentCount=e}}}),w=C(m.prototype,"setShowAll",[l.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.mostRecent=!1,e.showAll=!0}}}),C(m.prototype,"tvaURL",[l.f],Object.getOwnPropertyDescriptor(m.prototype,"tvaURL"),m.prototype),C(m.prototype,"timeperiodsURL",[l.f],Object.getOwnPropertyDescriptor(m.prototype,"timeperiodsURL"),m.prototype),m),T=r("y2Vs");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e,t,r){return t&&x(e.prototype,t),r&&x(e,r),e}function L(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F,J=function(e){return n.a.createElement("div",{className:"form-row mb-3"},n.a.createElement("label",{className:"col-form-label text-uppercase"},e.label),e.children)},Q=Object(c.b)("rootStore")(k=Object(c.c)(k=function(e){function i(){var e,t;A(this,i);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=L(this,(e=M(i)).call.apply(e,[this].concat(o)))).selectProgram=function(e){t.props.rootStore.setTVAProgram(e.value)},t}return V(i,n.a.Component),z(i,[{key:"render",value:function(){return n.a.createElement(J,{label:gettext("Program")},n.a.createElement(T.default,{options:this.props.rootStore.tvaProgramOptions,value:this.props.rootStore.selectedTVAProgram,onChange:this.selectProgram,className:"tola-react-select"}))}}]),i}())||k)||k,Y=Object(c.b)("rootStore")(q=Object(c.c)(q=function(e){function i(){var e,t;A(this,i);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=L(this,(e=M(i)).call.apply(e,[this].concat(o)))).selectProgram=function(e){t.props.rootStore.setTimeperiodsProgram(e.value)},t}return V(i,n.a.Component),z(i,[{key:"render",value:function(){return n.a.createElement(J,{label:gettext("Program")},n.a.createElement(T.default,{options:this.props.rootStore.timeperiodsProgramOptions,value:this.props.rootStore.selectedTimeperiodsProgram,onChange:this.selectProgram,className:"tola-react-select"}))}}]),i}())||q)||q,B=Object(c.b)("rootStore")(R=Object(c.c)(R=function(e){function i(){var e,t;A(this,i);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=L(this,(e=M(i)).call.apply(e,[this].concat(o)))).selectFrequency=function(e){t.props.rootStore.setFrequency(e.value)},t}return V(i,n.a.Component),z(i,[{key:"render",value:function(){return n.a.createElement(J,{label:gettext("Target periods")},n.a.createElement(T.default,{options:this.props.rootStore.frequencyOptions,value:this.props.rootStore.selectedFrequency,onChange:this.selectFrequency,className:"tola-react-select"}))}}]),i}())||R)||R;function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=Object(c.b)("rootStore")(F=Object(c.c)(F=function(e){function i(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=K(this,(e=W(i)).call.apply(e,[this].concat(o)))).setMostRecentCount=function(e){t.props.rootStore.setMostRecentCount(e.target.value)},t}var t,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(i,n.a.Component),t=i,(r=[{key:"render",value:function(){return n.a.createElement("div",{className:"form-row mb-3"},n.a.createElement("div",{className:"col-sm-4"},n.a.createElement("div",{className:"form-check form-check-inline pt-1"},n.a.createElement("span",{className:"form-check-input"},n.a.createElement("input",{type:"radio",checked:this.props.rootStore.showAll,disabled:this.props.rootStore.periodCountDisabled,onChange:this.props.rootStore.setShowAll})),n.a.createElement("label",{className:"form-check-label"},gettext("Show all")))),n.a.createElement("div",{className:"col-sm-4 p-0"},n.a.createElement("div",{className:"form-check form-check-inline pt-1"},n.a.createElement("span",{className:"form-check-input"},n.a.createElement("input",{type:"radio",checked:this.props.rootStore.mostRecent,disabled:this.props.rootStore.periodCountDisabled,onChange:this.props.rootStore.setMostRecent})),n.a.createElement("label",{className:"form-check-label"},gettext("Most recent")))),n.a.createElement("div",{className:"col-sm-4"},n.a.createElement("input",{type:"number",className:"form-control",value:this.props.rootStore.mostRecentCountDisplay,disabled:this.props.rootStore.periodCountDisabled,placeholder:gettext("enter a number"),onChange:this.setMostRecentCount})))}}])&&H(t.prototype,r),o&&H(t,o),i}())||F)||F,$=Object(c.b)("rootStore")(Object(c.c)(function(e){var t=e.url,r=e.rootStore;return n.a.createElement("div",{className:"d-flex justify-content-center mb-1"},n.a.createElement("button",{className:"btn btn-primary",onClick:function(){return window.location.href=r[t]},disabled:!r[t],style:{width:"100%"}},gettext("View report")))})),ee=function(e){var t=e.children;return n.a.createElement("div",{className:"col-sm-6"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body"},t)))},te=function(){return n.a.createElement(ee,null,n.a.createElement("h5",{className:"card-title"},gettext("Periodic targets vs. actuals")),n.a.createElement("p",{className:"card-subtitle text-muted mb-2"},gettext("View results organized by target period for indicators that share the same target frequency")),n.a.createElement(Q,null),n.a.createElement(B,null),n.a.createElement(Z,null),n.a.createElement($,{url:"tvaURL"}))},re=function(){return n.a.createElement(ee,null,n.a.createElement("h5",{className:"card-title"},gettext("Recent progress for all indicators")),n.a.createElement("p",{className:"card-subtitle text-muted mb-2"},gettext("View the most recent two months of results. (You can customize your time periods.) This report does not include periodic targets")),n.a.createElement(Y,null),n.a.createElement($,{url:"timeperiodsURL"}))},oe=new N(jsContext);a.a.render(n.a.createElement(c.a,{rootStore:oe},n.a.createElement(function(){return n.a.createElement("div",{className:"row"},n.a.createElement(te,null),n.a.createElement(re,null))},null)),document.querySelector("#id_div_top_quickstart_iptt"))}},[["+aul",0,1]]]);