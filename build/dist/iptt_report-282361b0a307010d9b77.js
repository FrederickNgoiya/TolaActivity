(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{IzLX:function(e,t,r){"use strict";function n(e){return e.split(".").slice(1).filter(function(e){return 0<e}).join(".")}r.d(t,"a",function(){return n})},mYfJ:function(e,t,r){"use strict";r.r(t);var n,o,i,a,l,s,c,u,p,d,f,h,m,y,b,g,v,O,P,E,S,F,w,j,k,I,C=r("q1tI"),x=r.n(C),q=r("i8i4"),T=r.n(q),N=r("wgi2"),D=r("0pHI"),_=r("okNM"),L=r("2vnA"),A=r("IzLX");function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function V(r,n,e,t,o){var i={};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(r,n,i),i=null),i}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t,r){return t&&W(e.prototype,t),r&&W(e,r),e}var J,B="---------",X=function(){function t(e){G(this,t),this.url=e}return H(t,[{key:"callForData",value:function(e,t,r){var n={programId:e,frequency:t,reportType:r?"tva":"timeperiods"};return $.get(this.url,n)}}]),t}(),Y=(V((n=function(){function r(e,t){G(this,r),this.program=e,this.id=t.id,this.name=t.name,this.tier=t.tier,this.tierPk=t.tierPk,this.ontology=t.ontology,this.parentPk=t.parent,this.displayOntology=Object(A.a)(this.ontology),this.depth=t.depth,this.level2parent=t.level2parent,this.sortIndex=t.sort}return H(r,[{key:"indicators",get:function(){var t=this;return this.program.filteredIndicators?this.program.filteredIndicators.filter(function(e){return e.levelId==t.id}):[]}},{key:"allIndicators",get:function(){var t=this;return this.program.allIndicators?this.program.allIndicators.filter(function(e){return e.levelId==t.id}):[]}},{key:"optionName",get:function(){return this.tier+" "+this.sortIndex+" and sub-levels: "+this.name}}]),r}()).prototype,"indicators",[L.e],Object.getOwnPropertyDescriptor(n.prototype,"indicators"),n.prototype),V(n.prototype,"allIndicators",[L.e],Object.getOwnPropertyDescriptor(n.prototype,"allIndicators"),n.prototype),n),K=(i=V((o=function(){function t(e){G(this,t),M(this,"timeperiodsData",i,this),M(this,"tvaData",a,this),M(this,"id",l,this),this.program=e}return H(t,[{key:"loadData",value:function(e){this.id=e.id,this.pk=e.id,this.sortIndex=e.sortIndex,this.number=e.number,this.name=e.name,this.level=e.level,this.tierDepth=e.tierDepth,this.levelId=e.levelpk,this.sites=e.sites,this.types=e.indicatorTypes,this.sector=e.sector,this.frequency=e.frequency,this.directionOfChange=e.directionOfChange,this.unitOfMeasure=e.unitOfMeasure,this.cumulative=e.cumulative,this.unitType=e.unitType,this.baseline=e.baseline,this.lopTarget=e.lopTarget,this.lopActual=e.lopActual,this.lopMet=e.lopMet,e.reportData&&this.loadReportData(e.reportData)}},{key:"loadReportData",value:function(e){var o=this;e.timeperiods&&Object.entries(e.timeperiods).forEach(function(e){var t=z(e,2),r=t[0],n=t[1];o.timeperiodsData[r]=n}),e.tva&&Object.entries(e.tva).forEach(function(e){var t=z(e,2),r=t[0],n=t[1];o.tvaData[r]=n})}},{key:"indicatorData",get:function(){var e=String(this.program.rootStore.selectedFrequencyId),t=this.program.rootStore.isTVA?this.tvaData:this.timeperiodsData;return!!t[e]&&t[e].slice(this.program.rootStore.startPeriod,parseInt(this.program.rootStore.endPeriod)+1)}},{key:"isPercent",get:function(){return"%"==this.unitType}}]),t}()).prototype,"timeperiodsData",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=V(o.prototype,"tvaData",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=V(o.prototype,"id",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V(o.prototype,"indicatorData",[L.e],Object.getOwnPropertyDescriptor(o.prototype,"indicatorData"),o.prototype),V(o.prototype,"isPercent",[L.e],Object.getOwnPropertyDescriptor(o.prototype,"isPercent"),o.prototype),o),Q=(c=V((s=function(){function r(e,t){G(this,r),M(this,"indicators",c,this),M(this,"levels",u,this),M(this,"resultChainFilter",p,this),M(this,"reportsLoaded",d,this),this.rootStore=e,this.id=t.id,this.name=t.name,this.frequencies=t.frequencies,this.periodDateRanges=t.periodDateRanges}return H(r,[{key:"periods",value:function(e){return e in this.periodDateRanges&&this.periodDateRanges[e]}},{key:"periodCount",value:function(e){return this.periods(e)?this.periods(e).length:0}},{key:"currentPeriod",value:function(e){var t=this.periods(e);return t?7==e?t.filter(function(e){return!e[4]}).length-1:t.filter(function(e){return!e[2]}).length-1:null}},{key:"loadData",value:function(e){var t=this;e.programId,this.id,null===this.levels&&(this.levels={}),e.levels.forEach(function(e){null==t.levels[e.id]&&(t.levels[e.id]=new Y(t,e))}),null===this.indicators&&(this.indicators={}),e.indicators.forEach(function(e){null==t.indicators[e.id]&&(t.indicators[e.id]=new K(t)),t.indicators[e.id].loadData(e)}),e.resultChainFilter&&(this.resultChainFilter=e.resultChainFilter),this.reportsLoaded[e.reportType].push(String(e.reportFrequency))}},{key:"levelsChain",get:function(){return!(!this.levels||0==this.levels.length)&&Object.values(this.levels).sort(function(e,t){return e.ontology<t.ontology?-1:1})}},{key:"levelsGrouped",get:function(){if(!this.levels||0==this.levels.length)return!1;return Object.values(this.levels).sort(function(e,t){return e.depth<t.depth?-1:e.depth>t.depth?1:e.ontology<t.ontology?-1:t.ontology<e.ontology?1:0})}},{key:"thisReportNotLoaded",get:function(){return this.rootStore.isTVA&&-1==this.reportsLoaded.tva.indexOf(String(this.rootStore.selectedFrequencyId))||!this.rootStore.isTVA&&-1==this.reportsLoaded.timeperiods.indexOf(String(this.rootStore.selectedFrequencyId))}},{key:"allIndicators",get:function(){return!(!this.indicators||0==this.indicators.length)&&Object.values(this.indicators).sort(function(e,t){return e.sortIndex-t.sortIndex})}},{key:"filteredIndicators",get:function(){var e=this.allIndicators;return!!e&&(e=this.rootStore.filterOnTiers(e),e=this.rootStore.filterOnLevelChains(e),e=this.rootStore.filterOnSites(e),e=this.rootStore.filterOnTypes(e),e=this.rootStore.filterOnSectors(e),e=this.rootStore.filterOnIndicatorIds(e))}},{key:"reportLevelTiers",get:function(){return this.levelsChain?U(new Set(this.levelsChain.filter(function(e){return e.allIndicators&&0<e.allIndicators.length}).map(function(e){return{label:e.tier,value:e.tierPk,sortIndex:e.depth,filterType:"tier"}}).map(JSON.stringify))).map(JSON.parse):[]}},{key:"reportLevelChains",get:function(){var t=this;if(!this.levelsChain)return[];var e=this.levelsChain.filter(function(e){return e.depth==t.rootStore.levelFilterDepth}),r={};return e.forEach(function(e){return r[e.id]=e.allIndicators.length}),this.levelsChain.filter(function(e){return e.level2parent}).forEach(function(e){return r[e.level2parent]+=e.allIndicators.length}),e=e.filter(function(e){return r[e.id]}),U(new Set(e.map(function(e){return{label:e.optionName,value:e.id,sortIndex:e.sort,filterType:"level"}}).map(JSON.stringify))).map(JSON.parse)}},{key:"reportSites",get:function(){var e=this.allIndicators;if(!e||0==e.length)return[];var t=e.map(function(e){return e.sites}).reduce(function(e,t){return e.concat(t)}).map(function(e){return{value:e.pk,label:e.name}});return U(new Set(t.map(JSON.stringify))).map(JSON.parse)}},{key:"reportTypes",get:function(){var e=this.allIndicators;return e&&0!=e.length?U(new Set(e.map(function(e){return e.types}).reduce(function(e,t){return e.concat(t)}).map(function(e){return{value:e.pk,label:e.name}}).map(JSON.stringify))).map(JSON.parse):[]}},{key:"reportSectors",get:function(){var e=this.allIndicators;return e&&0!=e.length?U(new Set(e.map(function(e){return JSON.stringify({value:e.sector.pk,label:e.sector.name})}))).map(JSON.parse):[]}},{key:"reportIndicatorsOptions",get:function(){var e=this.rootStore.levelGrouping?this.levelsGrouped:this.levelsChain;return e&&0!=e.length?e.map(function(e){return{label:e.tier+" "+e.displayOntology,options:e.allIndicators.map(function(e){return{value:e.pk,label:e.name}})}}):[]}}]),r}()).prototype,"indicators",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=V(s.prototype,"levels",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=V(s.prototype,"resultChainFilter",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"loading"}}),d=V(s.prototype,"reportsLoaded",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{tva:[],timeperiods:[]}}}),V(s.prototype,"loadData",[L.d],Object.getOwnPropertyDescriptor(s.prototype,"loadData"),s.prototype),V(s.prototype,"levelsChain",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"levelsChain"),s.prototype),V(s.prototype,"levelsGrouped",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"levelsGrouped"),s.prototype),V(s.prototype,"thisReportNotLoaded",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"thisReportNotLoaded"),s.prototype),V(s.prototype,"allIndicators",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"allIndicators"),s.prototype),V(s.prototype,"filteredIndicators",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"filteredIndicators"),s.prototype),V(s.prototype,"reportLevelTiers",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"reportLevelTiers"),s.prototype),V(s.prototype,"reportLevelChains",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"reportLevelChains"),s.prototype),V(s.prototype,"reportSites",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"reportSites"),s.prototype),V(s.prototype,"reportTypes",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"reportTypes"),s.prototype),V(s.prototype,"reportSectors",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"reportSectors"),s.prototype),V(s.prototype,"reportIndicatorsOptions",[L.e],Object.getOwnPropertyDescriptor(s.prototype,"reportIndicatorsOptions"),s.prototype),s),Z=function(){function n(e,t){var r=this;G(this,n),this.rootStore=e,this.programs={},t.forEach(function(e){r.programs[e.id]=new Q(r.rootStore,e)})}return H(n,[{key:"getProgram",value:function(e){return this.programs[e]}}]),n}(),ee=(h=V((f=function(){function n(e,t){var r,l=this;G(this,n),M(this,"selectedProgram",h,this),M(this,"selectedFrequencyId",m,this),M(this,"startPeriod",y,this),M(this,"endPeriod",b,this),M(this,"nullRecent",g,this),M(this,"levelGrouping",v,this),M(this,"levelFilters",O,this),M(this,"tierFilters",P,this),M(this,"siteFilters",E,this),M(this,"typeFilters",S,this),M(this,"sectorFilters",F,this),M(this,"indicatorFilters",w,this),M(this,"noIndicatorsForFrequency",j,this),M(this,"loading",k,this),M(this,"initialized",I,this),this.reportType=null,this.router=null,this.currentPeriod=null,this.headerCols=8,this.lopCols=3,this.levelFilterDepth=2,this.init=function(e){l.router=e,l.loading=!0;var t=e.getState().params,r=!1;if(l.setProgramId(t.programId),l.setReportType(t.reportType),(t.timeperiods||t.targetperiods)&&(t.frequency=t.timeperiods||t.targetperiods,delete t.timeperiods,delete t.targetperiods,r=!0),l.setFrequencyId(t.frequency),1==t.timeframe)t.start=0,t.end=l.selectedProgram.periodDateRanges[t.frequency].length-1,delete t.timeframe,r=!0;else if(2==t.timeframe){var n=t.numrecentperiods||2;t.end=l.selectedProgram.currentPeriod(t.frequency),t.start=t.end-n+1,delete t.timeframe,delete t.numrecentperiods,r=!0}else void 0!==t.start&&void 0!==t.end||(t.start=0,t.end=l.selectedProgram.periodDateRanges[t.frequency].length-1,delete t.timeframe,delete t.numrecentperiods,delete t.start_period,delete t.end_period,r=!0);l.setStartPeriod(t.start),l.setEndPeriod(t.end),r&&e.navigate(e.getState().name,t,{reload:!0}),l.loading=!1,l.callForData()},this.updateUrl=function(e,t){var r=l.router.getState().params;if(null!==t&&r[e]!=t){var n=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){R(t,e,r[e])})}return t}({},r,R({},e,t));l.router.navigate(l.router.getState().name,n,{replace:!0})}},this.updateRoute=function(e){e.previousRoute,e.route},this.callForData=function(){l.loading||(l.loading=!0,l.reportAPI.callForData(l.selectedProgram.id,l.selectedFrequencyId,l.isTVA).then(function(e){l.selectedProgram.loadData(e),l.updateFilters(),l.loading=!1,l.initialized=!0}))},this.updateFilters=function(){var e=l.router.getState().params;if(e.frequency&&l.isTVA&&-1==l.selectedProgram.frequencies.indexOf(parseInt(e.frequency))&&(l.noIndicatorsForFrequency=!0,l.setFrequencyId(null)),e.levels){var t=e.levels instanceof Array?e.levels.map(Number):[e.levels].map(Number);l.levelFilters=l.selectedProgram.reportLevelChains.filter(function(e){return-1!=t.indexOf(e.value)}),l.updateUrl("levels",l.levelFilters.map(function(e){return e.value})),e.tiers&&l.updateUrl("params",[])}if(e.tiers){var r=e.tiers instanceof Array?e.tiers.map(Number):[e.tiers].map(Number);l.tierFilters=l.selectedProgram.reportLevelTiers.filter(function(e){return-1!=r.indexOf(e.value)}),l.updateUrl("tiers",l.tierFilters.map(function(e){return e.value}))}if(e.sites){var n=e.sites instanceof Array?e.sites.map(Number):[e.sites].map(Number);l.siteFilters=l.selectedProgram.reportSites.filter(function(e){return-1!=n.indexOf(e.value)}),l.updateUrl("sites",l.siteFilters.map(function(e){return e.value}))}if(e.types){var o=e.types instanceof Array?e.types.map(Number):[e.types].map(Number);l.typeFilters=l.selectedProgram.reportTypes.filter(function(e){return-1!=o.indexOf(e.value)}),l.updateUrl("types",l.typeFilters.map(function(e){return e.value}))}if(e.sectors){var i=e.sectors instanceof Array?e.sectors.map(Number):[e.sectors].map(Number);l.sectorFilters=l.selectedProgram.reportSectors.filter(function(e){return-1!=i.indexOf(e.value)}),l.updateUrl("sectors",l.sectorFilters.map(function(e){return e.value}))}if(e.indicators){var a=e.indicators instanceof Array?e.indicators.map(Number):[e.indicators].map(Number);l.indicatorFilters=l.selectedProgram.reportIndicatorsOptions.filter(function(e){return-1!=a.indexOf(e.value)}),l.updateUrl("indicators",l.indicatorFilters.map(function(e){return e.value}))}},this.getPeriodLabel=function(e,t){if(7==l.selectedFrequencyId){var r=z(e,4);return{title:r[2]+" "+r[3],subtitle:""}}if(2==l.selectedFrequencyId)return{title:e[2].toUpperCase(),subtitle:""};var n=z(e,2),o=n[0],i=n[1];return{title:l._periodLabels.names[l.selectedFrequencyId]+" "+(t+1),subtitle:o+" - "+i}},this.setShowAll=function(){l.setStartPeriod(0),l.setEndPeriod(l.selectedProgram.periodCount(l.selectedFrequencyId)-1)},this.setMostRecent=function(e){if(""===e)l.nullRecent=!0;else if(null!==e){var t=Math.max(l.currentPeriod-e+1,0);l.setEndPeriod(l.currentPeriod),l.setStartPeriod(t)}},this.setLevelFilters=function(e){l.levelFilters=e,l.tierFilters=[],l.updateUrl("levels",e.map(function(e){return e.value})),l.updateUrl("tiers",[])},this.setTierFilters=function(e){l.levelFilters=[],l.tierFilters=e,l.updateUrl("tiers",e.map(function(e){return e.value})),l.updateUrl("levels",[])},this.setSiteFilters=function(e){l.siteFilters=e,l.updateUrl("sites",e.map(function(e){return e.value}))},this.setTypeFilters=function(e){l.typeFilters=e,l.updateUrl("types",e.map(function(e){return e.value}))},this.setSectorFilters=function(e){l.sectorFilters=e,l.updateUrl("sectors",e.map(function(e){return e.value}))},this.setIndicatorFilters=function(e){l.indicatorFilters=e,l.updateUrl("indicators",e.map(function(e){return e.value}))},this.clearFilters=function(){l.levelFilters=l.siteFilters=l.typeFilters=l.sectorFilters=l.tierFilters=l.indicatorFilters=[],l.updateUrl("levels",[]),l.updateUrl("tiers",[]),l.updateUrl("sites",[]),l.updateUrl("types",[]),l.updateUrl("sectors",[]),l.updateUrl("indicators",[])},this.programStore=new Z(this,e.programs),this.reportAPI=t,this._periodLabels=(R(r={},2,e.labels.timeperiods),R(r,1,e.labels.targetperiods),R(r,"names",e.labels.periodNames),r)}return H(n,[{key:"setReportType",value:function(e){this.reportType="timeperiods"==e?2:1}},{key:"filterOnTiers",value:function(e){if(this.tierFilters&&0<this.tierFilters.length){var t=this.tierFilters.map(function(e){return e.sortIndex});e=e.filter(function(e){return-1!=t.indexOf(e.tierDepth)})}return e}},{key:"filterOnLevelChains",value:function(e){if(this.levelFilters&&0<this.levelFilters.length){var t=this.levelFilters.map(function(e){return e.value}),r=this.selectedProgram.levelsGrouped.filter(function(e){return-1!=t.indexOf(e.level2parent)}).map(function(e){return e.id});e=e.filter(function(e){return-1!=r.indexOf(e.levelId)})}return e}},{key:"filterOnTypes",value:function(e){if(this.typeFilters&&0<this.typeFilters.length){var t=this.typeFilters.map(function(e){return e.value});e=e.filter(function(e){return 0<e.types.map(function(e){return e.pk}).filter(function(e){return t.includes(e)}).length})}return e}},{key:"filterOnSectors",value:function(e){var t=this;return this.sectorFilters&&0<this.sectorFilters.length&&(e=e.filter(function(e){return-1!=t.sectorFilters.map(function(e){return e.value}).indexOf(e.sector.pk)})),e}},{key:"filterOnSites",value:function(e){if(this.siteFilters&&0<this.siteFilters.length){var t=this.siteFilters.map(function(e){return e.value});e=e.filter(function(e){return 0<e.sites.map(function(e){return e.pk}).filter(function(e){return t.includes(e)}).length})}return e}},{key:"filterOnIndicatorIds",value:function(e){var t=this;return this.indicatorFilters&&0<this.indicatorFilters.length&&(e=e.filter(function(e){return-1!=t.indicatorFilters.map(function(e){return e.value}).indexOf(e.pk)})),e}},{key:"setProgramId",value:function(e){null===e?this.selectedProgram=null:null!=this.selectedProgram&&this.selectedProgram.id==e||(this.noIndicatorsForFrequency=!1,this.updateUrl("programId",e),this.selectedProgram=this.programStore.getProgram(e),this.isTVA&&this.selectedFrequencyId&&-1==this.selectedProgram.frequencies.indexOf(parseInt(this.selectedFrequencyId))?(this.noIndicatorsForFrequency=!0,this.setFrequencyId(null)):null!==this.selectedFrequencyId&&(this.setFrequencyId(this.selectedFrequencyId),this.updatePeriods()))}},{key:"setFrequencyId",value:function(e){null===e?this.selectedFrequencyId=null:this.selectedFrequencyId!=e&&(this.selectedFrequencyId=e,this.updateUrl("frequency",e),this.isTVA&&this.selectedFrequencyId&&-1!=this.selectedProgram.frequencies.indexOf(parseInt(this.selectedFrequencyId))&&(this.noIndicatorsForFrequency=!1),this.updatePeriods(),this.updateCurrentPeriod(),this.selectedProgram.thisReportNotLoaded&&this.callForData())}},{key:"updateCurrentPeriod",value:function(){this.currentPeriod=this.selectedProgram.currentPeriod(this.selectedFrequencyId)}},{key:"updatePeriods",value:function(){2==this.selectedFrequencyId?(this.setStartPeriod(0),this.setEndPeriod(1)):(""!=this.startPeriod&&this.setStartPeriod(this.startPeriod),""!=this.endPeriod&&this.setEndPeriod(this.endPeriod))}},{key:"setStartPeriod",value:function(e){2==this.selectedFrequencyId?(this.startPeriod=0,this.updateUrl("start",this.startPeriod)):this.selectedFrequencyId&&this.selectedProgram&&(e=null!==e?e<this.selectedProgram.periodCount(this.selectedFrequencyId)?e:0:"",this.startPeriod=e,this.updateUrl("start",this.startPeriod))}},{key:"setEndPeriod",value:function(e){2==this.selectedFrequencyId?(this.endPeriod=1,this.updateUrl("end",this.endPeriod)):this.selectedFrequencyId&&this.selectedProgram&&(this.nullRecent=!1,e=null!==e?e<this.selectedProgram.periodCount(this.selectedFrequencyId)?e:this.selectedProgram.periodCount(this.selectedFrequencyId)-1:"",this.endPeriod=e,this.updateUrl("end",this.endPeriod))}},{key:"pinData",get:function(){if(!this.selectedProgram)return!1;var e=window.location.search;return e=e&&0<e.length&&"?"==e[0]?e.slice(1):e,!!this.selectedProgram&&{program:this.selectedProgram.id,report_type:this.router.getState().params.reportType,query_string:e}}},{key:"programPageUrl",get:function(){return!!this.selectedProgram&&"/program/"+this.selectedProgram.id+"/"}},{key:"currentExcelURL",get:function(){this.router.getState().params;var e="/indicators/iptt_excel/"+window.location.search;return e+="&programId="+this.selectedProgram.id,e+="&reportType="+(this.isTVA?"tva":"timeperiods")}},{key:"allExcelURL",get:function(){this.router.getState().params;var e="/indicators/iptt_excel/?frequency=all";return e+="&programId="+this.selectedProgram.id,e+="&reportType="+(this.isTVA?"tva":"timeperiods")}},{key:"isTVA",get:function(){return 1===this.reportType}},{key:"report",get:function(){return null!==this.selectedProgram&&this.selectedFrequencyId?(this.levelGrouping?this.selectedProgram.levelsGrouped:this.selectedProgram.levelsChain)||(this.callForData(),!1):[]}},{key:"selectedProgramOption",get:function(){return null===this.selectedProgram?{value:null,label:B}:{value:this.selectedProgram.id,label:this.selectedProgram.name}}},{key:"programOptions",get:function(){return Object.entries(this.programStore.programs).map(function(e){var t=z(e,2);return{value:t[0],label:t[1].name}})}},{key:"selectedFrequencyOption",get:function(){return null===this.selectedProgram||null===this.selectedFrequencyId?{value:null,label:B}:{value:this.selectedFrequencyId,label:this._periodLabels[this.reportType][this.selectedFrequencyId]}}},{key:"frequencyOptions",get:function(){var t=this;return null===this.selectedProgram?[{value:null,label:B}]:2==this.reportType?Object.entries(this._periodLabels[2]).map(function(e){var t=z(e,2);return{value:t[0],label:t[1]}}):this.selectedProgram.frequencies.map(function(e){return{value:e,label:t._periodLabels[1][e]}})}},{key:"startPeriodLabel",get:function(){return this.selectedProgram&&this.selectedFrequencyId&&null!==this.startPeriod&&""!==this.startPeriod&&this.startPeriod<=this.selectedProgram.periodCount(this.selectedFrequencyId)?this.selectedProgram.periods(this.selectedFrequencyId)[this.startPeriod][0]:""}},{key:"endPeriodLabel",get:function(){return this.selectedProgram&&this.selectedFrequencyId&&null!==this.endPeriod&&""!==this.endPeriod&&this.endPeriod<this.selectedProgram.periodCount(this.selectedFrequencyId)?this.selectedProgram.periods(this.selectedFrequencyId)[this.endPeriod][1]:""}},{key:"selectedPeriods",get:function(){return this.selectedProgram&&this.selectedFrequencyId&&1!==this.selectedFrequencyId&&null!==this.startPeriod&&null!==this.endPeriod?this.selectedProgram.periods(this.selectedFrequencyId).slice(this.startPeriod,parseInt(this.endPeriod)+1):[]}},{key:"periodOptions",get:function(){var o=this;if(null===this.selectedProgram||null===this.selectedFrequencyId)return[{value:null,label:B}];if(7!=this.selectedFrequencyId)return 2==this.selectedFrequencyId||1==this.selectedFrequencyId?this.selectedProgram.periods(this.selectedFrequencyId).map(function(e,t){return{value:t,label:e[t]}}):this.selectedProgram.periods(this.selectedFrequencyId).map(function(e,t){var r=o.getPeriodLabel(e,t);return{value:t,label:r.title+" ("+r.subtitle+")"}});var i={};return this.selectedProgram.periodDateRanges[7].forEach(function(e,t){var r=o.getPeriodLabel(e,t),n=e[3];n in i||(i[n]=[]),i[n].push({value:t,label:r.title})}),i}},{key:"timeframeEnabled",get:function(){return this.selectedProgram&&2!=this.selectedFrequencyId&&1!=this.selectedFrequencyId}},{key:"showAll",get:function(){return this.timeframeEnabled&&0==this.startPeriod&&this.endPeriod==this.selectedProgram.periodCount(this.selectedFrequencyId)-1}},{key:"mostRecent",get:function(){return this.nullRecent?"":this.timeframeEnabled&&!this.showAll&&null!==this.currentPeriod&&this.endPeriod==this.currentPeriod?this.endPeriod-this.startPeriod+1:null}}]),n}()).prototype,"selectedProgram",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=V(f.prototype,"selectedFrequencyId",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=V(f.prototype,"startPeriod",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=V(f.prototype,"endPeriod",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=V(f.prototype,"nullRecent",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=V(f.prototype,"levelGrouping",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=V(f.prototype,"levelFilters",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=V(f.prototype,"tierFilters",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=V(f.prototype,"siteFilters",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=V(f.prototype,"typeFilters",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=V(f.prototype,"sectorFilters",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=V(f.prototype,"indicatorFilters",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=V(f.prototype,"noIndicatorsForFrequency",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=V(f.prototype,"loading",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=V(f.prototype,"initialized",[L.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V(f.prototype,"pinData",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"pinData"),f.prototype),V(f.prototype,"programPageUrl",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"programPageUrl"),f.prototype),V(f.prototype,"currentExcelURL",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"currentExcelURL"),f.prototype),V(f.prototype,"allExcelURL",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"allExcelURL"),f.prototype),V(f.prototype,"report",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"report"),f.prototype),V(f.prototype,"selectedProgramOption",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"selectedProgramOption"),f.prototype),V(f.prototype,"selectedFrequencyOption",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"selectedFrequencyOption"),f.prototype),V(f.prototype,"frequencyOptions",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"frequencyOptions"),f.prototype),V(f.prototype,"startPeriodLabel",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"startPeriodLabel"),f.prototype),V(f.prototype,"endPeriodLabel",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"endPeriodLabel"),f.prototype),V(f.prototype,"selectedPeriods",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"selectedPeriods"),f.prototype),V(f.prototype,"periodOptions",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"periodOptions"),f.prototype),V(f.prototype,"timeframeEnabled",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"timeframeEnabled"),f.prototype),V(f.prototype,"showAll",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"showAll"),f.prototype),V(f.prototype,"mostRecent",[L.e],Object.getOwnPropertyDescriptor(f.prototype,"mostRecent"),f.prototype),f);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae,le,se=function(e){var t={};return e.minWidth&&(t.minWidth=e.minWidth),x.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase "+(e.classes||""),style:t},e.cellText)},ce=Object(_.b)("labels","rootStore")(J=Object(_.c)(J=function(e){function i(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=ne(this,(e=oe(i)).call.apply(e,[this].concat(r)))).getDateRangeHeaders=function(){var r=[],e=n.props.rootStore.selectedPeriods;return e&&(n.props.rootStore.isTVA?e.forEach(function(e,t){r.push(x.a.createElement(se,{classes:"text-right",minWidth:"110px",key:t+"a",cellText:n.props.labels.columnHeaders.target})),r.push(x.a.createElement(se,{classes:"text-right",minWidth:"110px",key:t+"b",cellText:n.props.labels.columnHeaders.actual})),r.push(x.a.createElement(se,{classes:"text-right",minWidth:"110px",key:t+"c",cellText:n.props.labels.columnHeaders.met}))}):e.forEach(function(e,t){r.push(x.a.createElement(se,{classes:"text-right",key:t,cellText:n.props.labels.columnHeaders.actual}))})),r},n}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(i,x.a.Component),t=i,(r=[{key:"render",value:function(){var e=this.props.labels.columnHeaders;return x.a.createElement("tr",null,x.a.createElement(se,{minWidth:"80px",cellText:e.number}),x.a.createElement(se,{minWidth:"600px",classes:"td-no-side-borders",cellText:e.indicator}),x.a.createElement(se,{classes:"td-no-side-borders"}),x.a.createElement(se,{minWidth:"250px",cellText:e.uom}),x.a.createElement(se,{cellText:e.change}),x.a.createElement(se,{minWidth:"130px",cellText:e.cumulative}),x.a.createElement(se,{minWidth:"50px",cellText:e.numType}),x.a.createElement(se,{cellText:e.baseline}),x.a.createElement(se,{minWidth:"110px",classes:"text-right td-no-side-borders",cellText:e.target}),x.a.createElement(se,{minWidth:"110px",classes:"text-right td-no-side-borders",cellText:e.actual}),x.a.createElement(se,{minWidth:"110px",classes:"text-right td-no-side-borders",cellText:e.met}),this.getDateRangeHeaders())}}])&&re(t.prototype,r),n&&re(t,n),i}())||J)||J,ue=Object(_.b)("labels","rootStore")(Object(_.c)(function(e){var t=e.labels,n=e.rootStore,r=n.selectedPeriods.length*(n.isTva?3:1);return x.a.createElement(x.a.Fragment,null,x.a.createElement("colgroup",{scope:"col",span:n.headerCols}),x.a.createElement("colgroup",{scope:"col",span:n.lopCols,className:"lopCols"}),x.a.createElement("colgroup",{scope:"col",span:r}),x.a.createElement("thead",{className:"thead-light"},x.a.createElement("tr",null,x.a.createElement("td",{colSpan:n.headerCols,id:"id_td_iptt_program_name",className:"lopCols align-bottom pt-2"},x.a.createElement("h5",{className:"m-0"},x.a.createElement("strong",null,n.selectedProgram.name))),x.a.createElement("td",{scope:"colgroup",colSpan:n.lopCols,className:"text-center align-bottom text-uppercase"},t.columnHeaders.lop),n.selectedPeriods?n.selectedPeriods.map(function(e,t){var r=n.getPeriodLabel(e,t);return x.a.createElement("td",{scope:"col",colSpan:n.isTVA?"3":"1",className:"text-center lopCols text-nowrap align-bottom"+(7==n.selectedFrequencyId?" text-uppercase":""),key:t+parseInt(n.startPeriod)},r.title,x.a.createElement("br",null),x.a.createElement("small",null,r.subtitle))}):[]),x.a.createElement(ce,null)))}));function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t,r){return t&&fe(e.prototype,t),r&&fe(e,r),e}function me(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Oe,Pe,Ee,Se,Fe,we,je,ke,Ie,Ce,xe,qe="—",Te=Object(_.c)(function(e){return x.a.createElement("td",ve({className:"td-no-side-borders"},e),e.children)}),Ne=Object(_.c)(function(e){var t=e.target,r=e.value,n=e.isPercent,o=r&&t&&0!=t?String(Math.round(r/t*1e3)/10)+"%":qe,i=r?String(Math.round(r))+(n?"%":""):qe,a=t?String(Math.round(t))+(n?"%":""):qe;return x.a.createElement(x.a.Fragment,null,x.a.createElement("td",{align:"right"},a),x.a.createElement("td",{align:"right"},i),x.a.createElement("td",{align:"right"},o))}),De=Object(_.b)("rootStore")(ae=Object(_.c)(ae=function(e){function i(){var e,r;de(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=me(this,(e=ye(i)).call.apply(e,[this].concat(n)))).getPeriodValues=function(){return r.props.indicator.indicatorData?r.props.rootStore.isTVA?r.props.indicator.indicatorData.map(function(e,t){return x.a.createElement(Ne,ve({key:t,isPercent:r.props.indicator.isPercent},e))}):r.props.indicator.indicatorData.map(function(e,t){return x.a.createElement("td",{key:t,align:"right"},e?String(Math.round(e))+(r.props.indicator.isPercent?"%":""):qe)}):x.a.createElement("td",{key:r.props.index},"Loading")},r}return be(i,x.a.Component),he(i,[{key:"render",value:function(){var e=this.props.indicator;if(null===e.id)return x.a.createElement(_e,null);var t=x.a.createElement("button",{type:"button",className:"btn btn-link p-1 indicator-ajax-popup indicator-data","data-indicatorid":e.id,"data-container":"body","data-trigger":"focus","data-toggle":"popover","data-placement":"bottom"},x.a.createElement("i",{className:"fas fa-table"})),r=x.a.createElement("a",{href:"#",className:"indicator-link float-right"},x.a.createElement("i",{className:"fas fa-cog"})),n=e.baseline?String(e.baseline)+(e.isPercent?"%":""):qe,o=e.lopTarget?String(Math.round(e.lopTarget))+(e.isPercent?"%":""):qe,i=e.lopActual?e.isPercent?String(Math.round(10*e.lopActual)/10)+"%":String(Math.round(e.lopActual)):qe,a=e.lopMet?String(Math.round(1e3*e.lopMet)/10)+"%":qe;return x.a.createElement("tr",null,x.a.createElement(Te,null,e.number),x.a.createElement(Te,null,t,"  ",e.name),x.a.createElement(Te,null,r),x.a.createElement(Te,null,e.unitOfMeasure),x.a.createElement(Te,{align:"center"},e.directionOfChange),x.a.createElement(Te,null,e.cumulative),x.a.createElement(Te,null,e.unitType),x.a.createElement(Te,{align:"right"},n),x.a.createElement(Te,{align:"right"},o),x.a.createElement(Te,{align:"right"},i),x.a.createElement(Te,{align:"right"},a),this.getPeriodValues())}}]),i}())||ae)||ae,_e=function(){return x.a.createElement("tr",null,x.a.createElement("td",null,"Loading"))},Le=Object(_.b)("labels")(function(e){var t=e.labels;return x.a.createElement("tr",null,x.a.createElement("td",{colSpan:"8"},t.noIndicatorsForFrequency))}),Ae=Object(_.b)("rootStore")(Object(_.c)(function(e){var t=e.level,r=e.rootStore,n=t.indicators?t.indicators.map(function(e,t){return x.a.createElement(De,{indicator:e,key:t})}):null,o=r.headerCols+r.lopCols+r.selectedPeriods.length*(r.isTva?3:1);return x.a.createElement(x.a.Fragment,null,x.a.createElement("tr",{className:"row__level"},x.a.createElement("td",{colSpan:o},t.tier," ",t.displayOntology,": ",t.name)),n)})),Re=Object(_.b)("rootStore")(le=Object(_.c)(le=function(e){function t(){return de(this,t),me(this,ye(t).apply(this,arguments))}return be(t,x.a.Component),he(t,[{key:"render",value:function(){return x.a.createElement("tbody",null,this.tableContent)}},{key:"noIndicatorsForFrequency",get:function(){return!1}},{key:"tableContent",get:function(){return this.props.rootStore.loading||!this.props.rootStore.initialized?x.a.createElement(_e,null):this.noIndicatorsForFrequency?x.a.createElement(Le,null):this.props.rootStore.report.map(function(e,t){return x.a.createElement(Ae,{level:e,key:t})})}}]),t}())||le)||le,Ue=function(){return x.a.createElement("table",{className:"table table-sm table-bordered table-hover table__iptt",id:"iptt_table"},x.a.createElement(ue,null),x.a.createElement(Re,null))},ze=r("y2Vs"),Me=(r("oary"),r("VCnP")),Ve=r.n(Me);function Ge(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){We(t,e,r[e])})}return t}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ye(e,t,r){return t&&Xe(e.prototype,t),r&&Xe(e,r),e}function $e(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var et,tt,rt,nt,ot,it,at,lt,st,ct,ut=function(e){return x.a.createElement("div",{className:"form-row mb-3"},x.a.createElement("label",{className:"col-form-label text-uppercase"},e.label),e.children)},pt=Object(_.b)("labels","rootStore")(Oe=Object(_.c)(Oe=function(e){function i(){var e,t;Be(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=$e(this,(e=Ke(i)).call.apply(e,[this].concat(n)))).selectProgram=function(e){t.props.rootStore.setProgramId(e.value)},t}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){return x.a.createElement(ut,{label:this.props.labels.programSelect},x.a.createElement(ze.default,{options:this.props.rootStore.programOptions,value:this.props.rootStore.selectedProgramOption,onChange:this.selectProgram,className:"iptt-react-select"}))}}]),i}())||Oe)||Oe,dt=Object(_.b)("labels","rootStore")(Pe=Object(_.c)(Pe=function(e){function i(){var e,t;Be(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=$e(this,(e=Ke(i)).call.apply(e,[this].concat(n)))).selectFrequency=function(e){t.props.rootStore.setFrequencyId(e.value)},t}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){var e=this.props.rootStore.isTVA?this.props.labels.periodSelect.tva:this.props.labels.periodSelect.timeperiods;return x.a.createElement(ut,{label:e},x.a.createElement(ze.default,{options:this.props.rootStore.frequencyOptions,value:this.props.rootStore.selectedFrequencyOption,onChange:this.selectFrequency,className:"iptt-react-select"}))}}]),i}())||Pe)||Pe,ft=Object(_.b)("rootStore")(Ee=Object(_.c)((et=(Se=function(e){function t(){return Be(this,t),$e(this,Ke(t).apply(this,arguments))}return Qe(t,x.a.Component),Ye(t,[{key:"render",value:function(){return x.a.createElement(ut,{label:this.props.label},x.a.createElement("select",{className:"form-control",value:this.props.value,onChange:this.props.onChange,disabled:2==this.props.rootStore.selectedFrequencyId||1==this.props.rootStore.selectedFrequencyId},this.options))}},{key:"options",get:function(){return 7==this.props.rootStore.selectedFrequencyId?Object.entries(this.props.rootStore.periodOptions).map(function(e,t){var r=He(e,2),n=r[0],o=r[1];return x.a.createElement("optgroup",{label:n,key:t},o.map(function(e){return x.a.createElement("option",{value:e.value,key:e.value},e.label)}))}):this.props.rootStore.periodOptions.map(function(e){return x.a.createElement("option",{value:e.value,key:e.value},e.label)})}}]),t}()).prototype,tt="options",rt=[L.e],nt=Object.getOwnPropertyDescriptor(Se.prototype,"options"),ot=Se.prototype,it={},Object.keys(nt).forEach(function(e){it[e]=nt[e]}),it.enumerable=!!it.enumerable,it.configurable=!!it.configurable,("value"in it||it.initializer)&&(it.writable=!0),it=rt.slice().reverse().reduce(function(e,t){return t(et,tt,e)||e},it),ot&&void 0!==it.initializer&&(it.value=it.initializer?it.initializer.call(ot):void 0,it.initializer=void 0),void 0===it.initializer&&(Object.defineProperty(et,tt,it),it=null),Ee=Se))||Ee)||Ee,ht=Object(_.b)("labels","rootStore")(Object(_.c)(function(e){var t=e.labels,r=e.rootStore;return x.a.createElement(ft,{label:t.startPeriod,value:r.startPeriod,onChange:function(e){r.setStartPeriod(e.target.value)}})})),mt=Object(_.b)("labels","rootStore")(Object(_.c)(function(e){var t=e.labels,r=e.rootStore;return x.a.createElement(ft,{label:t.endPeriod,value:r.endPeriod,onChange:function(e){r.setEndPeriod(e.target.value)}})})),yt=Object(_.b)("labels","rootStore")(Fe=Object(_.c)(Fe=function(e){function i(){var e,t;Be(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=$e(this,(e=Ke(i)).call.apply(e,[this].concat(n)))).checkMostRecent=function(){t.props.rootStore.setMostRecent(2)},t.updateMostRecentCount=function(e){t.props.rootStore.setMostRecent(e.target.value)},t}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){return x.a.createElement("div",{className:"form-row mb-3"},x.a.createElement("div",{className:"col-sm-4"},x.a.createElement("div",{className:"form-check form-check-inline pt-1"},x.a.createElement("span",{className:"form-check-input"},x.a.createElement("input",{type:"radio",checked:this.props.rootStore.showAll,disabled:!this.props.rootStore.timeframeEnabled,onChange:this.props.rootStore.setShowAll})),x.a.createElement("label",{className:"form-check-label"},this.props.labels.showAll))),x.a.createElement("div",{className:"col-sm-4 p-0"},x.a.createElement("div",{className:"form-check form-check-inline pt-1"},x.a.createElement("span",{className:"form-check-input"},x.a.createElement("input",{type:"radio",checked:null!==this.props.rootStore.mostRecent,disabled:!this.props.rootStore.timeframeEnabled,onChange:this.checkMostRecent})),x.a.createElement("label",{className:"form-check-label"},this.props.labels.mostRecent))),x.a.createElement("div",{className:"col-sm-4"},x.a.createElement("input",{type:"number",className:"form-control",value:this.props.rootStore.mostRecent||"",disabled:!this.props.rootStore.timeframeEnabled,onChange:this.updateMostRecentCount})))}}]),i}())||Fe)||Fe,bt=Object(_.b)("labels","rootStore")(we=Object(_.c)(we=function(e){function i(){var e,t;Be(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=$e(this,(e=Ke(i)).call.apply(e,[this].concat(n)))).onChange=function(e){t.props.rootStore.levelGrouping=1==e.target.value},t}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){return x.a.createElement(ut,{label:this.props.labels.levelGrouping.label},x.a.createElement("select",{className:"form-control",value:this.props.rootStore.levelGrouping?1:0,onChange:this.onChange},x.a.createElement("option",{value:"0"},this.props.rootStore.selectedProgram.resultChainFilter),x.a.createElement("option",{value:"1"},this.props.labels.levelGrouping.group)))}}]),i}())||we)||we,gt=function(e){return x.a.createElement("div",{className:"form-row mb-2 iptt-react-select-row"},x.a.createElement("label",{className:"col-form-label text-uppercase"},e.label),e.children)},vt=function(e){return""==e.children?x.a.createElement("div",null):x.a.createElement(x.a.Fragment,null,x.a.createElement("hr",{style:{margin:"3px 0px 0px 0px"}}),x.a.createElement("div",{style:{textTransform:"uppercase",paddingLeft:"4px",marginBottom:"2px"}},e.children))},Ot=Object(_.b)("labels","rootStore")(je=Object(_.c)(je=function(e){function i(){var e,n;Be(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=$e(this,(e=Ke(i)).call.apply(e,[this].concat(r)))).getOptions=function(){return[{label:"",options:n.props.rootStore.selectedProgram.reportLevelTiers},{label:"Outcome chains",options:n.props.rootStore.selectedProgram.reportLevelChains}]},n.getValue=function(){return n.props.rootStore.levelFilters&&0<n.props.rootStore.levelFilters.length?n.props.rootStore.levelFilters:n.props.rootStore.tierFilters&&0<n.props.rootStore.tierFilters.length?n.props.rootStore.tierFilters:[]},n.updateLevelFilters=function(e){var t=e.filter(function(e){return"level"==e.filterType}),r=e.filter(function(e){return"tier"==e.filterType});0<t.length&&0<r.length?n.props.rootStore.tierFilters&&0<n.props.rootStore.tierFilters.length?n.props.rootStore.setLevelFilters(t):n.props.rootStore.setTierFilters(r):0<t.length?n.props.rootStore.setLevelFilters(t):n.props.rootStore.setTierFilters(r)},n}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){var e={option:function(e,t){return Ge({},e,{padding:"1px 12px",display:"inline-block"})},container:function(e,t){return Ge({},e,{backgroundColor:"#f5f5f5"})}};return x.a.createElement(gt,{label:this.props.labels.levelSelect},x.a.createElement(Ve.a,{options:this.getOptions(),isMulti:!0,styles:e,formatOptionLabel:function(e){return x.a.createElement("div",{style:{display:"inline-block",float:"right",width:"90%"}},e.label)},components:{GroupHeading:vt},value:this.getValue(),onChange:this.updateLevelFilters}))}}]),i}())||je)||je,Pt=Object(_.b)("labels","rootStore")(ke=Object(_.c)(ke=function(e){function i(){var e,t;Be(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=$e(this,(e=Ke(i)).call.apply(e,[this].concat(n)))).updateSiteFilters=function(e){t.props.rootStore.setSiteFilters(e)},t}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){return x.a.createElement(gt,{label:this.props.labels.siteSelect},x.a.createElement(Ve.a,{options:this.props.rootStore.selectedProgram.reportSites,isMulti:!0,value:this.props.rootStore.siteFilters,onChange:this.updateSiteFilters}))}}]),i}())||ke)||ke,Et=Object(_.b)("labels","rootStore")(Ie=Object(_.c)(Ie=function(e){function i(){var e,t;Be(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=$e(this,(e=Ke(i)).call.apply(e,[this].concat(n)))).updateTypeFilters=function(e){t.props.rootStore.setTypeFilters(e)},t}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){return x.a.createElement(gt,{label:this.props.labels.typeSelect},x.a.createElement(Ve.a,{options:this.props.rootStore.selectedProgram.reportTypes,isMulti:!0,value:this.props.rootStore.typeFilters,onChange:this.updateTypeFilters}))}}]),i}())||Ie)||Ie,St=Object(_.b)("labels","rootStore")(Ce=Object(_.c)(Ce=function(e){function i(){var e,t;Be(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=$e(this,(e=Ke(i)).call.apply(e,[this].concat(n)))).updateSectorFilters=function(e){t.props.rootStore.setSectorFilters(e)},t}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){return x.a.createElement(gt,{label:this.props.labels.sectorSelect},x.a.createElement(Ve.a,{options:this.props.rootStore.selectedProgram.reportSectors,isMulti:!0,value:this.props.rootStore.sectorFilters,onChange:this.updateSectorFilters}))}}]),i}())||Ce)||Ce,Ft=Object(_.b)("labels","rootStore")(xe=Object(_.c)(xe=function(e){function i(){var e,t;Be(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=$e(this,(e=Ke(i)).call.apply(e,[this].concat(n)))).updateIndicatorFilters=function(e){t.props.rootStore.setIndicatorFilters(e)},t}return Qe(i,x.a.Component),Ye(i,[{key:"render",value:function(){return x.a.createElement(gt,{label:this.props.labels.indicatorSelect},x.a.createElement(Ve.a,{options:this.props.rootStore.selectedProgram.reportIndicatorsOptions,isMulti:!0,components:{GroupHeading:vt},value:this.props.rootStore.indicatorFilters,onChange:this.updateIndicatorFilters}))}}]),i}())||xe)||xe,wt=Object(_.b)("labels")(Object(_.c)(function(e){var t=e.labels;return x.a.createElement("nav",{id:"id_iptt_report_filter"},x.a.createElement("div",{className:"p-3",id:"filter-top"},x.a.createElement("h3",{className:"filter-title text-title-case"},t.filterTitle),x.a.createElement(pt,null),x.a.createElement(dt,null),x.a.createElement(yt,null),x.a.createElement(ht,null),x.a.createElement(mt,null),x.a.createElement(bt,null)),x.a.createElement("div",{id:"filter-middle",className:"p-3"},x.a.createElement(Ot,null),x.a.createElement(Pt,null),x.a.createElement(Et,null),x.a.createElement(St,null),x.a.createElement(Ft,null)))})),jt=r("MWn0"),kt=r.n(jt);function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qt(e,t,r){return t&&xt(e.prototype,t),r&&xt(e,r),e}function Tt(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lt=Object(_.b)("labels","rootStore")(at=function(e){function r(e){var t;return Ct(this,r),(t=Tt(this,Nt(r).call(this,e))).handleChange=function(e){t.setState({reportName:e.target.value})},t.isDisabled=function(){return!t.props.rootStore.pinData||!t.state.reportName},t.handleClick=function(){t.setState({sending:!0}),$.ajax({type:"POST",url:t.props.labels.pin.createUrl,data:function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=o,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return o}({name:t.state.reportName},t.props.rootStore.pinData),success:function(){t.setState({sending:!1,sent:!0})},error:function(){}})},t.state={reportName:"",sending:!1,sent:!1},t}return Dt(r,x.a.Component),qt(r,[{key:"render",value:function(){return x.a.createElement(x.a.Fragment,null,this.state.sent?x.a.createElement("div",{className:"form-group"},x.a.createElement("p",null,x.a.createElement("span",null,this.props.labels.pin.successMsg)),x.a.createElement("p",null,x.a.createElement("a",{href:this.props.rootStore.programPageUrl},this.props.labels.pin.successLink))):x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"form-group"},x.a.createElement("label",{className:"text-uppercase"},this.props.labels.pin.reportName),x.a.createElement("input",{type:"text",className:"form-control",value:this.state.reportName,onChange:this.handleChange,disabled:this.state.sending})),this.state.sending?x.a.createElement("div",{className:"btn btn-outline-primary",disabled:!0},x.a.createElement("img",{src:"/static/img/ajax-loader.gif"})," ",this.props.labels.loading):x.a.createElement("button",{type:"button",onClick:this.handleClick,disabled:this.isDisabled(),className:"btn btn-primary"},this.props.labels.pin.submitButton)))}}]),r}())||at,At=Object(_.b)("labels")(lt=function(e){function r(e){var t;return Ct(this,r),(t=Tt(this,Nt(r).call(this,e))).state={open:!1},t}return Dt(r,x.a.Component),qt(r,[{key:"handleClick",value:function(e){this.setState({open:!this.state.open})}},{key:"handleClose",value:function(e){this.setState({open:!1})}},{key:"render",value:function(){return x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"btn btn-sm btn-secondary",ref:"target",onClick:this.handleClick.bind(this)},x.a.createElement("i",{className:"fas fa-thumbtack"})," ",this.props.labels.pin.buttonLabel),x.a.createElement(kt.a,{placement:"bottom",style:{width:"auto"},target:this.refs.target,show:this.state.open,onHide:this.handleClose.bind(this)},x.a.createElement(Lt,null)))}}]),r}())||lt,Rt=Object(_.b)("labels","rootStore")(st=Object(_.c)(st=function(e){function i(){var e,t;Ct(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Tt(this,(e=Nt(i)).call.apply(e,[this].concat(n)))).getCurrent=function(){t.props.rootStore.currentExcelURL&&(window.location=t.props.rootStore.currentExcelURL)},t.getAll=function(){t.props.rootStore.allExcelURL&&(window.location=t.props.rootStore.allExcelURL)},t}return Dt(i,x.a.Component),qt(i,[{key:"render",value:function(){return x.a.createElement("div",{className:"container-fluid"},x.a.createElement("div",{className:"row mt-1 mb-2"},x.a.createElement("div",{className:"btn btn-primary btn-block",onClick:this.getCurrent},this.props.labels.excel.buttonCurrent)),x.a.createElement("div",{className:"row mt-2 mb-1"},x.a.createElement("div",{className:"btn btn-primary btn-block",onClick:this.getAll},this.props.labels.excel.buttonAll)))}}]),i}())||st)||st,Ut=Object(_.b)("labels","rootStore")(ct=Object(_.c)(ct=function(e){function r(e){var t;return Ct(this,r),(t=Tt(this,Nt(r).call(this,e))).handleClick=function(){t.props.rootStore.isTVA?t.setState({open:!t.state.open}):t.props.rootStore.currentExcelURL&&(window.location=t.props.rootStore.currentExcelURL)},t.state={open:!1},t}return Dt(r,x.a.Component),qt(r,[{key:"handleClose",value:function(e){this.setState({open:!1})}},{key:"render",value:function(){return x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"btn btn-sm btn-secondary",ref:"target",onClick:this.handleClick.bind(this)},x.a.createElement("i",{className:"fas fa-download"})," ",this.props.labels.excel.buttonMain),x.a.createElement(kt.a,{placement:"bottom",containerStyle:{paddingRight:"10px"},style:{width:"auto"},target:this.refs.target,show:this.state.open,onHide:this.handleClose.bind(this)},x.a.createElement(Rt,null)))}}]),r}())||ct)||ct,zt=Object(_.b)("labels","rootStore")(function(e){var t=e.labels,r=e.rootStore;return x.a.createElement("div",{className:"btn btn-primary btn-block",onClick:r.clearFilters},t.resetButton)});function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gt(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jt=Object(_.b)("labels","rootStore")(Object(_.c)(function(e){var t=e.labels,r=e.rootStore;return x.a.createElement("div",{className:"page-subheader"},x.a.createElement("div",{id:"id_span_iptt_date_range",className:"subheader__title"},x.a.createElement("h2",{className:"pt-3 text-title-case"},t.reportTitle),x.a.createElement("h4",{className:"pb-3"},r.startPeriodLabel&&r.endPeriodLabel?r.startPeriodLabel+" - "+r.endPeriodLabel:"")),x.a.createElement("div",{className:"subheader__actions"},x.a.createElement(At,null),x.a.createElement(Ut,null)))})),Bt=Object(_.b)("labels")(function(e){var t=e.labels;return x.a.createElement("div",{className:"sidebar_wrapper"},x.a.createElement("div",{className:"collapse width show",id:"sidebar"},x.a.createElement(wt,null),x.a.createElement("div",{id:"filter-bottom",className:"d-flex justify-content-between no-gutters p-3"},x.a.createElement(zt,null))),x.a.createElement("div",{className:"sidebar-toggle"},x.a.createElement("a",{href:"#","data-target":"#sidebar","data-toggle":"collapse",title:t.sidebarToggle},x.a.createElement("i",{className:"fa fa-chevron-left"}))))}),Xt=function(){return x.a.createElement("main",{className:"iptt_table_wrapper"},x.a.createElement("div",{id:"id_div_top_iptt_report"},x.a.createElement(Jt,null),x.a.createElement(Ue,null)))},Yt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gt(this,Wt(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,x.a.Component),r=t,(n=[{key:"render",value:function(){return x.a.createElement(x.a.Fragment,null,x.a.createElement(Bt,null),x.a.createElement(Xt,null))}}])&&Vt(r.prototype,n),o&&Vt(r,o),t}(),$t=jsContext.labels,Kt=new X("/indicators/iptt_report_data/"),Qt=new ee(jsContext,Kt),Zt=Object(N.b)([{name:"iptt",path:"/:programId<\\d+>/:reportType/?frequency&timeperiods&targetperiods&timeframe&numrecenteperiods&start&end&start_period&end_period&levels&sites&types&sectors&indicators&tiers"}]);Zt.usePlugin(Object(D.a)({useHash:!1,base:"/indicators/iptt_report"})),Zt.subscribe(Qt.updateRoute),Zt.start(),Qt.init(Zt),T.a.render(x.a.createElement(_.a,{rootStore:Qt,labels:$t},x.a.createElement(Yt,null)),document.querySelector("#id_div_content"))}},[["mYfJ",0,1]]]);