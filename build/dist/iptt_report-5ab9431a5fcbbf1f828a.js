(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4L+s":function(e,t,r){"use strict";r.d(t,"b",function(){return h}),r.d(t,"a",function(){return y});var n=r("q1tI"),a=r.n(n),i=r("i8i4"),l=r.n(i);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function r(e){var t;return s(this,r),(t=u(this,p(r).call(this,e))).content=e.content,t.placement=e.placement||null,t}var t,n,i;return f(r,a.a.Component),t=r,(n=[{key:"render",value:function(){return a.a.createElement("a",{tabIndex:"0","data-toggle":"popover","data-trigger":"focus","data-html":"true","data-placement":this.placement,"data-content":this.content},a.a.createElement("i",{className:"far fa-question-circle"}))}}])&&c(t.prototype,n),i&&c(t,i),r}(),y=function(e){function o(){var e,r;s(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(r=u(this,(e=p(o)).call.apply(e,[this].concat(n)))).popoverName="base",r.componentDidMount=function(){r.bodyClickHandler=function(e){0==$("#".concat(r.popoverName,"_popover_content")).parent().find($(e.target)).length&&$(r.refs.target).popover("hide")};var t=function(){$("body").on("click",r.bodyClickHandler),$(r.refs.target).popover("update").on("hide.bs.popover",function(){$("body").off("click",r.bodyClickHandler)})};$(r.refs.target).popover({content:'<div id="'.concat(r.popoverName,'_popover_content"></div>'),html:!0,placement:"bottom"}).on("shown.bs.popover",function(e){l.a.render(r.getPopoverContent(),document.querySelector("#".concat(r.popoverName,"_popover_content")),t)})},r.getPopoverContent=function(){throw new Error("not implemented")},r}return f(o,a.a.Component),o}()},Ez0T:function(e,t,r){"use strict";var n=r("q1tI"),o=r.n(n),a=r("y2Vs"),i=r("VCnP"),l=r.n(i),s=0;function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"id";return s++,"".concat(e).concat(s)}var u=r("v38i");function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){h(t,e,r[e])})}return t}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"d",function(){return y}),r.d(t,"a",function(){return m}),r.d(t,"c",function(){return v}),r.d(t,"b",function(){return O});var y=function(e){var t=c("react-select"),r=e.labelClasses||"col-form-label text-uppercase",n=e.formRowClasses||"form-row mb-3",i=e.selectClasses||"tola-react-select";return o.a.createElement("div",{className:n},o.a.createElement("label",{htmlFor:t,className:r},e.label),o.a.createElement(a.default,{onChange:e.update,value:e.value,id:t,className:i,isDisabled:e.disabled,options:e.options}))},m=function(e){var t=c("date-select"),r=e.options&&1==e.options.length&&void 0!==e.options[0].value?o.a.createElement("option",{value:e.options[0].value},e.options[0].label):e.options&&0<e.options.length&&e.options[0].options&&void 0!==e.options[0].options?e.options.map(function(e,t){return o.a.createElement("optgroup",{label:e.label,key:t},e.options.map(function(e){return o.a.createElement("option",{value:e.value,key:e.value},e.label)}))}):e.options.map(function(e,t){return o.a.createElement("option",{value:e.value,key:t},e.label)});return o.a.createElement("div",{className:"form-row mb-3"},o.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),o.a.createElement("select",{className:"form-control",id:t,value:e.value,onChange:e.update,disabled:e.disabled},r))},g=function(e){var t=c("react-select"),r=e.formGroupClass||"form-row mb-3",n=e.labelClass||"col-form-label text-uppercase",i=e.selectClass||"form-control";return o.a.createElement("div",{className:r},o.a.createElement("label",{htmlFor:t,className:n},e.label),o.a.createElement("select",{onChange:e.update,value:e.value,id:t,className:i,disabled:e.disabled},e.options))},b=function(e){return""==e.children?o.a.createElement("div",null):o.a.createElement(o.a.Fragment,null,o.a.createElement("hr",{style:{margin:"3px 0px 0px 0px"}}),o.a.createElement("div",{className:"text-muted",style:{textTransform:"uppercase",paddingLeft:"4px",marginBottom:"2px"}},e.children))},v=function(t){var e=c("multiselect"),r=t.options&&0!=t.options.length?{isMulti:!0,options:t.options,getDropdownButtonLabel:function(e){return e.value?Array.isArray(e.value)?0==e.value.length?gettext("None selected"):1==e.value.length?e.value[0].label:"".concat(e.value.length,"  ").concat(gettext("selected")):e.value.label:gettext("None selected")}}:{getDropdownButtonLabel:function(){return gettext("None available")},isDisabled:!0,menuIsOpen:!1,options:[]},n={dropdownButton:function(e){return t.options&&0!=t.options.length?e:d({},e,{backgroundColor:"#E5E6E8",background:""})},option:function(e,t){return d({},e,{padding:"1px 12px",display:"inline-block"})},container:function(e,t){return d({},e,{backgroundColor:"#f5f5f5"})}};return o.a.createElement("div",{className:"form-row mb-2 tola-react-multiselect-row"},o.a.createElement("label",{htmlFor:e,className:"col-form-label text-uppercase"},t.label),o.a.createElement(l.a,f({id:e,styles:n,formatOptionLabel:function(e){return o.a.createElement("div",{style:{display:"inline-block",float:"right",width:"90%"}},e.label)},components:{GroupHeading:b},value:t.value,onChange:t.update},r)))},O=function(e){var t=e.chainLabel,r=p(e,["chainLabel"]),n=[o.a.createElement("option",{value:u.c,key:1},t),o.a.createElement("option",{value:u.d,key:2},gettext("by Level"))];return o.a.createElement(g,f({label:gettext("Group indicators"),options:n},r))}},"WtQ/":function(e,t,r){"use strict";function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(5==t)return e;var r=[];return e.forEach(function(e){Array.isArray(e)?r=r.concat(n(e,t+1)):r.push(e)}),r}function i(e){if(!Array.isArray(e))return!(!(e=parseInt(e))||isNaN(e))&&[e];var t=e.map(function(e){return parseInt(e)}).filter(function(e){return!isNaN(e)});return!!(t&&Array.isArray(t)&&0<t.length)&&t}function o(){$(function(){var e=0===window.performance.getEntriesByType("navigation")[0].transferSize,t="reload"===window.performance.getEntriesByType("navigation")[0].type;e&&!t&&window.location.reload()})}r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"d",function(){return o}),r.d(t,"c",function(){return a});var a=function(s,c){return function(e,t){var r=s(e),n=s(t);if(r&&!n)return 1;if(n&&!r)return-1;if(r!=n)return parseInt(r)-parseInt(n);for(var i=(c(e)||"").split("."),o=(c(t)||"").split("."),a=0;a<Math.max(i.length,o.length);a++)if(i[a]&&o[a])for(var l=0;l<Math.max(i[a].length,o[a].length);l++)if(i[a][l]&&o[a][l]){if(i[a].charCodeAt(l)!=o[a].charCodeAt(l))return i[a].charCodeAt(l)-o[a].charCodeAt(l)}else{if(i[a][l])return 1;if(o[a][l])return-1}else{if(i[a])return 1;if(o[a])return-1}return 0}}},mYfJ:function(e,t,r){"use strict";r.r(t);var n,i=r("q1tI"),s=r.n(i),o=r("i8i4"),a=r.n(o),l=r("okNM"),c=r("wgi2"),u=r("0pHI"),p=r("2vnA"),V=r("v38i");function f(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){y(t,e,r[e])})}return t}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}var b=(g((n=function(){function r(e,t){var M=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.filterStore=null,this.init=function(){M.router=Object(c.b)(M.routes,{trailingSlashMode:"always"}),M.router.setRootPath(M.queryParams),M.router.usePlugin(Object(u.a)({useHash:!1,base:"/indicators"})),M.router.start();var e=M.router.getState(),t=e.name,r=e.params;M.processParams(h({name:t},r)).then(function(){M.router.buildPath(t,r)!=M.router.buildPath(M.routeName,M.routeParams)&&M.router.navigate(M.routeName,M.routeParams,{replace:!0});Object(p.o)(function(){return[M.routeName,M.routeParams]},function(e){var t=d(e,2),r=t[0],n=t[1];return M.router.navigate(r,n)})})},this.processParams=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=void 0===t?null:t,n=e.programId,i=void 0===n?null:n,o=e.frequency,a=void 0===o?null:o,l=e.start,s=void 0===l?null:l,c=e.end,u=void 0===c?null:c,p=e.mr,f=void 0===p?null:p,d=e.timeperiods,h=void 0===d?null:d,y=e.targetperiods,m=void 0===y?null:y,g=e.timeframe,b=void 0===g?null:g,v=e.numrecentcount,O=void 0===v?null:v,P=e.numrecentperiods,_=void 0===P?null:P,w=e.start_period,k=void 0===w?null:w,S=e.end_period,E=void 0===S?null:S,I=e.groupby,j=void 0===I?null:I,D=e.levels,T=void 0===D?null:D,x=e.tiers,N=void 0===x?null:x,C=e.sites,A=void 0===C?null:C,L=e.sectors,R=void 0===L?null:L,q=e.types,F=void 0===q?null:q,z=e.indicators,U=void 0===z?null:z;if(null===M.filterStore)throw"data not loaded";return M.filterStore.reportType="iptt.tva"==r?V.h:"iptt.timeperiods"==r?V.f:null,M.filterStore.programId=parseInt(i),null!==a?M.filterStore.frequencyId=parseInt(a):M.reportType===V.h&&null!==m?M.filterStore.frequencyId=parseInt(m):M.reportType===V.f&&null!==h&&(M.filterStore.frequencyId=parseInt(h)),null!==s?M.filterStore.startPeriod=parseInt(s):null===k||isNaN(Date.parse(k))||M.filterStore.setStartPeriodFromDate(new Date(k)),null!==u?M.filterStore.endPeriod=parseInt(u):null===E||isNaN(Date.parse(E))||M.filterStore.setEndPeriodFromDate(new Date(E)),null!==f&&(M.filterStore._latchMostRecent=!0),null!==b&&1==parseInt(b)?M.filterStore.showAll=!0:null!==b&&2==parseInt(b)&&(M.filterStore.mostRecent=parseInt(_)||parseInt(O)||2),null===j||parseInt(j)!==V.c&&parseInt(j)!==V.d||(M.filterStore.groupBy=parseInt(j)),M.filterStore.getLoadedProgram().then(function(){return null!==T&&(N=null,M.filterStore.levels=M.parseArrayParams(T)),null!==N&&(M.filterStore.tiers=M.parseArrayParams(N)),null!==F&&(M.filterStore.types=M.parseArrayParams(F)),null!==A&&(M.filterStore.sites=M.parseArrayParams(A)),null!==R&&(M.filterStore.sectors=M.parseArrayParams(R)),null!==U&&(M.filterStore.indicators=M.parseArrayParams(U)),!0},function(){return!1})},this.parseArrayParams=function(e){return"string"==typeof e||e instanceof String?[parseInt(e)]:Array.isArray(e)?e.map(function(e){return parseInt(e)}):Number.isInteger(e)?e:isNaN(parseInt(e))?null:[parseInt(e)]},this.parseToArrayParams=function(e){return Array.isArray(e)?e.map(M.parseToArrayParams):"string"==typeof e||e instanceof String?e:String(e)},t&&t.pin_url&&(this.pinUrl=t.pin_url),this.routes=[{name:"iptt",path:"/iptt_report/:programId<\\d+>",children:[{name:"timeperiods",path:"/timeperiods?timeperiods"},{name:"tva",path:"/targetperiods?targetperiods"}]},{name:"ipttAPI",path:"/iptt_api?reportType&programId",children:[{name:"ipttData",path:"/iptt_report_data/"},{name:"ipttExcel",path:"/iptt_excel/?fullTVA"}]}],this.goodQueryParams=["frequency","start","end","levels","types","sites","sectors","indicators","tiers","groupby","mr"],this.oldQueryParams=["timeframe","numrecentperiods","numrecentcount","start_period","end_period"],this.queryParams="?"+this.goodQueryParams.concat(this.oldQueryParams).join("&"),this.filterStore=e}var e,t,n;return e=r,(t=[{key:"reportType",get:function(){return this.filterStore.reportType}},{key:"routeName",get:function(){return this.reportType===V.h?"iptt.tva":this.reportType===V.f?"iptt.timeperiods":"iptt"}},{key:"routeParams",get:function(){var t=this,r={};return["programId","levels","tiers","sectors","sites","types","indicators"].forEach(function(e){null!==t.filterStore[e]&&(r[e]=t.parseToArrayParams(t.filterStore[e]))}),null!==this.filterStore.frequencyId&&(r.frequency=String(this.filterStore.frequencyId)),null!==this.filterStore.startPeriod&&(r.start=String(this.filterStore.startPeriod)),null!==this.filterStore.endPeriod&&(r.end=String(this.filterStore.endPeriod)),null!==this.filterStore.groupBy&&(r.groupby=String(this.filterStore.groupBy)),r}},{key:"pinData",get:function(){var e=this.routeParams,t=e.programId,r=f(e,["programId"]),n=this.reportType===V.h?"targetperiods":this.reportType===V.f?"timeperiods":null,i=[];return Object.keys(r).forEach(function(t){r[t]&&(Array.isArray(r[t])?1==r[t].length?i.push([t,r[t][0]]):r[t].forEach(function(e){i.push([t,e])}):i.push([t,r[t]]))}),this.filterStore._latchMostRecent&&this.filterStore._internalShowAll&&i.push(["mr",1]),{program:t,report_type:n,query_string:i.map(function(e){var t=d(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)}).join("&")}}},{key:"dataUrl",get:function(){return this.router.buildUrl("ipttAPI.ipttData",this.routeParams)}},{key:"excelUrl",get:function(){return!!this.filterStore.frequencyId&&this.router.buildUrl("ipttAPI.ipttExcel",h({},this.routeParams,{reportType:this.reportType,fullTVA:!1}))}},{key:"fullExcelUrl",get:function(){return!(!this.filterStore.isTVA||!this.filterStore.programId)&&this.router.buildUrl("ipttAPI.ipttExcel",{programId:this.filterStore.programId,fullTVA:!0,groupby:this.filterStore.groupBy})}}])&&m(e.prototype,t),n&&m(e,n),r}()).prototype,"reportType",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"reportType"),n.prototype),g(n.prototype,"routeName",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"routeName"),n.prototype),g(n.prototype,"routeParams",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"routeParams"),n.prototype),g(n.prototype,"pinData",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"pinData"),n.prototype),g(n.prototype,"dataUrl",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"dataUrl"),n.prototype),g(n.prototype,"excelUrl",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"excelUrl"),n.prototype),g(n.prototype,"fullExcelUrl",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"fullExcelUrl"),n.prototype),n);function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var O,P,_,w,k,S,E,I,j,D,T,x,N,C,A,L,R,q,F,z,U,M,B,W,Y,Q,H,G,J=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e}var e,r,n;return e=t,(r=[{key:"callForReportData",value:function(e,t,r){var n={programId:t,frequency:r,reportType:e};return $.get(this.url,n)}},{key:"callForIndicatorData",value:function(e,t,r,n){var i={programId:t,reportType:e,frequency:r,indicatorId:n,updateIndicator:"1"};return $.get(this.url,i)}}])&&v(e.prototype,r),n&&v(e,n),t}();function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function X(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t,r){return t&&le(e.prototype,t),r&&le(e,r),e}var ce,ue,pe,fe,de,he,ye,me,ge,be,ve,Oe,Pe,_e,we,ke,Se,Ee="undefined"!=typeof gettext?gettext:function(e){return e},Ie=function(){function n(e,t){var r;ae(this,n),this.program=null,this.pk=null,this.levelpk=null,this.number=null,this.name=null,this.unitOfMeasure=null,this.directionOfChange=null,this.is_cumulative=null,this.unitType=null,this.baseline=null,this.baseline_na=null,this.typePks=[],this.sitePks=[],this.sectorPk=null,this.lopTarget=null,this.lopActual=null,this.lopMet=null,this.frequency=null,this.sortIndex=null,this.reportData=(oe(r={},V.f,{}),oe(r,V.h,{}),r),this.pk=parseInt(e.pk),this.number=e.number,this.old_number=e.old_number,this.name=e.name,this.unitOfMeasure=e.unitOfMeasure,this.directionOfChange=e.directionOfChange,this.is_cumulative=e.is_cumulative,this.unitType=e.unitType,this.baseline=e.baseline,this.baseline_na=null===this.baseline||e.baseline_na,this.typePks=e.indicatorTypes.map(function(e){return parseInt(e.pk)}),this.sitePks=e.sites.map(function(e){return parseInt(e.pk)}),this.sectorPk=e.sector&&e.sector.pk&&parseInt(e.sector.pk),this.lopTarget=parseFloat(e.lopTarget),this.lopActual=parseFloat(e.lopActual),this.lopMet=e.lopMet&&!isNaN(parseFloat(e.lopMet))?100*parseFloat(e.lopMet):null,this.frequency=parseInt(e.frequency),this.loadReportData(e.reportData),this.sortIndex=parseInt(e.sortIndex),this.levelpk=parseInt(e.levelpk)||null,this.program=t}return se(n,[{key:"loadReportData",value:function(t){var r=this;t.timeperiods&&Object.keys(t.timeperiods).forEach(function(e){r.reportData[V.f][e]=t.timeperiods[e].map(function(e){return parseFloat(e)})}),t.tva&&Object.keys(t.tva).forEach(function(e){r.reportData[V.h][e]=t.tva[e].map(function(e){return{target:parseFloat(e.target),actual:parseFloat(e.value),met:e.target&&!isNaN(parseFloat(e.target))&&e.value&&!isNaN(parseFloat(e.value))&&0!=parseFloat(e.target)?parseFloat(e.value)/parseFloat(e.target)*100:null}})})}},{key:"level",get:function(){return this.program.getLevel(this.levelpk)}},{key:"levelName",get:function(){return this.level?this.level.old?this.level.displayName:this.level.name:null}},{key:"cumulative",get:function(){return this.is_cumulative}}]),n}(),je=(ie((O=function(){function r(e,t){ae(this,r),this.program=null,this.pk=null,this.name=null,this.displayName=null,this._sort=null,this.program=t,this.pk=parseInt(e.pk),this.name=e.name,this.displayName=e.display_name,this._sort=parseInt(e.sort)}return se(r,[{key:"indicators",get:function(){var t=this;return this.program.indicators.filter(function(e){return e.levelpk==t.pk})}}]),r}()).prototype,"indicators",[p.f],Object.getOwnPropertyDescriptor(O.prototype,"indicators"),O.prototype),O),De=(ie((P=function(e){function o(){var e,t;ae(this,o);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=ee(this,(e=te(o)).call.apply(e,[this].concat(n)))).old=!0,t}return re(o,je),se(o,[{key:"sort",get:function(){return this._sort}}]),o}()).prototype,"sort",[p.f],Object.getOwnPropertyDescriptor(P.prototype,"sort"),P.prototype),P),Te=(ie((_=function(e){function n(e,t){var r;return ae(this,n),(r=ee(this,te(n).call(this,e,t))).old=!1,r.tierPk=null,r.ontology=null,r.sortOntology=null,r.depth=null,r._level2parent=null,r._parent=null,r.tierPk=parseInt(e.tierPk),r.ontology=e.ontology,r.sortOntology=e.sort_ontology,r.depth=parseInt(e.depth),r._level2parent=parseInt(e.level2parent),r._parent=parseInt(e.parent),r}return re(n,je),se(n,[{key:"tier",get:function(){return this.program.getTier(this.tierPk)}},{key:"outcomeChainDisplay",get:function(){var e=gettext("and sub-levels:");return"".concat(this.tier.name," ").concat(this.sortDisplay," ").concat(e,": ").concat(this.name)}},{key:"childLevels",get:function(){var t=this;return this.program.levels.filter(function(e){return e._parent==t.pk})}},{key:"sort",get:function(){return this.sortOntology||this._sort}},{key:"sortDisplay",get:function(){return this._sort}}]),n}()).prototype,"sort",[p.f],Object.getOwnPropertyDescriptor(_.prototype,"sort"),_.prototype),ie(_.prototype,"sortDisplay",[p.f],Object.getOwnPropertyDescriptor(_.prototype,"sortDisplay"),_.prototype),_),xe=(ie((w=function(){function r(e,t){ae(this,r),this.program=null,this.pk=null,this.name=null,this.depth=null,this.program=t,this.pk=parseInt(e.tierPk),this.name=e.tier,this.depth=parseInt(e.depth)}return se(r,[{key:"levels",get:function(){var t=this;return this.program.levels.filter(function(e){return e.tierPk==t.pk})}}]),r}()).prototype,"levels",[p.f],Object.getOwnPropertyDescriptor(w.prototype,"levels"),w.prototype),w),Ne=function(){function n(e,t,r){if(ae(this,n),this.index=null,this.start=null,this.end=null,this.current=null,this.name=null,this.display=null,this.range=null,this.index=t,this.start=new Date(e[5]),this.end=new Date(e[6]),this.startDisplay=e[0],this.endDisplay=e[1],V.g.includes(r))switch(this.current=7===r?4<e.length&&(!0===e[4]||"True"===e[4]):2<e.length&&(!0===e[2]||"True"===e[2]),r){case 3:this.name="".concat(Ee("Year")," ").concat(t+1),this.range="".concat(e[0]," - ").concat(e[1]),this.display="".concat(this.name," (").concat(this.range,")");break;case 4:this.name="".concat(Ee("Semi-annual period")," ").concat(t+1),this.range="".concat(e[0]," - ").concat(e[1]),this.display="".concat(this.name," (").concat(this.range,")");break;case 5:this.name="".concat(Ee("Tri-annual period")," ").concat(t+1),this.range="".concat(e[0]," - ").concat(e[1]),this.display="".concat(this.name," (").concat(this.range,")");break;case 6:this.name="".concat(Ee("Quarter")," ").concat(t+1),this.range="".concat(e[0]," - ").concat(e[1],")"),this.display="".concat(this.name," (").concat(this.range,")");break;case 7:this.name="".concat(e[2]," ").concat(e[3]),this.range=!1,this.display=this.name}2!==r&&8!==r||(this.name=e[2])}return se(n,[{key:"startAfter",value:function(e){return!(this.start.getUTCFullYear()<e.getUTCFullYear())&&(this.start.getUTCFullYear()>e.getUTCFullYear()||!(this.start.getUTCMonth()<e.getUTCMonth())&&(this.start.getUTCMonth()>e.getUTCMonth()||!(this.start.getUTCDate()<e.getUTCDate())))}},{key:"endBefore",value:function(e){return!(this.end.getUTCFullYear()>e.getUTCFullYear())&&(this.end.getUTCFullYear()<e.getUTCFullYear()||!(this.end.getUTCMonth()>e.getUTCMonth())&&(this.end.getUTCMonth()<e.getUTCMonth()||!(this.end.getUTCDate()>e.getUTCDate())))}},{key:"year",get:function(){return this.start.getUTCFullYear()}}]),n}(),Ce=function(){function r(e,t){var p=this;ae(this,r),this.frequency=null,this.periods=[],this.getPeriod=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.startAfter,r=void 0===t?null:t,n=e.endBefore,i=void 0===n?null:n,o=e.current,a=void 0===o?null:o,l=e.last,s=void 0===l?null:l,c=e.index,u=void 0===c?null:c;return null!==r?p.startAfter(r)[0]:null!==i?p.endBefore(i).slice(-1)[0]:null!==a?p.currentPeriods.slice(-1)[0]:null!==s?p.periods.slice(-1)[0]:null!==u?p.periods[u]:void 0},this.frequency=parseInt(e),this.periods=t.map(function(e,t){return new Ne(e,t,p.frequency)})}return se(r,[{key:"periodRange",value:function(e,t){return this.periods.slice(e,t+1)}},{key:"startAfter",value:function(t){return this.periods.filter(function(e){return e.startAfter(t)})}},{key:"endBefore",value:function(t){return this.periods.filter(function(e){return e.endBefore(t)})}},{key:"filter",value:function(e){return this.periods.filter(e)}},{key:"currentPeriods",get:function(){return this.periods.filter(function(e){return!e.current})}}]),r}(),Ae=(S=ie((k=function(){function t(e){var i=this;ae(this,t),X(this,"pk",S,this),X(this,"name",E,this),X(this,"reportingStart",I,this),X(this,"reportingEnd",j,this),X(this,"frequencies",D,this),X(this,"validTVA",T,this),X(this,"validTIMEPERIODS",x,this),X(this,"periods",N,this),X(this,"oldLevels",C,this),X(this,"_resultChainFilterLabel",A,this),X(this,"_shortResultChainLabel",L,this),X(this,"initialized",R,this),X(this,"calls",q,this),X(this,"_levels",F,this),X(this,"_tiers",z,this),X(this,"_sites",U,this),X(this,"_sectors",M,this),X(this,"_types",B,this),X(this,"_indicators",W,this),this.getIndicator=function(e){return i._indicators[e]&&void 0!==i._indicators[e]?i._indicators[e]:{}},this.updateProgramData=function(e){i.addLevels(e.levels),e.indicators&&Array.isArray(e.indicators)&&e.indicators.forEach(function(e){parseInt(e.pk);if(e.sector&&e.sector.pk){var t=parseInt(e.sector.pk);void 0===i._sectors[t]&&(i._sectors[t]={pk:t,name:e.sector.name||""})}e.sites&&Array.isArray(e.sites)&&e.sites.forEach(function(e){var t=parseInt(e.pk);void 0===i._sites[t]&&(i._sites[t]={pk:t,name:e.name})}),e.indicatorTypes&&Array.isArray(e.indicatorTypes)&&e.indicatorTypes.forEach(function(e){var t=parseInt(e.pk);void 0===i._types[t]&&(i._types[t]={pk:t,name:e.name})})})},this.loadReportData=function(e){i.updateProgramData(e),e.indicators&&Array.isArray(e.indicators)&&e.indicators.forEach(function(e){var t=parseInt(e.pk);i._indicators[t]&&i._indicators[t].pk===t?i._indicators[t].loadReportData(e.reportData):i._indicators[t]=new Ie(e,i)}),i.initialized[parseInt(e.reportType)].push(parseInt(e.reportFrequency)),i.calls[parseInt(e.reportType)][parseInt(e.reportFrequency)]=!1},this.loadIndicatorData=function(e){if(i.updateProgramData(e),e.indicator){var t=parseInt(e.indicator.pk);return i._indicators[t]&&delete i._indicators[t],i._indicators[t]=new Ie(e.indicator,i),Promise.resolve(t)}return Promise.reject(V.e.NO_INDICATOR_IN_UPDATE)},this.validFrequency=function(e){return i.frequencies.includes(e)},this.periodsFor=function(e){return i.periods[parseInt(e)]},this.currentPeriod=function(e){return i.periodsFor(e).getPeriod({current:!0})},this.lastPeriod=function(e){return i.periodsFor(e).getPeriod({last:!0})},this.isLoaded=function(e,t){return i.initialized[e].includes(t)},this.isLoading=function(e,t){var r=i.calls[e][t];return void 0!==r&&!1!==r&&r},this.setLoading=function(e,t,r){i.calls[e][t]=r},this.addLevels=function(e){i.oldLevels?e.forEach(function(e){var t=parseInt(e.pk);isNaN(t)||(i._levels[t]=new De(e,i))}):e.forEach(function(e){var t=parseInt(e.pk);if(!isNaN(t)){i._levels[t]=new Te(e,i);var r=parseInt(e.tierPk);isNaN(r)||i._tiers[r]||(i._tiers[r]=new xe(e,i))}})},this.getLevel=function(e){return e=parseInt(e),void 0!==i._levels[e]?i._levels[e]:null},this.getTier=function(e){return e=parseInt(e),void 0!==i._tiers[e]?i._tiers[e]:null},this.validLevel=function(e){return void 0!==i._levels[e]},this.validTier=function(e){return!i.oldLevels&&void 0!==i._tiers[e]},this.validType=function(e){return void 0!==i._types[e]},this.validSite=function(e){return void 0!==i._sites[e]},this.validSector=function(e){return void 0!==i._sectors[e]},this.validIndicator=function(e){return void 0!==i._indicators[e]},this.pk=parseInt(e.id),this.name=e.name,this.frequencies=e.frequencies.map(Number),this.reportingStart=e.reporting_period_start,this.reportingEnd=e.reporting_period_end,this.validTVA=0<this.frequencies.length,this.validTIMEPERIODS=!0,this.oldLevels=!0===e.old_style_levels||"True"===e.old_style_levels,this._resultChainFilterLabel=e.result_chain_filter_label,this._shortResultChainLabel=e.short_result_chain_label,Object.entries(e.periodDateRanges).forEach(function(e){var t=K(e,2),r=t[0],n=t[1];i.periods[parseInt(r)]=new Ce(r,n)})}return se(t,[{key:"levels",get:function(){return this._levels&&Object.values(this._levels)}},{key:"tiers",get:function(){return!this.oldLevels&&this._tiers&&Object.values(this._tiers).sort(function(e,t){return e.depth-t.depth})}},{key:"resultChainFilterLabel",get:function(){return this._resultChainFilterLabel||this.tiers&&1<this.tiers.length&&"by ".concat(this.tiers[1].name," chain")}},{key:"shortResultChainLabel",get:function(){return this._shortResultChainLabel||this.tiers&&1<this.tiers.length&&"".concat(this.tiers[1].name," chains")}},{key:"types",get:function(){return this._types&&Object.values(this._types)}},{key:"sectors",get:function(){return this._sectors&&Object.values(this._sectors)}},{key:"sites",get:function(){return this._sites&&Object.values(this._sites)}},{key:"indicators",get:function(){return this._indicators&&Object.values(this._indicators)}},{key:"unassignedIndicators",get:function(){return this.indicators.filter(function(e){return null===e.level})}},{key:"programPageUrl",get:function(){return"/program/".concat(this.pk,"/")}}]),t}()).prototype,"pk",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=ie(k.prototype,"name",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=ie(k.prototype,"reportingStart",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=ie(k.prototype,"reportingEnd",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=ie(k.prototype,"frequencies",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=ie(k.prototype,"validTVA",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=ie(k.prototype,"validTIMEPERIODS",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=ie(k.prototype,"periods",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),C=ie(k.prototype,"oldLevels",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=ie(k.prototype,"_resultChainFilterLabel",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=ie(k.prototype,"_shortResultChainLabel",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=ie(k.prototype,"initialized",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return oe(e={},V.h,[]),oe(e,V.f,[]),e}}),q=ie(k.prototype,"calls",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return oe(e={},V.h,{}),oe(e,V.f,{}),e}}),F=ie(k.prototype,"_levels",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z=ie(k.prototype,"_tiers",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),U=ie(k.prototype,"_sites",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),M=ie(k.prototype,"_sectors",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),B=ie(k.prototype,"_types",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),W=ie(k.prototype,"_indicators",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ie(k.prototype,"levels",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"levels"),k.prototype),ie(k.prototype,"tiers",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"tiers"),k.prototype),ie(k.prototype,"resultChainFilterLabel",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"resultChainFilterLabel"),k.prototype),ie(k.prototype,"shortResultChainLabel",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"shortResultChainLabel"),k.prototype),ie(k.prototype,"types",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"types"),k.prototype),ie(k.prototype,"sectors",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"sectors"),k.prototype),ie(k.prototype,"sites",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"sites"),k.prototype),ie(k.prototype,"indicators",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"indicators"),k.prototype),ie(k.prototype,"unassignedIndicators",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"unassignedIndicators"),k.prototype),ie(k.prototype,"programPageUrl",[p.f],Object.getOwnPropertyDescriptor(k.prototype,"programPageUrl"),k.prototype),k),Le=(Q=ie((Y=function(){function r(e,t){var o=this;ae(this,r),X(this,"_programs",Q,this),this.api=null,this.addPrograms=function(e){e.forEach(function(e){o.addProgram(e)})},this.addProgram=function(e){o._programs[e.id]=new Ae(e)},this.validProgramId=function(t){return function(e){return o.programs.filter(t===V.h?function(e){return e.validTVA}:function(e){return e.validTIMEPERIODS}).map(function(e){return e.pk}).includes(e)}},this.getPrograms=function(e){return o.programs.filter(e===V.h?function(e){return e.validTVA}:function(e){return e.validTIMEPERIODS})},this.getProgram=function(e){return o._programs[e]},this.loadProgram=function(e,t,r){if(o.getProgram(t).isLoaded(e,r))return Promise.resolve(o.getProgram(t));if(!1!==o.getProgram(t).isLoading(e,r))return Promise.resolve(o.getProgram(t).isLoading(e,r));var n=o.getProgram(t).loadReportData,i=o.api.callForReportData(e,t,r).then(n);return o.getProgram(t).setLoading(e,r,i),i},this.getLoadedProgram=function(e,t,r){return o.loadProgram(e,t,r).then(function(){return o.getProgram(t)})},this.sortByName=function(e,t){return e.name>t.name?1:t.name<e.name?-1:0},X(this,"updateIndicator",H,this),X(this,"removeIndicator",G,this),this.api=t,this.addPrograms(e.programs),void 0!==e.reportData&&this.getProgram(parseInt(e.reportData.programId)).loadReportData(e.reportData)}return se(r,[{key:"programs",get:function(){return Object.values(this._programs).sort(this.sortByName)}}]),r}()).prototype,"_programs",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ie(Y.prototype,"programs",[p.f],Object.getOwnPropertyDescriptor(Y.prototype,"programs"),Y.prototype),H=ie(Y.prototype,"updateIndicator",[p.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var o=this;return function(e,t,r,n){var i=o.getProgram(t)||null;if(i)return o.api.callForIndicatorData(e,t,r,n).then(i.loadIndicatorData).then(function(e){},function(e){})}}}),G=ie(Y.prototype,"removeIndicator",[p.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var n=this;return function(e,t){var r=n.getProgram(e)||null;return!(!r||!r._indicators[t])&&(delete r._indicators[t],!0)}}}),Y),Re=r("WtQ/");function qe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ze(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}"undefined"!=typeof gettext&&gettext;var Ve,Be=Object(V.i)(),We=Be.targetperiodLabels,$e=Be.timeperiodLabels,Ye=(ue=Me((ce=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.programStore=null,ze(this,"_reportType",ue,this),ze(this,"_programId",pe,this),ze(this,"_frequencyId",fe,this),ze(this,"_startPeriod",de,this),ze(this,"_endPeriod",he,this),ze(this,"_groupBy",ye,this),ze(this,"_levels",me,this),ze(this,"_tiers",ge,this),ze(this,"_sites",be,this),ze(this,"_sectors",ve,this),ze(this,"_types",Oe,this),ze(this,"_indicators",Pe,this),ze(this,"_latchMostRecent",_e,this),this._oldShowAll=null,this._oldMostRecent=null,this._validFrequency=function(e){return!(!e||!t.program)&&(t.isTVA?t.program.validFrequency(e):V.g.includes(e))},ze(this,"clearFilters",we,this),ze(this,"indicatorUpdate",ke,this),ze(this,"indicatorDelete",Se,this),this.programStore=e;Object(p.o)(function(){return null!==t.frequencyId&&[t.reportType,t.programId,t.frequencyId]},function(e){t._reportParamsUpdated(e)})}var e,t,n;return e=r,(t=[{key:"getLoadedProgram",value:function(){return this.updateTransitionParams(),this.reportType&&this.program&&this.frequencyId?this.programStore.getLoadedProgram(this.reportType,this.programId,this.frequencyId):Promise.reject(!1)}},{key:"updateTransitionParams",value:function(){this._oldShowAll=this.showAll,this._oldMostRecent=this.mostRecent,this._latchMostRecent=!1}},{key:"clearTransitionParams",value:function(){this._oldShowAll=null,this._oldMostRecent=null}},{key:"_reportParamsUpdated",value:function(e){var r=this,t=Fe(e,3),n=t[0],i=t[1],o=t[2];this.programStore.loadProgram(n,i,o).then(function(){var e=r.oldShowAll,t=r.oldMostRecent;r.clearTransitionParams(),r.frequencyId=r.frequencyId||null,r._validFrequency(o)||(r.frequencyId=r.isTVA?r.program.frequencies[0]:V.g[0],r.showAll=!0),e?r.showAll=!0:!1!==t?r.mostRecent=t:(r.startPeriod=r.startPeriod||0,r.endPeriod=r.endPeriod||r.lastPeriod.index),r.reportType===V.h&&r.indicators&&0<r.indicators.length&&(r.indicators=[])})}},{key:"setStartPeriodFromDate",value:function(e){return this.periods&&(this.startPeriod=this.periods.getPeriod({startAfter:e}).index),null}},{key:"setEndPeriodFromDate",value:function(e){return this.periods&&(this.endPeriod=this.periods.getPeriod({endBefore:e}).index),null}},{key:"_getPeriodOptions",value:function(e){if(this.frequencyId&&V.g.includes(this.frequencyId)){if(3==this.frequencyId)return this.periods.filter(e).map(function(e){return{label:e.display,value:e.index}});var r=this.periods.filter(e);return Array.from(new Set(this.periods.filter(e).map(function(e){return e.year}))).filter(function(e){return!isNaN(e)}).sort().map(function(t){var e=r.filter(function(e){return e.year===t}).map(function(e){return{label:e.display,value:e.index}});return{label:t,options:e}})}return[V.a]}},{key:"filterIndicators",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.sort(function(e,t){return e.sortIndex-t.sortIndex});return this.groupByDisabled&&(n=n.sort(function(e,t){return e.levelpk&&t.levelpk?e.levelpk!=t.levelpk?e.levelpk<t.levelpk?-1:t.levelpk<e.levelpk?1:0:e.old_number&&t.old_number?e.old_number<t.old_number?-1:t.old_number<e.old_number?1:0:e.old_number?-1:t.old_numbeR?1:0:e.levelpk?-1:t.levelpk?1:0})),this.reportType===V.h&&(n=n.filter(function(e){return e.frequency==t.frequencyId})),"indicators"!==r&&this.indicators&&0<this.indicators.length&&(n=n.filter(function(e){return t.indicators.includes(e.pk)})),"types"!==r&&this.types&&0<this.types.length&&(n=n.filter(function(e){return 0<e.typePks.length&&0<e.typePks.filter(function(e){return t.types.includes(e)}).length})),"sites"!==r&&this.sites&&0<this.sites.length&&(n=n.filter(function(e){return 0<e.sitePks.length&&0<e.sitePks.filter(function(e){return t.sites.includes(e)}).length})),"sectors"!==r&&this.sectors&&0<this.sectors.length&&(n=n.filter(function(e){return e.sectorPk&&t.sectors.includes(e.sectorPk)})),"levels"!==r&&this.levels&&0<this.levels.length?n=this.groupByDisabled?n.filter(function(e){return e.level&&t.levels.includes(e.levelpk)}):n.filter(function(e){return e.level&&(t.levels.includes(e.level.pk)||t.levels.includes(e.level._level2parent))}):"levels"!==r&&this.tiers&&0<this.tiers.length&&(n=n.filter(function(e){return e.level&&e.level.tierPk&&t.tiers.includes(e.level.tierPk)})),n||[]}},{key:"filterLevels",value:function(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],r=!1;if(this.groupBy===V.d)r=this.program.levels.sort(function(e,t){return e.sort-t.sort}).sort(function(e,t){return e.depth-t.depth});else if(this.groupBy===V.c){var n=this.program.levels.filter(function(e){return!e._parent});r=this._findChildren(n,[])}return r?(t=e?new Set(this.filterIndicators(this.program.indicators,e).map(function(e){return e.levelpk})):new Set(this.filteredIndicators.map(function(e){return e.levelpk})),1!=(r=this.levels&&0<this.levels.length||this.tiers&&0<this.tiers.length||this.indicators&&0<this.indicators.length?r.filter(function(e){return t.has(e.pk)}):r.filter(function(e){return!e._parent||t.has(e.pk)})).length||t.has(r[0].pk)?r:[]):[]}},{key:"_findChildren",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]),e[r].childLevels&&0<e[r].childLevels.length&&(t=t.concat(this._findChildren(e[r].childLevels)));return t}},{key:"reportType",set:function(e){(e=parseInt(e))&&[V.h,V.f].includes(e)?this._reportType=e:this._reportType=null},get:function(){return this._reportType}},{key:"isTVA",get:function(){return this.reportType===V.h}},{key:"_validProgramId",get:function(){return this.programStore.validProgramId(this._reportType)}},{key:"programId",set:function(e){e=parseInt(e),this._validProgramId(e)&&(this.updateTransitionParams(),this._programId=e)},get:function(){return this._programId}},{key:"program",get:function(){return null!==this._programId?this.programStore.getProgram(this._programId):null}},{key:"frequencyDisabled",get:function(){return!(null!==this.program)}},{key:"frequencyId",set:function(e){e=parseInt(e),this._validFrequency(e)&&(this.updateTransitionParams(),this._frequencyId=e)},get:function(){return this._frequencyId?this._frequencyId:null}},{key:"programIsLoaded",get:function(){return!!this.frequencyId&&this.program.isLoaded(this.reportType,this.frequencyId)}},{key:"oldShowAll",get:function(){return this._oldShowAll}},{key:"oldMostRecent",get:function(){return this._oldMostRecent}},{key:"periodsDisabled",get:function(){return!V.g.includes(this.frequencyId)}},{key:"periods",get:function(){return this.frequencyId&&1!==this.frequencyId?this.program.periodsFor(this.frequencyId):null}},{key:"lastPeriod",get:function(){return this.frequencyId?this.program.lastPeriod(this.frequencyId):null}},{key:"currentPeriod",get:function(){return this.frequencyId?this.program.currentPeriod(this.frequencyId):null}},{key:"startPeriod",set:function(e){null!==this.lastPeriod&&(this._startPeriod=Math.max(0,Math.min(this.lastPeriod.index,e)),this._latchMostRecent=!1,this.endPeriod&&this._startPeriod>this.endPeriod&&(this.endPeriod=e))},get:function(){return!this.periodsDisabled&&null!==this.lastPeriod&&this._startPeriod<=this.lastPeriod.index?this._startPeriod:null}},{key:"endPeriod",set:function(e){null!==this.lastPeriod&&(this._endPeriod=Math.max(this.startPeriod||0,Math.min(this.lastPeriod.index,e)),this._latchMostRecent=!1)},get:function(){return!this.periodsDisabled&&null!==this.lastPeriod&&this._endPeriod<=this.lastPeriod.index?this._endPeriod:null}},{key:"showAll",set:function(e){!0===e&&this.lastPeriod&&(this.startPeriod=0,this.endPeriod=this.lastPeriod.index,this._latchMostRecent=!1)},get:function(){return!this._latchMostRecent&&this._internalShowAll}},{key:"_internalShowAll",get:function(){return 0===this.startPeriod&&this.lastPeriod&&this.endPeriod===this.lastPeriod.index}},{key:"mostRecent",set:function(e){this.currentPeriod&&(this.endPeriod=this.currentPeriod.index,this.startPeriod=Math.max(0,this.currentPeriod.index-(parseInt(e)||2)+1),this._latchMostRecent=this._internalShowAll)},get:function(){return!(this.showAll||!this.currentPeriod||this.endPeriod!==this.currentPeriod.index)&&this.currentPeriod.index-this.startPeriod+1}},{key:"_mostRecentValue",get:function(){return!(!this.currentPeriod||this.endPeriod!==this.currentPeriod.index)&&this.currentPeriod.index-this.startPeriod+1}},{key:"oldLevels",get:function(){return null!==this.program?this.program.oldLevels:null}},{key:"groupByDisabled",get:function(){return!1!==this.oldLevels}},{key:"groupBy",set:function(e){[V.c,V.d].includes(parseInt(e))&&(this._groupBy=parseInt(e))},get:function(){return this.groupByDisabled?null:this._groupBy||V.c}},{key:"resultChainFilterLabel",get:function(){return this.program.resultChainFilterLabel}},{key:"filtersDisabled",get:function(){return!this.programIsLoaded}},{key:"levels",set:function(e){!this.filtersDisabled&&Object(Re.a)(e)?(this._levels=Object(Re.a)(e),this._tiers=[]):this._levels=[]},get:function(){return!this.filtersDisabled&&this._levels&&0<this._levels.length?this._levels.filter(this.program.validLevel):[]}},{key:"tiers",set:function(e){this.filtersDisabled||this.groupByDisabled||!Object(Re.a)(e)?this._tiers=[]:(this._tiers=Object(Re.a)(e),this._levels=[])},get:function(){return!this.filtersDisabled&&this._tiers&&0<this._tiers.length&&!this.groupByDisabled?this._tiers.filter(this.program.validTier):[]}},{key:"sites",set:function(e){!this.filtersDisabled&&Object(Re.a)(e)?this._sites=Object(Re.a)(e):this._sites=[]},get:function(){return!this.filtersDisabled&&this._sites&&0<this._sites.length?this._sites.filter(this.program.validSite):[]}},{key:"types",set:function(e){!this.filtersDisabled&&Object(Re.a)(e)?this._types=Object(Re.a)(e):this._types=[]},get:function(){return!this.filtersDisabled&&this._types&&0<this._types.length?this._types.filter(this.program.validType):[]}},{key:"sectors",set:function(e){!this.filtersDisabled&&Object(Re.a)(e)?this._sectors=Object(Re.a)(e):this._sectors=[]},get:function(){return!this.filtersDisabled&&this._sectors&&0<this._sectors.length?this._sectors.filter(this.program.validSector):[]}},{key:"indicators",set:function(e){!this.filtersDisabled&&Object(Re.a)(e)?this._indicators=Object(Re.a)(e):this._indicators=[]},get:function(){return!this.filtersDisabled&&this._indicators&&0<this._indicators.length?this._indicators.filter(this.program.validIndicator):[]}},{key:"programOptions",get:function(){var e=this.reportType&&this.programStore.getPrograms(this.reportType);return e&&0<e.length?e.map(function(e){return{value:e.pk,label:e.name}}):[V.a]}},{key:"selectedProgramOption",get:function(){return this.program?{value:this.programId,label:this.program.name}:null}},{key:"frequencyOptions",get:function(){return this.program&&this.reportType===V.f?V.g.map(function(e){return{value:e,label:$e[e]}}):this.program&&this.reportType===V.h?this.program.frequencies.filter(function(e){return 8!==e}).map(function(e){return{value:e,label:We[e]}}):[V.a]}},{key:"selectedFrequencyOption",get:function(){return this.frequencyId?{value:this.frequencyId,label:this.isTVA?We[this.frequencyId]:$e[this.frequencyId]}:V.a}},{key:"startOptions",get:function(){return this._getPeriodOptions(function(){return!0})}},{key:"startPeriodLabel",get:function(){return null!==this.startPeriod?this.periods.getPeriod({index:this.startPeriod}).startDisplay:1===this.frequencyId||2===this.frequencyId?this.program.reportingStart:null}},{key:"endOptions",get:function(){var t=this;return this._getPeriodOptions(function(e){return e.index>=t.startPeriod})}},{key:"endPeriodLabel",get:function(){return null!==this.endPeriod?this.periods.getPeriod({index:this.endPeriod}).endDisplay:1===this.frequencyId||2===this.frequencyId?this.program.reportingEnd:null}},{key:"levelOptions",get:function(){if(!this.filtersDisabled&&this.groupByDisabled){var t=this.levels.concat(this.filterIndicators(this.program.indicators,"levels").map(function(e){return e.level?e.level.pk:null}));return this.program.levels.filter(function(e){return t.includes(e.pk)}).sort(function(e,t){return e.pk-t.pk}).map(function(e){return{value:e.pk,label:e.name,filterType:"level"}})}if(this.filtersDisabled)return null;var r=this.tiers.concat(this.filterIndicators(this.program.indicators,"levels").map(function(e){return e.level?e.level.tierPk:null})),e=this.program.tiers.filter(function(e){return r.includes(e.pk)}),n=Object(Re.b)(this.levels.concat(this.filterIndicators(this.program.indicators,"levels").map(function(e){return e.level?[e.level.pk,e.level._level2parent]:[]}))),i=this.program.levels.filter(function(e){return n.includes(e.pk)}),o=[];return e&&0<e.length&&o.push({label:"",options:e.sort(function(e,t){return e.depth-t.depth}).map(function(e){return{value:e.pk,label:e.name,filterType:"tier"}})}),i&&0<i.length&&o.push({label:this.program.shortResultChainLabel,options:i.filter(function(e){return 2==e.tier.depth}).map(function(e){return{value:e.pk,label:e.outcomeChainDisplay,filterType:"level"}})}),o}},{key:"levelsSelected",get:function(){var t=this;return this.levels&&0<this.levels.length?this.program.levels.filter(function(e){return t.levels.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name,filterType:"level"}}):[]}},{key:"tiersSelected",get:function(){var t=this;return this.tiers&&0<this.tiers.length?this.program.tiers.filter(function(e){return t.tiers.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name,filterType:"tier"}}):[]}},{key:"typeOptions",get:function(){if(this.filtersDisabled)return null;var t=Object(Re.b)(this.types.concat(this.filterIndicators(this.program.indicators,"types").map(function(e){return e.typePks})));return this.program.types.filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}})}},{key:"typesSelected",get:function(){var t=this;return this.types&&0<this.types.length?this.typeOptions.filter(function(e){return t.types.includes(e.value)}):[]}},{key:"sectorOptions",get:function(){if(this.filtersDisabled)return null;var t=this.sectors.concat(this.filterIndicators(this.program.indicators,"sectors").map(function(e){return e.sectorPk}));return this.program.sectors.filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}})}},{key:"sectorsSelected",get:function(){var t=this;return this.sectors&&0<this.sectors.length?this.sectorOptions.filter(function(e){return t.sectors.includes(e.value)}):[]}},{key:"siteOptions",get:function(){if(this.filtersDisabled)return null;var t=this.sites.concat(Object(Re.b)(this.filterIndicators(this.program.indicators,"sites").map(function(e){return e.sitePks})));return this.program.sites.filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}})}},{key:"sitesSelected",get:function(){var t=this;return this.sites&&0<this.sites.length?this.siteOptions.filter(function(e){return t.sites.includes(e.value)}):[]}},{key:"indicatorOptions",get:function(){var t=this;return this.filtersDisabled?[]:this.groupByDisabled?this.filterIndicators(this.program.indicators,"indicators").map(function(e){return{value:e.pk,label:e.name}}):this.filterLevels("indicators").map(function(e){return{label:"".concat(e.tier.name," ").concat(e.sortDisplay),options:t.filterIndicators(e.indicators,"indicators").map(function(e){return{value:e.pk,label:"".concat(e.number||""," ").concat(e.name)}})}}).concat([{label:gettext("Indicators unassigned to a results framework level"),options:this.filterIndicators(this.program.unassignedIndicators,"indicators").map(function(e){return{value:e.pk,label:e.name}})}]).filter(function(e){e.label;var t=e.options;return t&&0<t.length})}},{key:"indicatorsSelected",get:function(){var t=this;return this.indicators&&0<this.indicators.length?(this.groupByDisabled?this.indicatorOptions:Object(Re.b)(this.indicatorOptions.map(function(e){return e.options}))).filter(function(e){return t.indicators.includes(e.value)}):[]}},{key:"noFilters",get:function(){return!(this.indicators&&0!=this.indicators.length||this.types&&0!=this.types.length||this.levels&&0!=this.levels.length||this.tiers&&0!=this.tiers.length||this.sectors&&0!=this.sectors.length||this.sites&&0!=this.sites.length)}},{key:"programPageUrl",get:function(){return!!this.program&&this.program.programPageUrl}},{key:"filteredIndicators",get:function(){return this.filterIndicators(this.program.indicators)}},{key:"filteredLevels",get:function(){return this.filterLevels(!1)}}])&&Ue(e.prototype,t),n&&Ue(e,n),r}()).prototype,"_reportType",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=Me(ce.prototype,"_programId",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=Me(ce.prototype,"_frequencyId",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=Me(ce.prototype,"_startPeriod",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=Me(ce.prototype,"_endPeriod",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=Me(ce.prototype,"_groupBy",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=Me(ce.prototype,"_levels",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ge=Me(ce.prototype,"_tiers",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=Me(ce.prototype,"_sites",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=Me(ce.prototype,"_sectors",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Oe=Me(ce.prototype,"_types",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pe=Me(ce.prototype,"_indicators",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_e=Me(ce.prototype,"_latchMostRecent",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Me(ce.prototype,"reportType",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"reportType"),ce.prototype),Me(ce.prototype,"isTVA",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"isTVA"),ce.prototype),Me(ce.prototype,"_validProgramId",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"_validProgramId"),ce.prototype),Me(ce.prototype,"programId",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"programId"),ce.prototype),Me(ce.prototype,"program",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"program"),ce.prototype),Me(ce.prototype,"frequencyDisabled",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"frequencyDisabled"),ce.prototype),Me(ce.prototype,"frequencyId",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"frequencyId"),ce.prototype),Me(ce.prototype,"programIsLoaded",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"programIsLoaded"),ce.prototype),Me(ce.prototype,"_reportParamsUpdated",[p.d],Object.getOwnPropertyDescriptor(ce.prototype,"_reportParamsUpdated"),ce.prototype),Me(ce.prototype,"periodsDisabled",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"periodsDisabled"),ce.prototype),Me(ce.prototype,"periods",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"periods"),ce.prototype),Me(ce.prototype,"lastPeriod",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"lastPeriod"),ce.prototype),Me(ce.prototype,"currentPeriod",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"currentPeriod"),ce.prototype),Me(ce.prototype,"startPeriod",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"startPeriod"),ce.prototype),Me(ce.prototype,"endPeriod",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"endPeriod"),ce.prototype),Me(ce.prototype,"_internalShowAll",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"_internalShowAll"),ce.prototype),Me(ce.prototype,"showAll",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"showAll"),ce.prototype),Me(ce.prototype,"mostRecent",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"mostRecent"),ce.prototype),Me(ce.prototype,"_mostRecentValue",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"_mostRecentValue"),ce.prototype),Me(ce.prototype,"oldLevels",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"oldLevels"),ce.prototype),Me(ce.prototype,"groupByDisabled",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"groupByDisabled"),ce.prototype),Me(ce.prototype,"groupBy",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"groupBy"),ce.prototype),Me(ce.prototype,"resultChainFilterLabel",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"resultChainFilterLabel"),ce.prototype),Me(ce.prototype,"filtersDisabled",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"filtersDisabled"),ce.prototype),Me(ce.prototype,"levels",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"levels"),ce.prototype),Me(ce.prototype,"tiers",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"tiers"),ce.prototype),Me(ce.prototype,"sites",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"sites"),ce.prototype),Me(ce.prototype,"types",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"types"),ce.prototype),Me(ce.prototype,"sectors",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"sectors"),ce.prototype),Me(ce.prototype,"indicators",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"indicators"),ce.prototype),Me(ce.prototype,"programOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"programOptions"),ce.prototype),Me(ce.prototype,"selectedProgramOption",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"selectedProgramOption"),ce.prototype),Me(ce.prototype,"frequencyOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"frequencyOptions"),ce.prototype),Me(ce.prototype,"selectedFrequencyOption",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"selectedFrequencyOption"),ce.prototype),Me(ce.prototype,"startOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"startOptions"),ce.prototype),Me(ce.prototype,"startPeriodLabel",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"startPeriodLabel"),ce.prototype),Me(ce.prototype,"endOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"endOptions"),ce.prototype),Me(ce.prototype,"endPeriodLabel",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"endPeriodLabel"),ce.prototype),Me(ce.prototype,"levelOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"levelOptions"),ce.prototype),Me(ce.prototype,"levelsSelected",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"levelsSelected"),ce.prototype),Me(ce.prototype,"tiersSelected",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"tiersSelected"),ce.prototype),Me(ce.prototype,"typeOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"typeOptions"),ce.prototype),Me(ce.prototype,"typesSelected",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"typesSelected"),ce.prototype),Me(ce.prototype,"sectorOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"sectorOptions"),ce.prototype),Me(ce.prototype,"sectorsSelected",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"sectorsSelected"),ce.prototype),Me(ce.prototype,"siteOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"siteOptions"),ce.prototype),Me(ce.prototype,"sitesSelected",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"sitesSelected"),ce.prototype),Me(ce.prototype,"indicatorOptions",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"indicatorOptions"),ce.prototype),Me(ce.prototype,"indicatorsSelected",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"indicatorsSelected"),ce.prototype),we=Me(ce.prototype,"clearFilters",[p.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.sectors=[],e.types=[],e.sites=[],e.indicators=[],e.levels=[],e.tiers=[]}}}),Me(ce.prototype,"noFilters",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"noFilters"),ce.prototype),Me(ce.prototype,"programPageUrl",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"programPageUrl"),ce.prototype),Me(ce.prototype,"filteredIndicators",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"filteredIndicators"),ce.prototype),Me(ce.prototype,"filteredLevels",[p.f],Object.getOwnPropertyDescriptor(ce.prototype,"filteredLevels"),ce.prototype),ke=Me(ce.prototype,"indicatorUpdate",[p.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var i=this;return function(e,t){var r=t.programId,n=t.indicatorId;qe(t,["programId","indicatorId"]);r&&r==i.programId&&i.programStore.updateIndicator(i.reportType,r,i.frequencyId,n)}}}),Se=Me(ce.prototype,"indicatorDelete",[p.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var i=this;return function(e,t){var r=t.programId,n=t.indicatorId;qe(t,["programId","indicatorId"]);r&&r==i.programId&&i.programStore.removeIndicator(r,n)}}}),ce);function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function He(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}"undefined"!=typeof gettext&&gettext;var Ge,Je=(He((Ve=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.filterStore=e}var e,r,n;return e=t,(r=[{key:"periodValues",value:function(e){if(1==this.filterStore.frequencyId)return[];if(this.filterStore.frequencyId&&this.filterStore.programIsLoaded){var t=e.reportData[this.filterStore.reportType][this.filterStore.frequencyId];if(t&&void 0!==t)return 2==this.filterStore.frequencyId?t:t.slice(this.filterStore.startPeriod,this.filterStore.endPeriod+1)||[];var r=e.program.getIndicator(e.pk).reportData[this.filterStore.reportType][this.filterStore.frequencyId];if(r&&void 0!==r)return 2==this.filterstore.frequencyId?r:r.slice(this.filterStore.startPeriod,this.filterStore.endPeriod+1)}return[]}},{key:"isTVA",get:function(){return this.filterStore.reportType===V.h}},{key:"programName",get:function(){return this.filterStore.program?this.filterStore.program.name:null}},{key:"levelColumn",get:function(){return!0===this.filterStore.oldLevels}},{key:"levelRows",get:function(){return!1===this.filterStore.oldLevels}},{key:"reportPeriods",get:function(){return this.filterStore.periods?2==this.filterStore.frequencyId?this.filterStore.periods.periods:this.filterStore.periods.periodRange(this.filterStore.startPeriod,this.filterStore.endPeriod)||[]:[]}},{key:"indicatorRows",get:function(){return this.levelRows?[]:this.filterStore.frequencyId&&this.filterStore.programIsLoaded&&this.filterStore.filteredIndicators||[]}},{key:"groupedIndicatorRows",get:function(){var t=this;return this.levelRows&&this.filterStore.frequencyId&&this.filterStore.programIsLoaded?this.filterStore.filteredLevels.map(function(e){return{level:e,indicators:t.filterStore.filterIndicators(e.indicators)}}).concat([{level:null,indicators:this.filterStore.filteredIndicators.filter(function(e){return!e.levelpk})}]):[]}},{key:"reportWidth",get:function(){return 8+(this.levelColumn&&1)+3+this.reportPeriods.length*(1+(this.filterStore.isTVA&&2))}}])&&Qe(e.prototype,r),n&&Qe(e,n),t}()).prototype,"isTVA",[p.f],Object.getOwnPropertyDescriptor(Ve.prototype,"isTVA"),Ve.prototype),He(Ve.prototype,"programName",[p.f],Object.getOwnPropertyDescriptor(Ve.prototype,"programName"),Ve.prototype),He(Ve.prototype,"levelColumn",[p.f],Object.getOwnPropertyDescriptor(Ve.prototype,"levelColumn"),Ve.prototype),He(Ve.prototype,"levelRows",[p.f],Object.getOwnPropertyDescriptor(Ve.prototype,"levelRows"),Ve.prototype),He(Ve.prototype,"reportPeriods",[p.f],Object.getOwnPropertyDescriptor(Ve.prototype,"reportPeriods"),Ve.prototype),He(Ve.prototype,"indicatorRows",[p.f],Object.getOwnPropertyDescriptor(Ve.prototype,"indicatorRows"),Ve.prototype),He(Ve.prototype,"groupedIndicatorRows",[p.f],Object.getOwnPropertyDescriptor(Ve.prototype,"groupedIndicatorRows"),Ve.prototype),He(Ve.prototype,"reportWidth",[p.f],Object.getOwnPropertyDescriptor(Ve.prototype,"reportWidth"),Ve.prototype),Ve),Ke=r("Ez0T");function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function et(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nt,it,ot,at,lt=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.d,{label:gettext("Program"),options:t.programOptions,value:t.selectedProgramOption,update:function(e){t.programId=e.value}})})),st=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.d,{label:t.isTVA?gettext("Target periods"):gettext("Time periods"),options:t.frequencyOptions,value:t.selectedFrequencyOption,update:function(e){t.frequencyId=e.value}})})),ct=Object(l.b)("filterStore")(Ge=Object(l.c)(Ge=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=et(this,tt(t).call(this,e))).setShowAll=function(){r.setState({focus:!1,revert:!1}),r.props.filterStore.showAll=!0},r.checkMostRecent=function(){r.mostRecentInputRef.current.focus()},r.handleChange=function(e){r.setState({mostRecentValue:e.target.value})},r.handleBlur=function(e){r.state.revert||""===r.state.mostRecentValue?r.state.revert?r.setShowAll():r.setState({focus:!1}):(r.props.filterStore.mostRecent=r.state.mostRecentValue,r.setState({focus:!1,revert:!1,mostRecentValue:r.props.filterStore._mostRecentValue}))},r.handleKeyDown=function(e){13===e.keyCode?e.target.blur():27===e.keyCode&&r.setState({revert:!0},function(){r.mostRecentInputRef.current.blur()})},r.handleFocus=function(e){var t={focus:!0,mostRecentValue:r.props.filterStore._mostRecentValue||""};r.mostRecentValue||(t.mostRecentValue=""),r.setState(t)},r.mostRecentInputRef=s.a.createRef(),r.state={focus:!1,mostRecentValue:e.filterStore.mostRecent||"",revert:!1},r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,s.a.Component),r=t,(n=[{key:"render",value:function(){return s.a.createElement("div",{className:"form-row mb-3"},s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("div",{className:"form-check form-check-inline pt-1"},s.a.createElement("span",{className:"form-check-input"},s.a.createElement("input",{type:"radio",checked:!this.props.filterStore.periodsDisabled&&!this.state.focus&&this.props.filterStore.showAll,disabled:this.props.filterStore.periodsDisabled,onChange:this.setShowAll})),s.a.createElement("label",{onClick:this.setShowAll,className:"form-check-label"},gettext("Show all")))),s.a.createElement("div",{className:"col-sm-4 p-0"},s.a.createElement("div",{className:"form-check form-check-inline pt-1"},s.a.createElement("span",{className:"form-check-input"},s.a.createElement("input",{type:"radio",checked:!this.props.filterStore.periodsDisabled&&(this.state.focus||this.props.filterStore.mostRecent),disabled:this.props.filterStore.periodsDisabled,onChange:this.checkMostRecent})),s.a.createElement("label",{onClick:this.checkMostRecent,className:"form-check-label"},gettext("Most recent")))),s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("input",{type:"number",className:"form-control",value:!this.props.filterStore.periodsDisabled&&this.mostRecentValue,ref:this.mostRecentInputRef,disabled:this.props.filterStore.periodsDisabled,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown})))}},{key:"mostRecentValue",get:function(){return this.state.focus?this.state.mostRecentValue:this.props.filterStore.mostRecent||""}}])&&Ze(r.prototype,n),i&&Ze(r,i),t}())||Ge)||Ge,ut=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.a,{label:gettext("Start"),disabled:t.periodsDisabled,value:t.startPeriod||"",update:function(e){t.startPeriod=e.target.value},options:t.startOptions})})),pt=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.a,{label:gettext("End"),disabled:t.periodsDisabled,value:t.endPeriod||"",update:function(e){t.endPeriod=e.target.value},options:t.endOptions})})),ft=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.b,{chainLabel:t.resultChainFilterLabel,disabled:t.groupByDisabled,value:t.groupBy,update:function(e){t.groupBy=e.target.value}})})),dt=Object(l.b)("filterStore")(Object(l.c)(function(e){var n=e.filterStore;return s.a.createElement(Ke.c,{label:gettext("Levels"),options:n.levelOptions,value:n.levels&&0<n.levels.length?n.levelsSelected:n.tiers&&0<n.tiers.length?n.tiersSelected:[],update:function(e){var t=e.filter(function(e){return"level"==e.filterType}).map(function(e){return e.value}),r=e.filter(function(e){return"tier"==e.filterType}).map(function(e){return e.value});t&&0<t.length&&r&&0<r.length?n.levels.length==t.length?n.tiers=r:n.levels=t:t&&0<t.length?n.levels=t:r&&0<r.length?n.tiers=r:(n.levels=[],n.tiers=[])}})})),ht=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.c,{label:gettext("Sites"),options:t.siteOptions,value:t.sitesSelected,update:function(e){t.sites=e.map(function(e){return e.value})}})})),yt=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.c,{label:gettext("Types"),options:t.typeOptions,value:t.typesSelected,update:function(e){t.types=e.map(function(e){return e.value})}})})),mt=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.c,{label:gettext("Sectors"),options:t.sectorOptions,value:t.sectorsSelected,update:function(e){t.sectors=e.map(function(e){return e.value})}})})),gt=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(Ke.c,{label:gettext("Indicators"),options:t.indicatorOptions,value:t.indicatorsSelected,update:function(e){t.indicators=e.map(function(e){return e.value})}})})),bt=function(e){return s.a.createElement("button",{type:"reset",className:"btn btn-block btn-reset"+(e.isDisabled?" disabled":""),onClick:e.action},e.label)},vt=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(s.a.Fragment,null,s.a.createElement(lt,null),s.a.createElement(st,null),s.a.createElement(ct,null),s.a.createElement(ut,null),s.a.createElement(pt,null),!1===t.oldLevels&&!1!==t.resultChainFilterLabel&&s.a.createElement(ft,null))})),Ot=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(dt,null),s.a.createElement(ht,null),s.a.createElement(yt,null),s.a.createElement(mt,null),s.a.createElement(gt,null))},Pt=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement("nav",{id:"id_iptt_report_filter"},s.a.createElement("div",{className:"p-3",id:"filter-top"},s.a.createElement("h3",{className:"filter-title text-title-case"},gettext("Report Options")),s.a.createElement(vt,null)),s.a.createElement("div",{id:"filter-middle",className:"px-3 pt-3 pb-2"},s.a.createElement(Ot,null)),s.a.createElement("div",{id:"filter-bottom"},s.a.createElement(bt,{label:gettext("Clear filters"),action:t.clearFilters,isDisabled:t.noFilters})),s.a.createElement("div",{id:"filter-extra",className:" d-flex justify-content-between no-gutters p-3"},s.a.createElement("a",{href:"/tola_management/audit_log/"+t.programId,className:"btn-link"},s.a.createElement("i",{className:"fas fa-history"})," ",gettext("Change log"))))})),_t=function(){return s.a.createElement("div",{className:"sidebar_wrapper"},s.a.createElement("div",{className:"collapse width show",id:"sidebar"},s.a.createElement(Pt,null)),s.a.createElement("div",{className:"sidebar-toggle"},s.a.createElement("a",{href:"#","data-target":"#sidebar","data-toggle":"collapse",title:gettext("Show/Hide Filters")},s.a.createElement("i",{className:"fa fa-chevron-left"}))))},wt=r("4L+s");function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function It(e,t,r){return t&&Et(e.prototype,t),r&&Et(e,r),e}function jt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nt=function(e){function r(e){var t;return St(this,r),(t=jt(this,Dt(r).call(this,e))).NOT_SENT=0,t.SENDING=1,t.SENT=2,t.FAILED=3,t.handleChange=function(e){t.setState({reportName:e.target.value})},t.isDisabled=function(){return!t.props.routeStore.pinData||!t.state.reportName},t.handleClick=function(){t.setState({status:t.SENDING}),$.ajax({type:"POST",url:t.props.routeStore.pinUrl,data:function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,r,n;t=i,n=o[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return i}({name:t.state.reportName},t.props.routeStore.pinData),success:function(){t.setState({status:t.SENT}),t.props.updatePosition()},error:function(e){t.setState({status:t.FAILED})}})},t.state={reportName:"",status:t.NOT_SENT},t}return Tt(r,s.a.Component),It(r,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,function(){switch(e.state.status){case e.SENT:return s.a.createElement("div",{className:"form-group"},s.a.createElement("p",null,s.a.createElement("span",null,gettext("Success!  This report is now pinned to the program page"))),s.a.createElement("p",null,s.a.createElement("a",{href:e.props.filterStore.programPageUrl},gettext("Visit the program page now."))));case e.FAILED:return s.a.createElement("div",{className:"form-group"},s.a.createElement("p",null,s.a.createElement("span",null,gettext("Something went wrong when attempting to pin this report"))));case e.NOT_SENT:return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:""},gettext("Report name")),s.a.createElement("input",{type:"text",className:"form-control",value:e.state.reportName,onChange:e.handleChange,disabled:e.state.sending})),s.a.createElement("button",{type:"button",onClick:e.handleClick,disabled:e.isDisabled(),className:"btn btn-primary btn-block"},gettext("Pin to program page")));case e.SENDING:return s.a.createElement("div",{className:"btn btn-primary",disabled:!0},s.a.createElement("img",{src:"/static/img/ajax-loader.gif"})," ",gettext("Sending"))}}())}}]),r}(),Ct=Object(l.b)("filterStore","routeStore")(nt=function(e){function o(){var e,t;St(this,o);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=jt(this,(e=Dt(o)).call.apply(e,[this].concat(n)))).popoverName="pin",t.getPopoverContent=function(){return s.a.createElement(Nt,{filterStore:t.props.filterStore,routeStore:t.props.routeStore,updatePosition:function(){$(t.refs.target).popover("update")}})},t}return Tt(o,wt["a"]),It(o,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{href:"#",className:"btn btn-sm btn-secondary",ref:"target"},s.a.createElement("i",{className:"fas fa-thumbtack"}),gettext("Pin")))}}]),o}())||nt,At=Object(l.c)(it=function(e){function o(){var e,t;St(this,o);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=jt(this,(e=Dt(o)).call.apply(e,[this].concat(n)))).getCurrent=function(){t.props.routeStore.excelUrl&&window.open(t.props.routeStore.excelUrl,"_blank")},t.getAll=function(){t.props.routeStore.fullExcelUrl&&window.open(t.props.routeStore.fullExcelUrl,"_blank")},t}return Tt(o,s.a.Component),It(o,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.getCurrent},gettext("Current view")),s.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.getAll},gettext("All program data")))}}]),o}())||it,Lt=Object(l.b)("filterStore","routeStore")(ot=Object(l.c)(ot=function(e){function o(){var e,t;St(this,o);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=jt(this,(e=Dt(o)).call.apply(e,[this].concat(n)))).popoverName="excel",t.getPopoverContent=function(){return s.a.createElement(At,{filterStore:t.props.filterStore,routeStore:t.props.routeStore})},t}return Tt(o,wt["a"]),It(o,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",ref:"target"},s.a.createElement("i",{className:"fas fa-download"})," Excel"))}}]),o}())||ot)||ot,Rt=Object(l.b)("routeStore")(at=Object(l.c)(at=function(e){function o(){var e,t;St(this,o);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=jt(this,(e=Dt(o)).call.apply(e,[this].concat(n)))).handleClick=function(){t.props.routeStore.excelUrl&&window.open(t.props.routeStore.excelUrl,"_blank")},t}return Tt(o,s.a.Component),It(o,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:this.handleClick},s.a.createElement("i",{className:"fas fa-download"})," Excel"))}}]),o}())||at)||at,qt=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement("div",{className:"page-subheader"},s.a.createElement("div",{id:"id_span_iptt_date_range",className:"subheader__title"},s.a.createElement("h2",{className:"pt-3 text-title-case"},gettext("Indicator Performance Tracking Table")),s.a.createElement("h4",{className:"pb-3"},t.startPeriodLabel&&t.endPeriodLabel?t.startPeriodLabel+" - "+t.endPeriodLabel:"")),s.a.createElement("div",{className:"subheader__actions"},s.a.createElement("div",{className:"btn-row"},s.a.createElement(Ct,null),t.isTVA?s.a.createElement(Lt,null):s.a.createElement(Rt,null))))})),Ft=function(e){var t=e.label,r=e.styleWidth,n=r?{minWidth:"".concat(r,"px")}:{};return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase",style:n},t)},zt=function(e){var t=e.styleWidth?{minWidth:"".concat(e.styleWidth,"px")}:{};return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase td-no-side-borders",style:t},e.label)},Ut=function(e){return s.a.createElement("td",{scope:"colgroup",colSpan:e.isTVA?3:1,className:"text-center title-row text-nowrap align-bottom"},s.a.createElement("span",{className:"text-uppercase"},e.period.name),e.period.range&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("small",null,e.period.range)))},Mt=function(){return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase text-right",style:{minWidth:"110px"}},gettext("Target"))},Vt=function(){return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase text-right",style:{minWidth:"110px"}},gettext("Actual"))},Bt=function(){return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase text-right",style:{minWidth:"110px"}},gettext("% met"))},Wt=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Mt,null),s.a.createElement(Vt,null),s.a.createElement(Bt,null))},$t=Object(l.b)("reportStore")(Object(l.c)(function(e){var r=e.reportStore;return s.a.createElement("tr",{className:"title-row"},s.a.createElement("td",{colSpan:r.levelColumn?9:8,id:"id_td_iptt_program_name",className:"align-bottom pt-2"},s.a.createElement("h5",{className:"m-0"},r.programName)),s.a.createElement("td",{scope:"colgroup",colSpan:"3",className:"text-center title-row text-nowrap align-bottom text-uppercase"},gettext("Life of program")),r.reportPeriods.map(function(e,t){return s.a.createElement(Ut,{isTVA:r.isTVA,key:t,period:e})}))})),Yt=Object(l.b)("reportStore")(Object(l.c)(function(e){var r=e.reportStore;return s.a.createElement("tr",null,s.a.createElement(Ft,{styleWidth:110,align:"center",label:gettext("No.")}),s.a.createElement(zt,{styleWidth:600,label:gettext("Indicator")}),s.a.createElement(zt,null),r.levelColumn&&s.a.createElement(Ft,{styleWidth:90,label:gettext("Level")}),s.a.createElement(Ft,{styleWidth:250,label:gettext("Unit of measure")}),s.a.createElement(Ft,{label:gettext("Change")}),s.a.createElement(Ft,{styleWidth:130,label:gettext("C / NC")}),s.a.createElement(Ft,{styleWidth:50,label:gettext("# / %")}),s.a.createElement(Ft,{label:gettext("Baseline")}),s.a.createElement(Wt,null),r.reportPeriods.map(function(e,t){return r.isTVA?s.a.createElement(Wt,{key:t}):s.a.createElement(Vt,{key:t})}))})),Qt=function(){return s.a.createElement("thead",{className:"thead-light"},s.a.createElement($t,null),s.a.createElement(Yt,null))};function Ht(){return(Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Gt(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Jt(e,t){return e==gettext("N/A")?e:""===e||isNaN(parseFloat(e))?null:(e=Number.isInteger(e)?String(e):(e=Number.parseFloat(e).toFixed(2)).endsWith("00")?parseInt(e):e.endsWith("0")?e.slice(0,-1):e,!0===t?"".concat(e,"%"):e)}var Kt=Object(l.b)("filterStore")(function(e){var r=e.filterStore,n=e.indicator;return s.a.createElement("td",{className:"td-no-side-borders"},s.a.createElement("button",{type:"button",className:"btn btn-link p-1 float-right",onClick:function(e){e.preventDefault();var t="/indicators/indicator_update/".concat(n.pk,"/?modal=true");$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").load(t),$("#indicator_modal_div").modal("show").on("updated.tola.indicator.save",r.indicatorUpdate).on("deleted.tola.indicator.save",r.indicatorDelete).one("hidden.bs.modal",function(e){$(e.target).off(".tola.save")})}},s.a.createElement("i",{className:"fas fa-cog"})))}),Xt=function(e){var r=e.indicator;return s.a.createElement("td",{className:"td-no-side-borders"},s.a.createElement("button",{type:"button",className:"btn btn-link p-1 indicator-ajax-popup indicator-data",onClick:function(e){e.preventDefault();var t="/indicators/result_table/".concat(r.pk,"/0/?edit=false");$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").load(t),$("#indicator_modal_div").modal("show")}},s.a.createElement("i",{className:"fas fa-table"})),r.name)},Zt=function(e){var t=e.value,r=e.resultCell,n=Gt(e,["value","resultCell"]),i=t||0===t?t:V.b;return r&&!0===r?s.a.createElement("td",n,i):s.a.createElement("td",Ht({className:"td-no-side-borders"},n),i)},er=function(e){var t=e.value,r=Gt(e,["value"]);return t=Jt(t,!0),s.a.createElement(Zt,Ht({value:t,align:"right"},r))},tr=function(e){var t=e.value,r=Gt(e,["value"]);return t=Jt(t,!1),s.a.createElement(Zt,Ht({value:t,align:"right"},r))},rr=function(e){var t=e.value;e.resultCell,Gt(e,["value","resultCell"]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(tr,{value:t.target}),s.a.createElement(tr,{value:t.actual}),s.a.createElement(er,{value:t.met}))},nr=function(e){var t=e.value;e.resultCell,Gt(e,["value","resultCell"]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(er,{value:t.target}),s.a.createElement(er,{value:t.actual}),s.a.createElement(er,{value:t.met}))},ir=Object(l.b)("reportStore")(Object(l.c)(function(e){var t,r,n=e.reportStore,i=e.indicator,o=e.levelCol;r="%"==i.unitType?(t=er,n.isTVA?nr:er):(t=tr,n.isTVA?rr:tr);var a=null===i.cumulative?null:i.cumulative?gettext("Cumulative"):gettext("Non-cumulative"),l=i.number;return l&&0<l.length&&":"==l.slice(-1)&&(l=l.slice(0,-1)),s.a.createElement("tr",null,s.a.createElement(Zt,{value:l}),s.a.createElement(Xt,{indicator:i}),s.a.createElement(Kt,{indicator:i}),o&&s.a.createElement(Zt,{value:i.levelName}),s.a.createElement(Zt,{value:i.unitOfMeasure}),s.a.createElement(Zt,{value:i.directionOfChange||gettext("N/A"),align:"center"}),s.a.createElement(Zt,{value:a||gettext("N/A")}),s.a.createElement(Zt,{value:i.unitType,align:"center"}),i.baseline_na?s.a.createElement(Zt,{value:gettext("N/A"),align:"right"}):s.a.createElement(t,{value:i.baseline}),s.a.createElement(t,{value:i.lopTarget}),s.a.createElement(t,{value:i.lopActual}),s.a.createElement(er,{value:i.lopMet}),n.periodValues(i).map(function(e,t){return s.a.createElement(r,{value:e,key:t,resultCell:!0})}))})),or=Object(l.b)("reportStore")(Object(l.c)(function(e){var t=e.reportStore,r=e.children;return s.a.createElement("tr",null,s.a.createElement("td",{colSpan:t.reportWidth,className:"iptt-level-row"},r))})),ar=function(e){var t=e.level;return s.a.createElement(or,null,t.tier.name,t.ontology?" ".concat(t.ontology):"",": ",t.name)},lr=function(){return s.a.createElement(or,null,gettext("Indicators unassigned to a results framework level"))},sr=function(e){var t=e.level,r=e.indicators;return s.a.createElement(s.a.Fragment,null,t?s.a.createElement(ar,{level:t}):r&&0<r.length&&s.a.createElement(lr,null),r.map(function(e,t){return s.a.createElement(ir,{indicator:e,levelCol:!1,key:t})}))},cr=Object(l.b)("reportStore")(Object(l.c)(function(e){var r=e.reportStore;return s.a.createElement("tbody",null,r.levelRows?r.groupedIndicatorRows.map(function(e,t){var r=e.level,n=e.indicators;return s.a.createElement(sr,{level:r,indicators:n,key:t})}):r.indicatorRows.map(function(e,t){return s.a.createElement(ir,{indicator:e,levelCol:r.levelColumn,key:t})}))})),ur=function(){return s.a.createElement("table",{className:"table table-sm table-bordered table-hover table__iptt",id:"iptt_table"},s.a.createElement(Qt,null),s.a.createElement(cr,null))},pr=function(){return s.a.createElement("main",{className:"iptt_table_wrapper"},s.a.createElement("div",{id:"id_div_top_iptt_report"},s.a.createElement(qt,null),s.a.createElement(ur,null)))},fr=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(_t,null),s.a.createElement(pr,null))},dr=new J(jsContext.api_url),hr=new Ye(new Le(jsContext,dr)),yr=new Je(hr),mr=new b(hr,jsContext);mr.init(),a.a.render(s.a.createElement(l.a,{filterStore:hr,routeStore:mr,reportStore:yr},s.a.createElement(fr,null)),document.querySelector("#id_div_content"))},v38i:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"h",function(){return o}),r.d(t,"f",function(){return a}),r.d(t,"g",function(){return l}),r.d(t,"c",function(){return s}),r.d(t,"d",function(){return c}),r.d(t,"i",function(){return p}),r.d(t,"e",function(){return f});var n={value:null,label:"---------"},i="—",o=1,a=2,l=[3,4,5,6,7],s=1,c=2,u="undefined"!=typeof gettext?gettext:function(e){return e};function p(){return{targetperiodLabels:{1:u("Life of Program (LoP) only"),3:u("Annual"),2:u("Midline and endline"),5:u("Tri-annual"),4:u("Semi-annual"),7:u("Monthly"),6:u("Quarterly")},timeperiodLabels:{3:u("Years"),5:u("Tri-annual periods"),4:u("Semi-annual periods"),7:u("Months"),6:u("Quarters")}}}var f={NO_INDICATOR_IN_UPDATE:1}}},[["mYfJ",0,1]]]);