(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{mYfJ:function(r,e,t){"use strict";t.r(e);var n,o,i,a,u,l,p,s,c,f,d,y,m=t("q1tI"),b=t.n(m),g=t("i8i4"),h=t.n(g),P=t("okNM"),v=t("wgi2"),w=t("0pHI"),O=t("2vnA");function I(r,e){if(null==r)return{};var t,n,o=function(r,e){if(null==r)return{};var t,n,o={},i=Object.keys(r);for(n=0;n<i.length;n++)t=i[n],0<=e.indexOf(t)||(o[t]=r[t]);return o}(r,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)t=i[n],0<=e.indexOf(t)||Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function S(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!e||t.length!==e);n=!0);}catch(r){o=!0,i=r}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return t}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){q(e,r,t[r])})}return e}function q(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function A(r,e,t,n){t&&Object.defineProperty(r,e,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function E(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function T(t,n,r,e,o){var i={};return Object.keys(e).forEach(function(r){i[r]=e[r]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,e){return e(t,n,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,n,i),i=null),i}var D,z={validPID:!0,validFrequencies:[1,4,5],groupByOld:!1,validateProgramId:function(r){return this.validPID?Promise.resolve(parseInt(r)):Promise.reject("bad ID")},validateFrequency:function(r,e,t){if((2===t?[3,4,5,6,7]:this.validFrequencies).includes(parseInt(e)))return parseInt(e);throw"bad freq"},currentPeriod:function(r,e){return 7},lastPeriod:function(r,e){return 8},startPeriodFromDate:function(r,e,t){if(t instanceof Date&&!isNaN(t))return 3;throw"bad date"},endPeriodFromDate:function(r,e,t){if(t instanceof Date&&!isNaN(t))return t.toISOString()==new Date("2017-01-31").toISOString()?10:6;throw"bad date"},oldLevels:function(r){return this.groupByOld}};function _(r){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function k(r,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(r){if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):e}function x(r){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function N(r,e){return(N=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r})(r,e)}var U=new(o=T((n=function(){function r(){var N=this;!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),A(this,"reportType",o,this),A(this,"programId",i,this),A(this,"frequency",a,this),A(this,"startPeriod",u,this),A(this,"endPeriod",l,this),A(this,"groupBy",p,this),A(this,"levels",s,this),A(this,"tiers",c,this),A(this,"sites",f,this),A(this,"types",d,this),A(this,"indicators",y,this),this.init=function(){N.router=Object(v.b)(N.routes,{trailingSlashMode:"always"}),N.router.setRootPath(N.queryParams),N.router.usePlugin(Object(w.a)({useHash:!1,base:"/indicators"})),N.router.subscribe(N.updateRoute),N.router.start();var r=N.router.getState(),e=r.name,t=r.params;N.processParams(j({name:e},t)).then(function(){N.router.buildPath(e,t)!=N.router.buildPath(N.routeName,N.routeParams)&&N.router.navigate(N.routeName,N.routeParams,{replace:!0});Object(O.m)(function(){return[N.routeName,N.routeParams]},function(r){var e=S(r,2),t=e[0],n=e[1];return N.router.navigate(t,n)})})},this.updateRoute=function(r){r.previousRoute;var e=r.route;e.name,e.params,I(e,["name","params"])},this.processParams=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=r.name,t=void 0===e?null:e,n=r.programId,o=void 0===n?null:n,i=r.frequency,a=void 0===i?null:i,u=r.start,l=void 0===u?null:u,p=r.end,s=void 0===p?null:p,c=r.timeperiods,f=void 0===c?null:c,d=r.targetperiods,y=void 0===d?null:d,m=r.timeframe,b=void 0===m?null:m,g=r.numrecentperiods,h=void 0===g?null:g,P=r.start_period,v=void 0===P?null:P,w=r.end_period,O=void 0===w?null:w,I=r.groupby,S=void 0===I?null:I,j=r.levels,q=void 0===j?null:j,A=r.tiers,E=void 0===A?null:A,T=r.sites,D=void 0===T?null:T,z=r.types,_=void 0===z?null:z,k=r.indicators,x=void 0===k?null:k;return N.reportType="iptt.tva"==t?1:"iptt.timeperiods"==t?2:null,null===a&&1===N.reportType&&null!==y?a=y:null===a&&2===N.reportType&&null!==f&&(a=f),N.programStore.validateProgramId(o).then(function(r){return N.programId=r,N.frequency=N.programStore.validateFrequency(r,a,N.reportType),null===l&&1!=N.frequency&&2!=N.frequency&&(l=N.getStartPeriod(b,h,v)),N.startPeriod=l,null===s&&1!=N.frequency&&2!=N.frequency&&(s=N.getEndPeriod(b,O)),N.endPeriod=s,N.programStore.oldLevels(N.programId)||(N.groupBy=parseInt(S)||1),null!==(q=N.parseArrayParams(q))&&(E=null,N.levels=q),null!==E&&(N.tiers=N.parseArrayParams(E)),N.sites=N.parseArrayParams(D),N.types=N.parseArrayParams(_),N.indicators=N.parseArrayParams(x),Promise.resolve(!0)},function(r){throw r}).catch(function(r){return Promise.reject(r)})},this.getStartPeriod=function(r,e,t){return"1"==r?0:"2"==r?N.programStore.currentPeriod(N.programId,N.frequency)-(parseInt(e)||2)+1:null!==t?N.programStore.startPeriodFromDate(N.programId,N.frequency,new Date(t)):Math.max(N.programStore.currentPeriod(N.programId,N.frequency)-2,0)},this.getEndPeriod=function(r,e){return"1"==r?N.programStore.lastPeriod(N.programId,N.frequency):"2"==r?N.programStore.currentPeriod(N.programId,N.frequency):null!==e?Math.min(N.programStore.endPeriodFromDate(N.programId,N.frequency,new Date(e)),N.programStore.lastPeriod(N.programId,N.frequency)):Math.max(Math.min(N.programStore.currentPeriod(N.programId,N.frequency),N.startPeriod+2),N.programStore.lastPeriod(N.programId,N.frequency))},this.parseArrayParams=function(r){return"string"==typeof r||r instanceof String?[parseInt(r)]:Array.isArray(r)?r.map(function(r){return parseInt(r)}):Number.isInteger(r)?r:isNaN(parseInt(r))?null:[parseInt(r)]},this.parseToArrayParams=function(r){return Array.isArray(r)?r.map(N.parseToArrayParams):"string"==typeof r||r instanceof String?r:String(r)},this.routes=[{name:"iptt",path:"/iptt_report/:programId<\\d+>",children:[{name:"timeperiods",path:"/timeperiods?timeperiods"},{name:"tva",path:"/targetperiods?targetperiods"}]},{name:"ipttAPI",path:"/iptt_api?reportType&programId",children:[{name:"ipttData",path:"/iptt_report_data/"},{name:"ipttExcel",path:"/iptt_excel/?fullTVA"}]}],this.goodQueryParams=["frequency","start","end","levels","types","sectors","indicators","tiers","groupby"],this.oldQueryParams=["timeframe","numrecentperiods","start_period","end_period"],this.queryParams="?"+this.goodQueryParams.concat(this.oldQueryParams).join("&"),this.programStore=z}var e,t,n;return e=r,(t=[{key:"routeName",get:function(){return 1===this.reportType?"iptt.tva":2===this.reportType?"iptt.timeperiods":"iptt"}},{key:"routeParams",get:function(){var e=this,t={};return["programId","frequency","levels","tiers","sites","types","indicators"].forEach(function(r){null!==e[r]&&(t[r]=e.parseToArrayParams(e[r]))}),null!==this.startPeriod&&(t.start=String(this.startPeriod)),null!==this.endPeriod&&(t.end=String(this.endPeriod)),null!==this.groupBy&&(t.groupby=String(this.groupBy)),t}},{key:"dataUrl",get:function(){return this.router.buildUrl("ipttAPI.ipttData",this.routeParams)}},{key:"excelUrl",get:function(){return this.router.buildUrl("ipttAPI.ipttExcel",j({},this.routeParams,{reportType:this.reportType,fullTVA:!1}))}},{key:"fullExcelUrl",get:function(){return this.router.buildUrl("ipttAPI.ipttExcel",{programId:this.programId,fullTVA:!0})}}])&&E(e.prototype,t),n&&E(e,n),r}()).prototype,"reportType",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=T(n.prototype,"programId",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=T(n.prototype,"frequency",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=T(n.prototype,"startPeriod",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=T(n.prototype,"endPeriod",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T(n.prototype,"groupBy",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=T(n.prototype,"levels",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=T(n.prototype,"tiers",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=T(n.prototype,"sites",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=T(n.prototype,"types",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=T(n.prototype,"indicators",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T(n.prototype,"routeName",[O.e],Object.getOwnPropertyDescriptor(n.prototype,"routeName"),n.prototype),T(n.prototype,"routeParams",[O.e],Object.getOwnPropertyDescriptor(n.prototype,"routeParams"),n.prototype),T(n.prototype,"dataUrl",[O.e],Object.getOwnPropertyDescriptor(n.prototype,"dataUrl"),n.prototype),T(n.prototype,"excelUrl",[O.e],Object.getOwnPropertyDescriptor(n.prototype,"excelUrl"),n.prototype),T(n.prototype,"fullExcelUrl",[O.e],Object.getOwnPropertyDescriptor(n.prototype,"fullExcelUrl"),n.prototype),n);U.init();var F=Object(P.b)("routeStore")(D=Object(P.c)(D=function(r){function i(){var r,e;!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=k(this,(r=x(i)).call.apply(r,[this].concat(n)))).onclick=function(){e.props.routeStore.programId=400==e.props.routeStore.programId?350:400},e.onclicka=function(){e.props.routeStore.reportType=2==e.props.routeStore.reportType?1:2},e.render=function(){return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",null,"Hello route = ",e.props.routeStore.levels),b.a.createElement("button",{onClick:e.onclick},"hiya"),b.a.createElement("button",{onClick:e.onclicka},"hiya"))},e}return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&N(r,e)}(i,b.a.Component),i}())||D)||D;h.a.render(b.a.createElement(P.a,{routeStore:U},b.a.createElement(F,null)),document.querySelector("#id_div_content"))}},[["mYfJ",0,1]]]);