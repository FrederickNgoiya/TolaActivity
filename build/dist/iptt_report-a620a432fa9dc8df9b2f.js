(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1d5Q":function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"d",function(){return s}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return u});var i=r("2vnA"),n=r("5/4V");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a="undefined"!=typeof gettext?gettext:function(e){return e},l=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return[function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{pk:parseInt(e.pk),name:e.name,resultsFramework:Boolean(e.results_framework),_resultChainFilterLabel:e.by_result_chain||a("by Outcome chain"),get resultChainFilterLabel(){return this.resultsFramework?this._resultChainFilterLabel:null}}}].concat(t).reduce(function(e,t){return Object(i.i)(e,t(r))},{})}},s=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{reportingPeriodStart:new Date(e.reporting_period_start_iso),reportingPeriodEnd:new Date(e.reporting_period_end_iso)}},c=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{_indicatorsLevelOrder:Object(i.n)(e.indicator_pks_level_order||[]),_indicatorsChainOrder:Object(i.n)(e.indicator_pks_chain_order||[]),_applyOrderUpdate:function(e){var a=this;Object(i.p)(function(){return a._indicatorsLevelOrder=e.indicator_pks_level_order||[],a._indicatorsChainOrder=e.indicator_pks_chain_order||[],Object.entries(e.indicators||{}).forEach(function(e){var t=o(e,2),r=t[0],n=t[1];!isNaN(parseInt(r))&&a.indicators.has(parseInt(r))&&a.indicators.get(parseInt(r)).updateData(n)}),e})},updateOrder:function(){return n.a.programLevelOrdering(this.pk).then(this._applyOrderUpdate.bind(this))},get indicatorsInLevelOrder(){var t=this;return this._indicatorsLevelOrder.map(function(e){return t.indicators.get(e)})},get indicatorsInChainOrder(){var t=this;return this.hasOwnProperty("resultsFramework")&&!1===this.resultsFramework?this.indicatorsInLevelOrder:this._indicatorsChainOrder.map(function(e){return t.indicators.get(e)})}}},u=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{_levelsLevelOrder:Object(i.n)(e.level_pks_level_order||[]),_levelsChainOrder:Object(i.n)(e.level_pks_chain_order||[]),_unassignedIndicators:Object(i.n)(e.unassigned_indicator_pks||[]),levelIndicators:Object(i.n)(new Map((e.indicator_pks_for_level||[]).map(function(e){return[e.pk,e.indicator_pks]}))),updateOrder:function(){var t=this;return n.a.rfLevelOrdering(this.pk).then(function(e){Object(i.p)(function(){return t._levelsLevelOrder=e.level_pks_level_order||[],t._levelsChainOrder=e.level_pks_chain_order||[],t._unassignedIndicators=e.unassigned_indicator_pks||[],t._updateLevelIndicatorsOrder(e.indicator_pks_for_level),!0})})},get levelsInLevelOrder(){var t=this;return this._levelsLevelOrder.map(function(e){return t.levels.get(e)})||[]},get levelsInChainOrder(){var t=this;return this.hasOwnProperty("resultsFramework")&&!1===this.resultsFramework?this.levelsInLevelOrder:this._levelsChainOrder.map(function(e){return t.levels.get(e)})||[]},get unassignedIndicators(){var t=this;return this._unassignedIndicators.map(function(e){return t.indicators.get(e)})||[]},get indicatorsInLevelOrder(){var t=this;return this.resultsFramework?Array.prototype.concat.apply([],this.levelsInLevelOrder.map(function(e){return t.levelIndicators.get(e.pk).filter(function(e){return t.indicators.has(e)}).map(function(e){return t.indicators.get(e)})})).concat(this.unassignedIndicators):this.unassignedIndicators},get indicatorsInChainOrder(){var t=this;return this.resultsFramework?Array.prototype.concat.apply([],this.levelsInChainOrder.map(function(e){return t.levelIndicators.get(e.pk).filter(function(e){return t.indicators.has(e)}).map(function(e){return t.indicators.get(e)})})).concat(this.unassignedIndicators):this.unassignedIndicators},_updateLevelIndicatorsOrder:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];Object(i.p)(function(){n.levelIndicators.clear(),e.forEach(function(e){var t=e.pk,r=e.indicator_pks;n.levelIndicators.set(t,r)})})}}}},"4L+s":function(e,t,r){"use strict";r.d(t,"b",function(){return m}),r.d(t,"a",function(){return h});var n=r("q1tI"),o=r.n(n),a=r("i8i4"),l=r.n(a);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function r(e){var t;return s(this,r),(t=u(this,p(r).call(this,e))).content=e.content,t.placement=e.placement||null,t}var t,n,a;return d(r,o.a.Component),t=r,(n=[{key:"render",value:function(){return o.a.createElement("a",{tabIndex:"0","data-toggle":"popover","data-trigger":"focus","data-html":"true","data-placement":this.placement,"data-content":this.content},o.a.createElement("i",{className:"far fa-question-circle"}))}}])&&c(t.prototype,n),a&&c(t,a),r}(),h=function(e){function i(){var e,r;s(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(r=u(this,(e=p(i)).call.apply(e,[this].concat(n)))).popoverName="base",r.componentDidMount=function(){r.bodyClickHandler=function(e){0==$("#".concat(r.popoverName,"_popover_content")).parent().find($(e.target)).length&&$(r.refs.target).popover("hide")};var t=function(){$("body").on("click",r.bodyClickHandler),$(r.refs.target).popover("update").on("hide.bs.popover",function(){$("body").off("click",r.bodyClickHandler)})};$(r.refs.target).popover({content:'<div id="'.concat(r.popoverName,'_popover_content"></div>'),html:!0,placement:"bottom"}).on("shown.bs.popover",function(e){l.a.render(r.getPopoverContent(),document.querySelector("#".concat(r.popoverName,"_popover_content")),t)})},r.getPopoverContent=function(){throw new Error("not implemented")},r}return d(i,o.a.Component),i}()},"5/4V":function(e,t,r){"use strict";var n=r("vDqi"),a=r.n(n),i=r("Qyje"),o=r.n(i),l={apiInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"json",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")}}),documentInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"document",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")},transformResponse:[function(e){return(new XMLSerializer).serializeToString(e)}]}),formPostInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"json",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),"content-type":"application/x-www-form-urlencoded"}}),logFailure:function(e){},getProgramPageUrl:function(e){return!isNaN(parseInt(e))&&"/program/".concat(e,"/")},programLevelOrdering:function(e){return this.apiInstance.get("/program/ordering/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},rfLevelOrdering:function(e){return this.apiInstance.get("/program/level_ordering/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},indicatorResultsTable:function(e){return this.documentInstance.get("/result_table/".concat(e,"/"),{params:{raw:!0}}).then(function(e){return e.data}).catch(this.logFailure)},updateProgramPageIndicator:function(e){return this.apiInstance.get("/program_page/indicator/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},updateAllProgramPageIndicators:function(e){return this.apiInstance.get("/program_page/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},ipttFilterData:function(e){return this.apiInstance.get("/iptt/".concat(e,"/filter_data/")).then(function(e){return e.data}).catch(this.logFailure)},getIPTTReportData:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.programPk,r=e.frequency,n=e.reportType;return this.apiInstance.get("/iptt/".concat(t,"/report_data/"),{params:{frequency:r,report_type:n}}).then(function(e){return e.data}).catch(this.logFailure)},savePinnedReport:function(e){return this.formPostInstance.post("/pinned_report/",o.a.stringify(e)).catch(this.logFailure)},updateIPTTIndicator:function(e){return this.apiInstance.get("/iptt/indicator/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)}};t.a=l},Ez0T:function(e,t,r){"use strict";var n=r("q1tI"),i=r.n(n),o=r("y2Vs"),a=r("VCnP"),l=r.n(a),s=0;function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"id";return s++,"".concat(e).concat(s)}var u=r("v38i");function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){m(t,e,r[e])})}return t}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"d",function(){return h}),r.d(t,"a",function(){return g}),r.d(t,"c",function(){return y}),r.d(t,"b",function(){return _});var h=function(e){var t=c("react-select"),r=e.labelClasses||"col-form-label text-uppercase",n=e.formRowClasses||"form-row mb-3",a=e.selectClasses||"tola-react-select";return i.a.createElement("div",{className:n},i.a.createElement("label",{htmlFor:t,className:r},e.label),i.a.createElement(o.default,{onChange:e.update,value:e.value,id:t,className:a,isDisabled:e.disabled,options:e.options}))},g=function(e){var t=c("date-select"),r=e.options&&1==e.options.length&&void 0!==e.options[0].value?i.a.createElement("option",{value:e.options[0].value},e.options[0].label):e.options&&0<e.options.length&&e.options[0].options&&void 0!==e.options[0].options?e.options.map(function(e,t){return i.a.createElement("optgroup",{label:e.label,key:t},e.options.map(function(e){return i.a.createElement("option",{value:e.value,key:e.value},e.label)}))}):e.options.map(function(e,t){return i.a.createElement("option",{value:e.value,key:t},e.label)});return i.a.createElement("div",{className:"form-row mb-3"},i.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),i.a.createElement("select",{className:"form-control",id:t,value:e.value,onChange:e.update,disabled:e.disabled},r))},v=function(e){var t=c("react-select"),r=e.formGroupClass||"form-row mb-3",n=e.labelClass||"col-form-label text-uppercase",a=e.selectClass||"form-control";return i.a.createElement("div",{className:r},i.a.createElement("label",{htmlFor:t,className:n},e.label),i.a.createElement("select",{onChange:e.update,value:e.value,id:t,className:a,disabled:e.disabled},e.options))},b=function(e){return""==e.children?i.a.createElement("div",null):i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",{style:{margin:"3px 0px 0px 0px"}}),i.a.createElement("div",{className:"text-muted",style:{textTransform:"uppercase",paddingLeft:"4px",marginBottom:"2px"}},e.children))},y=function(e){var t=c("multiselect"),r=!e.options||0==e.options.length||1==e.options.length&&null===e.options[0].value,n=r?{getDropdownButtonLabel:function(){return gettext("None available")},isDisabled:!0,menuIsOpen:!1,options:[]}:{isMulti:!0,options:e.options,getDropdownButtonLabel:function(e){return e.value?Array.isArray(e.value)?0==e.value.length?gettext("None selected"):1==e.value.length?e.value[0].label:"".concat(e.value.length,"  ").concat(gettext("selected")):e.value.label:gettext("None selected")}},a={dropdownButton:function(e){return r?f({},e,{backgroundColor:"#E5E6E8",background:""}):e},option:function(e,t){return f({},e,{padding:"1px 12px",display:"inline-block"})},container:function(e,t){return f({},e,{backgroundColor:"#f5f5f5"})}};return i.a.createElement("div",{className:"form-row mb-2 tola-react-multiselect-row"},i.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),i.a.createElement(l.a,d({id:t,styles:a,formatOptionLabel:function(e){return i.a.createElement("div",{style:{display:"inline-block",float:"right",width:"90%"}},e.label)},components:{GroupHeading:b},value:e.value,onChange:e.update},n)))},_=function(e){var t=e.chainLabel,r=p(e,["chainLabel"]),n=[i.a.createElement("option",{value:u.c,key:1},t),i.a.createElement("option",{value:u.d,key:2},gettext("by Level"))];return i.a.createElement(v,d({label:gettext("Group indicators"),options:n},r))}},"My+N":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return i});var n=r("2vnA"),a=("undefined"!=typeof gettext&&gettext,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(r){return[function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{pk:parseInt(e.pk),name:e.name,levelPk:!isNaN(parseInt(e.level_pk))&&parseInt(e.level_pk),oldLevelDisplay:e.old_level_name||!1,meansOfVerification:e.means_of_verification||!1}}].concat(t).reduce(function(e,t){return Object(n.i)(e,t(r))},{})}}),i=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{_formatDecimal:function(e){return!isNaN(parseFloat(e))&&(e=parseFloat(e),Number.isInteger(e)?parseInt(e):e)},frequency:parseInt(e.target_frequency),unitOfMeasure:e.unit_of_measure||!1,isPercent:Boolean(e.is_percent),isCumulative:Boolean(e.is_cumulative),directionOfChange:e.direction_of_change||!1,baseline:e.baseline||null,_lopTarget:e.lop_target,get lopTarget(){return this._formatDecimal(this._lopTarget)}}}},OtFd:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("2vnA"),a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(r){return[function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{frequency:parseInt(e.frequency),get periodCount(){return this.periods.length},get currentPeriod(){return[1,2,8].includes(this.frequency)?null:this.periods.filter(function(e){return e.past}).length-1},getLabel:function(e){return[3,4,5,6].includes(this.frequency)?"".concat(e.name," (").concat(e.label,")"):7==this.frequency?e.name:void 0},get options(){var r=this;return this.periods.map(function(e,t){return{value:t,label:r.getLabel(e),year:e.year}})}}}].concat(t).reduce(function(e,t){return Object(n.i)(e,t(r))},{})}}},mYfJ:function(e,t,r){"use strict";r.r(t);var n,a=r("q1tI"),s=r.n(a),i=r("i8i4"),o=r.n(i),l=r("okNM"),c=r("Ez0T");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h,g,v,b,y,_=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.d,{label:gettext("Program"),options:t.programOptions,value:t.selectedProgramOption,update:function(e){t.selectedProgramOption=e}})})),O=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.d,{label:t.isTVA?gettext("Target periods"):gettext("Time periods"),options:t.frequencyOptions,disabled:t.frequencyDisabled,value:t.selectedFrequencyOption,update:function(e){t.selectedFrequencyOption=e}})})),F=Object(l.b)("filterStore")(n=Object(l.c)(n=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=d(this,f(t).call(this,e))).checkMostRecent=function(e){var t=isNaN(parseInt(r.state.mostRecentValue))?2:parseInt(r.state.mostRecentValue);r.setState({mostRecentValue:t}),r.mostRecentInputRef.current.focus()},r.handleChange=function(e){!/^[0-9]+$/.exec(e.target.value)&&e.target.value||r.setState({mostRecentValue:e.target.value})},r.handleBlur=function(e){r.state.revert||(r.props.filterStore.mostRecentValue=r.state.mostRecentValue),r.setState({focus:!1,revert:!1,mostRecentValue:r.props.filterStore.mostRecentValue})},r.handleKeyDown=function(e){13===e.keyCode?e.target.blur():27===e.keyCode&&r.setState({revert:!0},function(){r.mostRecentInputRef.current.blur()})},r.handleFocus=function(e){r.setState({focus:!0,revert:!1,mostRecentValue:r.props.filterStore.mostRecentValue})},r.mostRecentInputRef=s.a.createRef(),r.state={focus:!1,revert:!1,mostRecentValue:r.props.filterStore.mostRecentValue},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,s.a.Component),r=t,(n=[{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"form-row mb-3"},s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("div",{className:"form-check form-check-inline pt-1"},s.a.createElement("span",{className:"form-check-input"},s.a.createElement("input",{type:"radio",checked:!this.state.focus&&this.props.filterStore.showAll,disabled:this.props.filterStore.periodsDisabled,onChange:function(e){t.props.filterStore.showAll=!0}})),s.a.createElement("label",{onClick:function(e){t.props.filterStore.showAll=!0},className:"form-check-label text-nowrap"},gettext("Show all")))),s.a.createElement("div",{className:"col-sm-4 p-0"},s.a.createElement("div",{className:"form-check form-check-inline mr-1 pt-1 float-right"},s.a.createElement("span",{className:"form-check-input"},s.a.createElement("input",{type:"radio",checked:this.state.focus||this.props.filterStore.mostRecentChecked,disabled:this.props.filterStore.periodsDisabled,onChange:this.checkMostRecent})),s.a.createElement("label",{onClick:this.checkMostRecent,className:"form-check-label text-nowrap"},gettext("Most recent")))),s.a.createElement("div",{className:"col-sm-3"},s.a.createElement("input",{className:"form-control pl-3",value:this.state.focus?this.state.mostRecentValue:this.props.filterStore.mostRecentValue,ref:this.mostRecentInputRef,disabled:this.props.filterStore.periodsDisabled,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown})))}}])&&p(r.prototype,n),a&&p(r,a),t}())||n)||n,E=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.a,{label:gettext("Start"),disabled:t.periodsDisabled,value:t.startPeriodValue||"",update:function(e){t.startPeriodValue=e.target.value},options:t.startOptions})})),P=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.a,{label:gettext("End"),disabled:t.periodsDisabled,value:t.endPeriodValue||"",update:function(e){t.endPeriodValue=e.target.value},options:t.endOptions})})),k=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.b,{chainLabel:t.resultChainFilterLabel,value:t.groupBy,update:function(e){t.groupBy=e.target.value}})})),I=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.c,{label:gettext("Levels"),options:t.levelTierOptions,value:t.levelTierFilters,update:function(e){t.levelTierFilters={levels:e.filter(function(e){return"level"===e.category}).map(function(e){return e.value}),tiers:e.filter(function(e){return"tier"===e.category}).map(function(e){return e.value}),oldLevels:e.filter(function(e){return"oldLevel"===e.category}).map(function(e){return e.value})}}})})),S=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.c,{label:gettext("Sites"),options:t.siteOptions,value:t.siteFilters,update:function(e){t.siteFilters=e.map(function(e){return e.value})}})})),w=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.c,{label:gettext("Types"),options:t.indicatorTypeOptions,value:t.indicatorTypeFilters,update:function(e){t.indicatorTypeFilters=e.map(function(e){return e.value})}})})),j=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.c,{label:gettext("Sectors"),options:t.sectorOptions,value:t.sectorFilters,update:function(e){t.sectorFilters=e.map(function(e){return e.value})}})})),N=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(c.c,{label:gettext("Indicators"),options:t.indicatorOptions,value:t.indicatorFilters,update:function(e){t.indicatorFilters=e.map(function(e){return e.value})}})})),x=function(e){return s.a.createElement("button",{type:"reset",className:"btn btn-block btn-reset"+(e.isDisabled?" disabled":""),onClick:e.action},e.label)},A=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement(s.a.Fragment,null,s.a.createElement(_,null),s.a.createElement(O,null),s.a.createElement(F,null),s.a.createElement(E,null),s.a.createElement(P,null),t.resultsFramework&&s.a.createElement(k,null))})),T=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(I,null),s.a.createElement(S,null),s.a.createElement(w,null),s.a.createElement(j,null),s.a.createElement(N,null))},D=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return s.a.createElement("nav",{id:"id_iptt_report_filter"},s.a.createElement("div",{className:"p-3",id:"filter-top"},s.a.createElement("h3",{className:"filter-title text-title-case"},gettext("Report Options")),s.a.createElement(A,null)),s.a.createElement("div",{id:"filter-middle",className:"px-3 pt-3 pb-2"},s.a.createElement(T,null)),s.a.createElement("div",{id:"filter-bottom"},s.a.createElement(x,{label:gettext("Clear filters"),action:t.clearFilters.bind(t),isDisabled:!t.filtersActive})),t.programFilterData&&s.a.createElement("div",{id:"filter-extra",className:" d-flex justify-content-between no-gutters p-3"},s.a.createElement("a",{href:"/tola_management/audit_log/".concat(t.selectedProgramId,"/"),className:"btn-link"},s.a.createElement("i",{className:"fas fa-history"})," ",gettext("Change log"))))})),C=function(){return s.a.createElement("div",{className:"sidebar_wrapper"},s.a.createElement("div",{className:"collapse width show",id:"sidebar"},s.a.createElement(D,null)),s.a.createElement("div",{className:"sidebar-toggle"},s.a.createElement("a",{href:"#","data-target":"#sidebar","data-toggle":"collapse",title:gettext("Show/Hide Filters")},s.a.createElement("i",{className:"fa fa-chevron-left"}))))},R=r("4L+s");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,r){return t&&q(e.prototype,t),r&&q(e,r),e}function U(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=Object(l.c)(h=function(e){function r(e){var t;return L(this,r),(t=U(this,B(r).call(this,e))).NOT_SENT=0,t.SENDING=1,t.SENT=2,t.FAILED=3,t.handleChange=function(e){t.setState({reportName:e.target.value})},t.isDisabled=function(){return!t.props.rootStore.pinAPI.pinReady||!t.state.reportName},t.handleClick=function(){t.setState({status:t.SENDING}),t.props.rootStore.pinAPI.savePin(function(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=a,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return a}({name:t.state.reportName},t.props.rootStore.pinParams)).then(function(){t.setState({status:t.SENT}),t.props.updatePosition()}).catch(function(){t.setState({status:t.FAILED})})},t.state={reportName:"",status:t.NOT_SENT},t}return W(r,s.a.Component),M(r,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,function(){switch(e.state.status){case e.SENT:return s.a.createElement("div",{className:"form-group"},s.a.createElement("p",null,s.a.createElement("span",null,gettext("Success!  This report is now pinned to the program page"))),s.a.createElement("p",null,s.a.createElement("a",{href:e.props.rootStore.pinAPI.programPageUrl},gettext("Visit the program page now."))));case e.FAILED:return s.a.createElement("div",{className:"form-group"},s.a.createElement("p",null,s.a.createElement("span",null,gettext("Something went wrong when attempting to pin this report"))));case e.NOT_SENT:return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:""},gettext("Report name")),s.a.createElement("input",{type:"text",className:"form-control",value:e.state.reportName,onChange:e.handleChange,disabled:e.state.sending})),s.a.createElement("button",{type:"button",onClick:e.handleClick,disabled:e.isDisabled(),className:"btn btn-primary btn-block"},gettext("Pin to program page")));case e.SENDING:return s.a.createElement("div",{className:"btn btn-primary",disabled:!0},s.a.createElement("img",{src:"/static/img/ajax-loader.gif"})," ",gettext("Sending"))}}())}}]),r}())||h,H=Object(l.b)("rootStore")(g=Object(l.c)(g=function(e){function i(){var e,t;L(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=U(this,(e=B(i)).call.apply(e,[this].concat(n)))).popoverName="pin",t.getPopoverContent=function(){return s.a.createElement(z,{rootStore:t.props.rootStore,updatePosition:function(){$(t.refs.target).popover("update")}})},t}return W(i,R["a"]),M(i,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{href:"#",className:"btn btn-sm btn-secondary",ref:"target"},s.a.createElement("i",{className:"fas fa-thumbtack"}),gettext("Pin")))}}]),i}())||g)||g,Q=Object(l.c)(v=function(e){function i(){var e,t;L(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=U(this,(e=B(i)).call.apply(e,[this].concat(n)))).getCurrent=function(){t.props.excelUrl&&window.open(t.props.excelUrl,"_blank")},t.getAll=function(){t.props.fullExcelUrl&&window.open(t.props.fullExcelUrl,"_blank")},t}return W(i,s.a.Component),M(i,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.getCurrent},gettext("Current view")),s.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.getAll},gettext("All program data")))}}]),i}())||v,J=Object(l.c)(b=function(e){function i(){var e,t;L(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=U(this,(e=B(i)).call.apply(e,[this].concat(n)))).popoverName="excel",t.getPopoverContent=function(){return s.a.createElement(Q,t.props)},t}return W(i,R["a"]),M(i,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",ref:"target"},s.a.createElement("i",{className:"fas fa-download"})," Excel"))}}]),i}())||b,X=Object(l.c)(y=function(e){function i(){var e,t;L(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=U(this,(e=B(i)).call.apply(e,[this].concat(n)))).handleClick=function(){t.props.excelUrl&&window.open(t.props.excelUrl,"_blank")},t}return W(i,s.a.Component),M(i,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:this.handleClick},s.a.createElement("i",{className:"fas fa-download"})," Excel"))}}]),i}())||y,K=Object(l.b)("filterStore","rootStore")(Object(l.c)(function(e){var t=e.filterStore,r=e.rootStore;return s.a.createElement("div",{className:"page-subheader"},s.a.createElement("div",{id:"id_span_iptt_date_range",className:"subheader__title"},s.a.createElement("h2",{className:"pt-3 text-title-case"},gettext("Indicator Performance Tracking Table")),s.a.createElement("h4",{className:"pb-3"},t.startPeriod&&t.endPeriod?t.startPeriod.startLabel+" - "+t.endPeriod.endLabel:"")),s.a.createElement("div",{className:"subheader__actions"},s.a.createElement("div",{className:"btn-row"},s.a.createElement(H,null),t.isTVA?s.a.createElement(J,r.excelAPI):s.a.createElement(X,{excelUrl:r.excelAPI.excelUrl}))))})),Y=function(e){var t=e.label,r=e.styleWidth,n=r?{minWidth:"".concat(r,"px")}:{};return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase",style:n},t)},Z=function(e){var t=e.styleWidth?{minWidth:"".concat(e.styleWidth,"px")}:{};return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase td-no-side-borders",style:t},e.label)},ee=function(e){return s.a.createElement("td",{scope:"colgroup",colSpan:e.isTVA?3:1,className:"text-center title-row text-nowrap align-bottom"},s.a.createElement("span",{className:"text-uppercase"},e.period.name),e.period.range&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("small",null,e.period.range)))},te=function(){return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase text-right",style:{minWidth:"110px"}},gettext("Target"))},re=function(){return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase text-right",style:{minWidth:"110px"}},gettext("Actual"))},ne=function(){return s.a.createElement("th",{scope:"col",className:"align-bottom text-uppercase text-right",style:{minWidth:"110px"}},gettext("% met"))},ae=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(te,null),s.a.createElement(re,null),s.a.createElement(ne,null))},ie=Object(l.b)("rootStore")(Object(l.c)(function(e){var r=e.rootStore,t=r.currentProgram;return t?s.a.createElement("tr",{className:"title-row"},s.a.createElement("td",{colSpan:r.resultsFramework?8:9,id:"id_td_iptt_program_name",className:"align-bottom pt-2"},s.a.createElement("h5",{className:"m-0"},s.a.createElement("a",{href:r.currentProgramPageUrl},t.name))),s.a.createElement("td",{scope:"colgroup",colSpan:"3",className:"text-center title-row text-nowrap align-bottom text-uppercase"},gettext("Life of program")),r.reportPeriods.map(function(e,t){return s.a.createElement(ee,{isTVA:r.isTVA,key:t,period:e})})):s.a.createElement("tr",null,s.a.createElement("td",null,"Loading"))})),oe=Object(l.b)("rootStore")(Object(l.c)(function(e){var r=e.rootStore;return s.a.createElement("tr",null,s.a.createElement(Y,{styleWidth:110,align:"center",label:gettext("No.")}),s.a.createElement(Z,{styleWidth:600,label:gettext("Indicator")}),s.a.createElement(Z,null),!r.filterStore.resultsFramework&&s.a.createElement(Y,{styleWidth:90,label:gettext("Level")}),s.a.createElement(Y,{styleWidth:250,label:gettext("Unit of measure")}),s.a.createElement(Y,{label:gettext("Change")}),s.a.createElement(Y,{styleWidth:130,label:gettext("C / NC")}),s.a.createElement(Y,{styleWidth:50,label:gettext("# / %")}),s.a.createElement(Y,{label:gettext("Baseline")}),s.a.createElement(ae,null),r.reportPeriods.map(function(e,t){return r.isTVA?s.a.createElement(ae,{key:t}):s.a.createElement(re,{key:t})}))})),le=function(){return s.a.createElement("thead",{className:"thead-light"},s.a.createElement(ie,null),s.a.createElement(oe,null))},se=r("v38i");function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ue(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var pe=Object(l.b)("rootStore")(Object(l.c)(function(e){var r=e.rootStore,n=e.indicator;return s.a.createElement("td",{className:"td-no-side-borders"},s.a.createElement("button",{type:"button",className:"btn btn-link p-1 float-right",onClick:function(e){e.preventDefault();var t="/indicators/indicator_update/".concat(n.pk,"/?modal=true");$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").load(t),$("#indicator_modal_div").modal("show").on("updated.tola.indicator.save",r.indicatorUpdate.bind(r)).on("deleted.tola.indicator.save",r.indicatorDelete.bind(r)).one("hidden.bs.modal",function(e){$(e.target).off(".tola.save")})}},s.a.createElement("i",{className:"fas fa-cog"})))})),de=Object(l.b)("rootStore")(Object(l.c)(function(e){var t=e.indicator,r=e.rootStore;return s.a.createElement("td",{className:"td-no-side-borders"},s.a.createElement("button",{type:"button",className:"btn btn-link p-1 indicator-ajax-popup indicator-data",onClick:function(e){e.preventDefault(),r.loadResultsModal(t.pk)}},s.a.createElement("i",{className:"fas fa-table"})),t.name)})),fe=function(e){var t=e.value,r=e.resultCell,n=ue(e,["value","resultCell"]),a=t||0===t?t:se.b;return r&&!0===r?s.a.createElement("td",n,a):s.a.createElement("td",ce({className:"td-no-side-borders"},n),a)},me=function(e){var t=e.value,r=ue(e,["value"]);return t=null!=t?"".concat(t,"%"):null,s.a.createElement(fe,ce({value:t,align:"right"},r))},he=function(e){var t=e.value,r=ue(e,["value"]);return s.a.createElement(fe,ce({value:t,align:"right"},r))},ge=function(e){var t=e.value;e.resultCell,ue(e,["value","resultCell"]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(he,{value:t.target}),s.a.createElement(he,{value:t.actual}),s.a.createElement(me,{value:t.percent_met}))},ve=function(e){var t=e.value;e.resultCell,ue(e,["value","resultCell"]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(me,{value:t.target}),s.a.createElement(me,{value:t.actual}),s.a.createElement(me,{value:t.percent_met}))},be=Object(l.b)("rootStore","reportStore")(Object(l.c)(function(e){var t,r,n=e.rootStore,a=(e.reportStore,e.indicator);r=a.isPercent?(t=me,n.isTVA?ve:me):(t=he,n.isTVA?ge:he);var i=null===a.isCumulative?null:a.isCumulative?gettext("Cumulative"):gettext("Non-cumulative"),o=a.number;o&&0<o.length&&":"==o.slice(-1)&&(o=o.slice(0,-1));var l=n.getReportData(a.pk);return s.a.createElement("tr",null,s.a.createElement(fe,{value:o}),s.a.createElement(de,{indicator:a}),s.a.createElement(pe,{indicator:a}),!n.resultsFramework&&s.a.createElement(fe,{value:a.oldLevelDisplay}),s.a.createElement(fe,{value:a.unitOfMeasure}),s.a.createElement(fe,{value:a.directionOfChange||gettext("N/A"),align:"center"}),s.a.createElement(fe,{value:i||gettext("N/A")}),s.a.createElement(fe,{value:a.isPercent?"%":"#",align:"center"}),null===a.baseline?s.a.createElement(fe,{value:gettext("N/A"),align:"right"}):s.a.createElement(t,{value:a.baseline}),l&&s.a.createElement(s.a.Fragment,null,s.a.createElement(t,{value:l.lopTarget}),s.a.createElement(t,{value:l.lopActual}),s.a.createElement(me,{value:l.lopMet}),l.periodValues&&n.periodValues(a.pk).map(function(e,t){return s.a.createElement(r,{value:e,key:t,resultCell:!0})})))})),ye=Object(l.b)("rootStore")(Object(l.c)(function(e){var t=e.rootStore,r=e.children;return s.a.createElement("tr",null,s.a.createElement("td",{colSpan:t.reportColumnWidth,className:"iptt-level-row"},r))})),_e=function(e){var t=e.level;return s.a.createElement(ye,null,t.tierNumber,": ",t.name)},Oe=function(){return s.a.createElement(ye,null,gettext("Indicators unassigned to a results framework level"))},Fe=function(e){var t=e.level,r=e.indicators;return s.a.createElement(s.a.Fragment,null,t?s.a.createElement(_e,{level:t}):r&&0<r.length&&s.a.createElement(Oe,null),r.map(function(e,t){return s.a.createElement(be,{indicator:e,levelCol:!1,key:t})}))},Ee=Object(l.b)("rootStore","filterStore")(Object(l.c)(function(e){var t=e.rootStore;e.filterStore;return s.a.createElement("tbody",null,t.levelRows?t.levelRows.map(function(e,t){return s.a.createElement(Fe,{level:e.level,indicators:e.indicators,key:t})}):t.indicatorRows.map(function(e,t){return s.a.createElement(be,{indicator:e,key:t})}))})),Pe=function(){return s.a.createElement("main",{className:"iptt_table_wrapper"},s.a.createElement("div",{id:"id_div_top_iptt_report"},s.a.createElement(K,null),s.a.createElement("table",{className:"table table-sm table-bordered table-hover table__iptt",id:"iptt_table"},s.a.createElement(le,null),s.a.createElement(Ee,null))))},ke=r("2vnA"),Ie=r("1d5Q"),Se=r("OtFd"),we=r("My+N"),je=Object(we.a)(we.b,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{number:e.number||null,sectorPk:e.sector_pk||null,_typePks:Object(ke.n)(new Set(e.indicator_type_pks||[])),hasIndicatorType:function(e){return!isNaN(parseInt(e))&&this._typePks.has(parseInt(e))},_sitePks:Object(ke.n)(new Set(e.site_pks||[])),hasSite:function(e){return!isNaN(parseInt(e))&&this._sitePks.has(parseInt(e))}}}),Ne=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return[function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{pk:parseInt(e.pk),name:e.name,ontology:e.ontology||null,tierName:e.tier_name}}].concat(t).reduce(function(e,t){return Object(ke.i)(e,t(r))},{})}}(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{tierPk:isNaN(parseInt(e.tier_pk))?null:parseInt(e.tier_pk),tierDepth:parseInt(e.tier_depth),showForTier:function(e){return!isNaN(parseInt(e))&&parseInt(e)===this.tierPk},chainPk:isNaN(parseInt(e.chain_pk))?null:parseInt(e.chain_pk),_alwaysShowChain:!1,showForChain:function(e){return this._alwaysShowChain||!isNaN(parseInt(e))&&parseInt(e)===this.chainPk},get isResultChainLevel(){return this.chainPk&&this.chainPk==this.pk},get tierNumber(){return"".concat(this.tierName)+(this.ontology?" ".concat(this.ontology):"")},get resultChainLabel(){var e=gettext("%s and sub-levels: %s");return interpolate(e,[this.tierNumber,this.name])}}});function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ae(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Te=Object(Se.a)(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{periods:t.periods.map(function(e){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{_frequency:parseInt(e.frequency),_name:e.name,label:e.label,start:new Date(e.start),startLabel:e.start_label,end:new Date(e.end),endLabel:e.end_label,past:Boolean(e.past),year:e.year,get range(){return 7==this._frequency?null:"".concat(this.startLabel," – ").concat(this.endLabel)},get name(){return 7==this._frequency?"".concat(this._name," ").concat(this.year):this._name}}}(function(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=a,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return a}({},e,{frequency:t.frequency}))}),years:Ae(new Set(t.periods.map(function(e){return e.year}))).sort()}}),De=Object(Ie.a)(Ie.d,Ie.c,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{frequencies:Object(ke.n)(new Set((e.frequencies||[]).map(function(e){return parseInt(e)}).filter(function(e){return!isNaN(e)}))),periodRanges:Object(ke.n)(new Map(Object.entries(e.period_date_ranges||{}).map(function(e){var t=xe(e,2),r=t[0],n=t[1],a=parseInt(r);return[a,Te({frequency:a,periods:n})]}))),validFrequency:function(e){return!isNaN(parseInt(e))&&this.frequencies.has(parseInt(e))},resultChainLabel:e.result_chain_label,indicators:Object(ke.n)(new Map((e.indicators||[]).map(function(e){return je(e)}).map(function(e){return[e.pk,e]}))),levels:Object(ke.n)(new Map((e.levels||[]).map(function(e){return Ne(e)}).map(function(e){return[e.pk,e]}))),tiers:Object(ke.n)(new Map((e.tiers||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.name,depth:e.tier_depth}]}))),oldLevels:Object(ke.n)(new Map((e.old_levels||[]).map(function(e){return[parseInt(e.pk),{pk:e.pk,name:e.name}]}))),sectors:Object(ke.n)(new Map((e.sectors||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.name}]}))),sites:Object(ke.n)(new Map((e.sites||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.name}]}))),indicatorTypes:Object(ke.n)(new Map((e.indicator_types||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.name}]}))),deleteIndicator:function(t){var r=this;return isNaN(parseInt(t))?this.updateOrder():this.updateOrder().then(function(e){r.indicators.delete(parseInt(t))})}}}),Ce=r("wgi2"),Re=r("0pHI");function Ve(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Le="?"+[].concat(["frequency","start","end","levels","types","sites","sectors","indicators","tiers","groupby","mr"],["timeframe","numrecentperiods","numrecentcount","start_period","end_period"]).join("&"),qe=[{name:"iptt",path:"/iptt_report/:programId<\\d+>",children:[{name:"timeperiods",path:"/timeperiods?timeperiods"},{name:"tva",path:"/targetperiods?targetperiods"}]},{name:"ipttExcel",path:"/iptt_api/iptt_excel?fullTVA&reportType&programId"}],Me=function(e){return"string"==typeof e||e instanceof String?[parseInt(e)]:Array.isArray(e)?e.map(function(e){return parseInt(e)}):Number.isInteger(e)?e:isNaN(parseInt(e))?[]:[parseInt(e)]},Ue=function(){var e=Object(Ce.b)(qe,{trailingSlashMode:"always"});return e.setRootPath(Le),e.usePlugin(Object(Re.a)({useHash:!1,base:"/indicators"})),e.start(),ke.n.object({_router:e,get isTVA(){return"iptt.tva"===this._router.getState().name},get programId(){return this._router.getState().params.programId},get frequency(){var e=this._router.getState().params,t=e.frequency,r=e.timeperiods,n=e.targetperiods;Ve(e,["frequency","timeperiods","targetperiods"]);return isNaN(parseInt(t))?isNaN(parseInt(r))?isNaN(parseInt(n))?null:parseInt(n):parseInt(r):parseInt(t)},get start(){return this._router.getState().params.start},get end(){return this._router.getState().params.end},get timeframe(){return 2==this._router.getState().params.timeframe?{mostRecent:this._router.getState().params.numrecentperiods}:1==this._router.getState().params.timeframe&&{showAll:!0}},get mr(){return 1==this._router.getState().params.mr},get groupBy(){return this._router.getState().params.groupby},get levels(){return Me(this._router.getState().params.levels)},get tiers(){return Me(this._router.getState().params.tiers)},get sectors(){return Me(this._router.getState().params.sectors)},get sites(){return Me(this._router.getState().params.sites)},get types(){return Me(this._router.getState().params.types)},get indicators(){return Me(this._router.getState().params.indicators)},updateParams:function(e){var t=e.tva,r=Ve(e,["tva"]),n=t?"iptt.tva":"iptt.timeperiods";this._router.buildPath(n,r)!==this._router.getState().path&&this._router.navigate(n,r,{replace:!0})},get queryParams(){return this._router.getState().params},getExcelUrl:function(e){var t=e.tva,r=Ve(e,["tva"]);return this._router.buildUrl("ipttExcel",function(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=a,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return a}({},r,{reportType:t?se.j:se.g,fullTVA:!1}))},getFullExcelUrl:function(e){var t=e.programId,r=e.groupby;Ve(e,["programId","groupby"]);return this._router.buildUrl("ipttExcel",{programId:t,groupBy:r,fullTVA:!0})}})},$e=r("5/4V");function Be(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function We(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ze=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Ue(),r=ke.n.object({_programsListStore:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return ke.n.object({_allPrograms:new Map(e.filter(function(e){var t=Ge(e,3),r=t[0];return t[1],t[2],!isNaN(parseInt(r))}).map(function(e){var t=Ge(e,3),r=t[0],n=t[1],a=t[2];return[parseInt(r),{pk:parseInt(r),name:n,tvaCount:parseInt(a)}]})),listPrograms:function(){return Array.from(this._allPrograms.values())},listTvaPrograms:function(){return this.listPrograms().filter(function(e){return 0<e.tvaCount})},getProgram:function(e){return isNaN(parseInt(e))?null:this._allPrograms.get(parseInt(e))},hasProgram:function(e){return!isNaN(parseInt(e))&&this._allPrograms.has(parseInt(e))}})}(e.programs_list||[]),_programFilterDataStore:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=De(e);return ke.n.object({_programs:new Map([[t.pk,t]]),getProgramFilterData:function(e){return this._programs.has(parseInt(e))?this._programs.get(parseInt(e)):null},loadProgramFilterData:function(e){var t=this;return isNaN(parseInt(e))?Promise.reject("invalid program Id"):$e.a.ipttFilterData(e).then(function(e){return De(e)}).then(function(e){Object(ke.p)(function(){return t._programs.set(e.pk,e),e})})}})}(e.program_data),_router:t,_reportType:null,_selectedProgramId:null,_selectedFrequency:null,_start:null,_end:null,_mostRecentForce:null,_groupBy:se.c,_indicatorFilters:{},get isTVA(){return this._reportType===se.j},get selectedProgramId(){return this._programsListStore.hasProgram(this._selectedProgramId)?this._selectedProgramId:null},setProgramId:function(e){var t=this;if(e=parseInt(e),isNaN(e))this._selectedProgramId=null;else if(e!==this._selectedProgramId){this.clearFilters();var r=this.selectedFrequency,n={mostRecent:""!=this.mostRecentValue?this.mostRecentValue:null,showAll:this.showAll,start:this.startPeriodValue,end:this.endPeriodValue};return this._selectedProgramId=e,this.updateProgramFilterData().then(function(){t.setFrequency(r),t.setPeriods(n)})}},get programOptions(){return(this.isTVA?this._programsListStore.listTvaPrograms():this._programsListStore.listPrograms()).map(function(e){return{value:e.pk,label:e.name}})},get selectedProgramOption(){var e=this._programsListStore.getProgram(this.selectedProgramId);return e&&null!==e?{value:e.pk,label:e.name}:se.a},set selectedProgramOption(e){this.setProgramId(e.value)},get programFilterData(){return this._programFilterDataStore.getProgramFilterData(this.selectedProgramId)},updateProgramFilterData:function(){return this._programFilterDataStore.loadProgramFilterData(this.selectedProgramId)},get _frequencyLabels(){return this.isTVA?se.k:se.h},get frequencyDisabled(){return null===this.selectedProgramId},get frequencyOptions(){var t=this;return this.programFilterData?(this.isTVA?Array.from(this.programFilterData.frequencies).sort():se.i).map(function(e){return{value:e,label:t._frequencyLabels[e]}}):[se.a]},get selectedFrequency(){return this.selectedProgramId&&!isNaN(parseInt(this._selectedFrequency))?parseInt(this._selectedFrequency):null},setFrequency:function(e){if(e=parseInt(e),isNaN(e))return this._selectedFrequency=null,!1;if(this.isTVA&&!this.programFilterData.frequencies.has(e)?e=parseInt(Array.from(this.programFilterData.frequencies).sort()[0]):this.isTVA||se.i.includes(e)||(e=parseInt(se.i[0])),e!==this._selectedFrequency){var t={mostRecent:""!=this.mostRecentValue?this.mostRecentValue:null,showAll:this.showAll,start:this.startPeriodValue,end:this.endPeriodValue};return this._selectedFrequency=e,this.setPeriods(t),!0}},get selectedFrequencyOption(){return this.programFilterData&&null!==this.selectedFrequency?{value:this.selectedFrequency,label:this._frequencyLabels[this.selectedFrequency]}:se.a},set selectedFrequencyOption(e){this.setFrequency(e.value)},get periodsDisabled(){return!this.programFilterData||!se.i.includes(this.selectedFrequency)},get periodRange(){return this.periodsDisabled?{years:[],options:[se.a]}:this.programFilterData.periodRanges.get(this.selectedFrequency)},get startOptions(){var e=this;if(se.e.includes(this.selectedFrequency))return[se.a];if(3==this.selectedFrequency)return this.periodRange.options;var t=this.periodRange.years.map(function(t){return{label:t,options:e.periodRange.options.filter(function(e){return e.year==t})}}).filter(function(e){return 0<e.options.length});return 0==t.length?[se.a]:1==t.length?t[0].options:t},get endOptions(){var t=this;if(se.e.includes(this.selectedFrequency))return[se.a];var e=this.periodRange.options.filter(function(e){return!t.startPeriodValue||e.value>=t.startPeriodValue});if(3==this.selectedFrequency)return e;var r=this.periodRange.years.map(function(t){return{label:t,options:e.filter(function(e){return e.year==t})}}).filter(function(e){return 0<e.options.length});return 0==r.length?[se.a]:1==r.length?r[0].options:r},get _lastPeriod(){return this.periodsDisabled?null:this.programFilterData.periodRanges.get(this.selectedFrequency).periodCount-1},get _currentPeriod(){return this.periodsDisabled?null:this.programFilterData.periodRanges.get(this.selectedFrequency).currentPeriod},get mostRecentChecked(){return""!==this.mostRecentValue},get mostRecentValue(){return this.periodsDisabled||this.showAll||this.endPeriodValue!==this._currentPeriod?"":this.endPeriodValue-this.startPeriodValue+1},get showAll(){return!this.periodsDisabled&&!this._mostRecentForce&&(0===this.startPeriodValue&&this._lastPeriod&&this.endPeriodValue==this._lastPeriod)},set showAll(e){this._mostRecentForce=!1,this.startPeriodValue=0,this.endPeriodValue=this._lastPeriod},set mostRecentValue(e){if(this.startPeriodValue=0,this.endPeriodValue=this._currentPeriod,this.startPeriodValue=this.endPeriodValue-e+1,this.showAll){this._mostRecentForce=!0;var r=this;Object(ke.o)(function(){return[r.mostRecentChecked,r.startPeriodValue,r.endPeriodValue]},function(e,t){r._mostRecentForce=!1,t.dispose()})}},get startPeriod(){return this.programFilterData&&se.e.includes(this.selectedFrequency)?this.programFilterData.periodRanges.get(this.selectedFrequency).periods[0]:this.programFilterData&&this.selectedFrequency&&null!==this._start?this.programFilterData.periodRanges.get(this.selectedFrequency).periods[this._start]:null},get startPeriodValue(){return this.periodsDisabled?null:this._start},set startPeriodValue(e){e=isNaN(parseInt(e))?0:parseInt(e),null!==this._lastPeriod&&(this._start=Math.max(0,Math.min(this._lastPeriod,e))),this.endPeriodValue&&this.startPeriodValue>this.endPeriodValue&&(this.endPeriodValue=this.startPeriodValue)},get endPeriod(){return this.programFilterData&&se.e.includes(this.selectedFrequency)?this.programFilterData.periodRanges.get(this.selectedFrequency).periods.slice(-1).pop():this.programFilterData&&this.selectedFrequency&&null!==this._end?this.programFilterData.periodRanges.get(this.selectedFrequency).periods[this._end]:null},get endPeriodValue(){return this.periodsDisabled?null:this._end},set endPeriodValue(e){e=isNaN(parseInt(e))?this._lastPeriod:parseInt(e),null!==this._lastPeriod&&(this._end=Math.max(this.startPeriodValue||0,Math.min(this._lastPeriod,e)))},setTimeframe:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.mostRecent,r=void 0===t?null:t,n=e.showAll,a=void 0===n?null:n;r&&(this.mostRecentValue=r),a&&(this.showAll=!0)},setPeriods:function(e){var t=e.mostRecent,r=void 0===t?null:t,n=e.showAll,a=void 0===n?null:n,i=e.start,o=void 0===i?null:i,l=e.end,s=void 0===l?null:l;r?this.mostRecentValue=r:a?this.showAll=!0:(this.startPeriodValue=o,this.endPeriodValue=s)},get resultsFramework(){return this.programFilterData&&this.programFilterData.resultsFramework},get resultChainFilterLabel(){return this.programFilterData?this.programFilterData.resultChainFilterLabel:null},get groupBy(){return this.resultsFramework?this._groupBy:null},set groupBy(e){this._groupBy=parseInt(e)===se.d?se.d:se.c},get allLevels(){return(this.resultsFramework?this.groupBy===se.c?this.programFilterData.levelsInChainOrder:this.programFilterData.levelsInLevelOrder:[])||[]},get levels(){return this.allLevels},get _levelOptions(){var t=this.resultsFramework?[].concat(We(this.getAllIndicators("levels").map(function(e){return e.levelPk})),We(this._indicatorFilters.levels)):[];return this.levels.filter(function(e){return e.isResultChainLevel&&t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.resultChainLabel,category:"level"}})},get _tierOptions(){var t=this,r=this.resultsFramework?[].concat(We(this.getAllIndicators("levels").filter(function(e){return e.levelPk}).map(function(e){return t.programFilterData.levels.get(e.levelPk).tierPk})),We(this._indicatorFilters.tiers)):[];return this.programFilterData?(Array.from(this.programFilterData.tiers.values())||[]).filter(function(e){return r.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name,category:"tier"}}):[]},get _oldLevelOptions(){var t=this.resultsFramework?[]:[].concat(We(this.getAllIndicators("levels").map(function(e){return e.levelPk})),We(this._indicatorFilters.oldLevels));return this.programFilterData?(Array.from(this.programFilterData.oldLevels.values())||[]).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name,category:"oldLevel"}}):[se.a]},get levelTierOptions(){if(!this.programFilterData)return[se.a];if(this.programFilterData.resultsFramework){var e=[{label:"",options:this._tierOptions},{label:this.programFilterData.resultChainLabel,options:this._levelOptions}].filter(function(e){return e.options&&0<e.options.length});return e&&0<e.length?e:[se.a]}return this._oldLevelOptions&&0<this._oldLevelOptions.length?this._oldLevelOptions:[se.a]},get levelTierFilters(){var t=this;return[].concat(We(this._tierOptions.filter(function(e){return t._indicatorFilters.tiers.includes(e.value)})),We(this._levelOptions.filter(function(e){return t._indicatorFilters.levels.includes(e.value)})),We(this._oldLevelOptions.filter(function(e){return t._indicatorFilters.oldLevels.includes(e.value)})))},set levelTierFilters(e){var t=void 0===e?{}:e,r=t.levels,n=void 0===r?[]:r,a=t.tiers,i=void 0===a?[]:a,o=t.oldLevels,l=void 0===o?[]:o;0<i.length&&0<n.length&&(0<this._indicatorFilters.levels.length?n=[]:i=[]),this._indicatorFilters.tiers=this.resultsFramework?i:[],this._indicatorFilters.levels=this.resultsFramework?n:[],this._indicatorFilters.oldLevels=this.resultsFramework?[]:l},get sectorOptions(){var t=[].concat(We(new Set(this.getAllIndicators("sectors").filter(function(e){return e.sectorPk}).map(function(e){return e.sectorPk}))),We(this._indicatorFilters.sectors));return this.programFilterData?Array.from(this.programFilterData.sectors.values()).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}}):[se.a]},get sectorFilters(){var t=this;return this.sectorOptions.filter(function(e){return t._indicatorFilters.sectors.includes(e.value)})},set sectorFilters(e){void 0===e&&(e=[]),this._indicatorFilters.sectors=e.map(function(e){return parseInt(e)})},get siteOptions(){var t=[].concat(We(new Set(this.getAllIndicators("sites").map(function(e){return Array.from(e._sitePks.values())}).reduce(function(e,t){return e.concat(t)},[]))),We(this._indicatorFilters.sites));return this.programFilterData?Array.from(this.programFilterData.sites.values()).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}}):[se.a]},get siteFilters(){var t=this;return this.siteOptions.filter(function(e){return t._indicatorFilters.sites.includes(e.value)})},set siteFilters(e){void 0===e&&(e=[]),this._indicatorFilters.sites=e.map(function(e){return parseInt(e)})},get indicatorTypeOptions(){var t=[].concat(We(new Set(this.getAllIndicators("types").map(function(e){return Array.from(e._typePks.values())}).reduce(function(e,t){return e.concat(t)},[]))),We(this._indicatorFilters.indicatorTypes));return this.programFilterData?Array.from(this.programFilterData.indicatorTypes.values()).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}}):[se.a]},get indicatorTypeFilters(){var t=this;return this.indicatorTypeOptions.filter(function(e){return t._indicatorFilters.indicatorTypes.includes(e.value)})},set indicatorTypeFilters(e){void 0===e&&(e=[]),this._indicatorFilters.indicatorTypes=e.map(function(e){return parseInt(e)})},_filterFrequency:function(e){var t=this;return e=e||[],this.isTVA&&(e=e.filter(function(e){return e.frequency==t.selectedFrequency})),e},_filterLevelTiers:function(e){var r=this;return e=e||[],this.resultsFramework&&this._indicatorFilters.tiers&&0<this._indicatorFilters.tiers.length&&(e=e.filter(function(t){return t.levelPk&&r._indicatorFilters.tiers.some(function(e){return r.programFilterData.levels.get(t.levelPk).showForTier(e)})})),this.resultsFramework&&this._indicatorFilters.levels&&0<this._indicatorFilters.levels.length&&(e=e.filter(function(t){return t.levelPk&&r._indicatorFilters.levels.some(function(e){return r.programFilterData.levels.get(t.levelPk).showForChain(e)})})),!this.resultsFramework&&this._indicatorFilters.oldLevels&&0<this._indicatorFilters.oldLevels.length&&(e=e.filter(function(e){return e.levelPk&&r._indicatorFilters.oldLevels.includes(e.levelPk)})),e},_filterSites:function(e){var r=this;return this._indicatorFilters.sites&&0<this._indicatorFilters.sites.length&&(e=e.filter(function(t){return r._indicatorFilters.sites.some(function(e){return t.hasSite(e)})})),e},_filterIndicatorTypes:function(e){var r=this;return this._indicatorFilters.indicatorTypes&&0<this._indicatorFilters.indicatorTypes.length&&(e=e.filter(function(t){return r._indicatorFilters.indicatorTypes.some(function(e){return t.hasIndicatorType(e)})})),e},_filterSectors:function(e){var t=this;return this._indicatorFilters.sectors&&0<this._indicatorFilters.sectors.length&&(e=e.filter(function(e){return e.sectorPk&&t._indicatorFilters.sectors.includes(e.sectorPk)})),e},_filterIndicatorFilter:function(e){var t=this;return e=e||[],this._indicatorFilters.indicators&&0<this._indicatorFilters.indicators.length&&(e=e.filter(function(e){return t._indicatorFilters.indicators.includes(e.pk)})),e},filterIndicators:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return e=e||[],e=this._filterFrequency(e),"levels"!=t&&(e=this._filterLevelTiers(e)),"sites"!=t&&(e=this._filterSites(e)),"types"!=t&&(e=this._filterIndicatorTypes(e)),"sectors"!=t&&(e=this._filterSectors(e)),"indicators"!=t&&(e=this._filterIndicatorFilter(e)),e},getUnassignedIndicators:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.filterIndicators(this.programFilterData.unassignedIndicators,e)},getLevelIndicators:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.filterIndicators((this.programFilterData.levelIndicators.get(e)||[]).map(function(e){return t.programFilterData.indicators.get(e)}),r)||[]},getAllIndicators:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(this.programFilterData){var t=this.groupBy===se.c?this.programFilterData.indicatorsInChainOrder:this.programFilterData.indicatorsInLevelOrder;return this.filterIndicators(t,e)}return[]},getLevelIndicatorGroups:function(){var r=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.resultsFramework?[].concat(We(this.levels.map(function(e){return{level:e,indicators:r.getLevelIndicators(e.pk,n)}})),[{level:null,indicators:this.getUnassignedIndicators(n)}]):(Array.from(this.programFilterData.oldLevels.values())||[]).map(function(t){return{level:t,indicators:r.getAllIndicators(n).filter(function(e){return e.levelPk==t.pk})}})},get indicatorOptions(){if(this.programFilterData){var e=this.getLevelIndicatorGroups("indicators");return 0===(e=(e=this.resultsFramework?e.map(function(e){return{label:e.level?e.level.tierNumber:gettext("Indicators unassigned to  a results framework level"),options:e.indicators.map(function(e){return{value:e.pk,label:e.name}})}}):e.map(function(e){return{label:e.level.name,options:e.indicators.map(function(e){return{value:e.pk,label:e.name}})}})).filter(function(e){return e.options&&0<e.options.length})).length?[se.a]:1===e.length?e[0].options:e}return[se.a]},get indicatorFilters(){var t=this,e=this.indicatorOptions;return e&&0!=e.length?(e[0].options&&0<e[0].options.length&&(e=e.reduce(function(e,t){return[].concat(We(e),We(t.options))},[])),e.filter(function(e){return t._indicatorFilters.indicators.includes(e.value)})):[]},set indicatorFilters(e){void 0===e&&(e=[]),this._indicatorFilters.indicators=e.map(function(e){return parseInt(e)})},clearFilters:function(){this._indicatorFilters={levels:[],tiers:[],oldLevels:[],sectors:[],sites:[],indicatorTypes:[],indicators:[]}},get filtersActive(){return 0<Object.values(this._indicatorFilters).reduce(function(e,t){return e+t.length},0)},get pathParams(){var t={tva:this.isTVA,programId:this.selectedProgramId,frequency:this.selectedFrequency,start:this.startPeriodValue,end:this.endPeriodValue,mr:this._mostRecentForce?1:null,groupby:this.groupBy,levels:(this.resultsFramework?this.levelTierFilters.filter(function(e){return"level"==e.category}):this.levelTierFilters.filter(function(e){return"oldLevel"==e.category})).map(function(e){return e.value}),tiers:this.resultsFramework?this.levelTierFilters.filter(function(e){return"tier"==e.category}).map(function(e){return e.value}):null,sectors:this.sectorFilters.map(function(e){return e.value}),sites:this.siteFilters.map(function(e){return e.value}),types:this.indicatorTypeFilters.map(function(e){return e.value}),indicators:this.indicatorFilters.map(function(e){return e.value})};return Object.keys(t).forEach(function(e){return null===t[e]&&delete t[e]}),t},updateParams:function(e){e.programId&&this._router.updateParams(e)},get queryString(){var e=this.pathParams,t=(e.tva,e.programId,Be(e,["tva","programId"]));return Object.entries(t).filter(function(e){var t=Ge(e,2),r=(t[0],t[1]);return(0===r||r)&&(!Array.isArray(r)||0<r.length)}).map(function(e){var t=Ge(e,2),r=t[0],n=t[1];return Array.isArray(n)?n.map(function(e){return"".concat(r,"=").concat(e)}).join("&"):"".concat(r,"=").concat(n)}).reduce(function(e,t){return e.concat(t)},[]).join("&")},get excelUrl(){return!!this.selectedFrequency&&this._router.getExcelUrl(this.pathParams)},get fullExcelUrl(){return!!this.selectedProgramId&&this._router.getFullExcelUrl(this.pathParams)}});r._reportType=r._router.isTVA?se.j:se.g,r._selectedProgramId=r._router.programId,r._selectedFrequency=r._router.frequency,r._router.timeframe?r.setTimeframe(r._router.timeframe):(r.startPeriodValue=r._router.start,r.endPeriodValue=r._router.end),r._mostRecentForce=r._router.mr,r.groupBy=r._router.groupBy,r.sectorFilters=r._router.sectors,r.siteFilters=r._router.sites,r.indicatorTypeFilters=r._router.types,r.indicatorFilters=r._router.indicators,r.levelTierFilters={levels:r._router.levels,tiers:r._router.tiers,oldLevels:r._router.levels};Object(ke.o)(function(){return r.pathParams},function(e){return r.updateParams(e)},{fireImmediately:!0});return r};function He(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qe(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Je=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(ke.n)({pk:parseInt(t.pk),frequency:parseInt(e),_lopTarget:t.lop_target,get lopTarget(){return this._lopTarget},_lopActual:t.lop_actual,get lopActual(){return this._lopActual},_lopMet:t.lop_percent_met,get lopMet(){return this._lopMet},_reportData:Object(ke.n)(new Map((t.report_data||[]).map(function(e){return[parseInt(e.index),e]}))),get periodValues(){return Array.from(this._reportData.values())}})};function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ke(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ye=new function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=Object(ke.n)({_filterStore:ze(e),get filterStore(){return this._filterStore},_reportStore:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Object(ke.n)({_reportMap:ke.n.map([].concat(Qe(se.i),Qe(se.e)).sort().map(function(e){return[e,ke.n.map()]})),getReport:function(e){return this._reportMap.get(e)},programStatus:ke.n.map([].concat(Qe(se.i),Qe(se.e)).sort().map(function(e){return[e,ke.n.map()]})),callForReportData:function(e){var t=this,r=e.update,n=He(e,["update"]),a=parseInt(n.programPk),i=parseInt(n.frequency);return 1===this.programStatus.get(i).get(a)?Promise.resolve(!1):r||2!==this.programStatus.get(i).get(a)?(this.programStatus.get(i).set(a,1),$e.a.getIPTTReportData(n).then(function(e){Object(ke.p)(function(){t.updateReportData(e)})})):Promise.resolve(!1)},updateReportData:function(e){var r=this,n=parseInt(e.report_frequency);return(e.report_data||[]).forEach(function(e){var t=Je(n,e);r._reportMap.get(n).set(t.pk,t)}),this.programStatus.get(n).set(parseInt(e.program_pk),2),e}});if(e&&e.report_data){var r=parseInt(e.report_frequency),n=t.getReport(r);(e.report_data||[]).map(function(e){return Je(r,e)}).forEach(function(e){return n.set(e.pk,e)}),t.programStatus.get(r).set(parseInt(e.program_pk),2)}return t}(e.report||{}),get reportStore(){return this._reportStore},get currentReport(){return this.reportStore.getReport(this.filterStore.selectedFrequency)},loadReportData:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).update,t=void 0!==e&&e;return this.reportStore.callForReportData({programPk:this.filterStore.selectedProgramId,frequency:this.filterStore.selectedFrequency,reportType:this.filterStore.isTVA?se.j:se.g,update:t})},get pinParams(){return{program:this.filterStore.selectedProgramId,report_type:this.filterStore.isTVA?"targetperiods":"timeperiods",query_string:this.filterStore.queryString}},get pinAPI(){return{programPageUrl:$e.a.getProgramPageUrl(this.filterStore.selectedProgramId),pinReady:!0,pinParams:this.pinParams,savePin:function(e){return $e.a.savePinnedReport(e)}}},get excelAPI(){return{excelUrl:this.filterStore.excelUrl,fullExcelUrl:this.filterStore.fullExcelUrl}},get currentProgram(){return this.filterStore.programFilterData},get currentProgramPageUrl(){return $e.a.getProgramPageUrl(this.currentProgram.pk)},get isTVA(){return this.filterStore.isTVA},get resultsFramework(){return this.filterStore.resultsFramework},get levelRows(){var t=this;return!!(this.filterStore.resultsFramework&&0<this.filterStore.allLevels.length)&&this.filterStore.getLevelIndicatorGroups().filter(function(e){return 0<e.indicators.length||!t.filterStore.filtersActive&&null!==e.level&&1===e.level.tierDepth})},get indicatorRows(){return this.filterStore.getAllIndicators()},get reportPeriods(){return this.currentProgram&&this.filterStore.selectedFrequency&&1!==this.filterStore.selectedFrequency?2==this.filterStore.selectedFrequency?this.currentProgram.periodRanges.get(this.filterStore.selectedFrequency).periods:this.currentProgram.periodRanges.get(this.filterStore.selectedFrequency).periods.slice(this.filterStore.startPeriodValue,this.filterStore.endPeriodValue+1):[]},getReportData:function(e){return this.currentReport&&this.currentReport.has(parseInt(e))?this.currentReport.get(parseInt(e)):{}},periodValues:function(e){var t=this.currentReport.has(parseInt(e))?2==this.filterStore.selectedFrequency?this.currentReport.get(parseInt(e)).periodValues:this.currentReport.get(parseInt(e)).periodValues.slice(this.filterStore.startPeriodValue,this.filterStore.endPeriodValue+1):[];return t&&!this.isTVA&&(t=t.map(function(e){return e.actual})),t},get reportColumnWidth(){return 8+(!this.resultsFramework&&1)+3+this.reportPeriods.length*(this.isTVA?3:1)},loadResultsModal:function(e){$e.a.indicatorResultsTable(e).then(function(e){$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").html(e),$("#indicator_modal_div").modal("show")})},indicatorUpdate:function(e,t){var r=this;return t.indicatorId,Ke(t,["indicatorId"]),this.filterStore.updateProgramFilterData().then(function(){r.loadReportData({update:!0})})},indicatorDelete:function(e,t){var r=t.indicatorId;Ke(t,["indicatorId"]),this.filterStore.programFilterData.deleteIndicator(r)}});Object(ke.o)(function(){return[a.filterStore.selectedProgramId,a.filterStore.selectedFrequency]},function(e){var t=Xe(e,2),r=t[0],n=t[1];r&&n&&a.loadReportData()},{fireImmediately:!0});return a}(reactContext);o.a.render(s.a.createElement(l.a,{rootStore:Ye,filterStore:Ye.filterStore,reportStore:Ye.reportStore},s.a.createElement(function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(C,null),s.a.createElement(Pe,null))},null)),document.querySelector("#id_div_content"))},v38i:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,"j",function(){return i}),r.d(t,"g",function(){return o}),r.d(t,"i",function(){return l}),r.d(t,"e",function(){return s}),r.d(t,"k",function(){return c}),r.d(t,"h",function(){return u}),r.d(t,"c",function(){return p}),r.d(t,"d",function(){return d}),r.d(t,"f",function(){return f});var n={value:null,label:"---------"},a="—",i=1,o=2,l=[3,4,5,6,7],s=[1,2],c=Object.freeze({1:gettext("Life of Program (LoP) only"),2:gettext("Midline and endline"),3:gettext("Annual"),4:gettext("Semi-annual"),5:gettext("Tri-annual"),6:gettext("Quarterly"),7:gettext("Monthly")}),u=Object.freeze({3:gettext("Years"),4:gettext("Semi-annual periods"),5:gettext("Tri-annual periods"),6:gettext("Quarters"),7:gettext("Months")}),p=1,d=2;"undefined"!=typeof gettext&&gettext;var f=Object.freeze({noFilter:0,missingTarget:1,missingResults:2,missingEvidence:3,aboveTarget:5,belowTarget:6,onTarget:7})}},[["mYfJ",0,1]]]);