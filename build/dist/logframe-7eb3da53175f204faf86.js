(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+uhY":function(e,t,r){"use strict";r.r(t);var n,o,a=r("q1tI"),l=r.n(a),i=r("i8i4"),c=r.n(i),s=r("okNM"),u=r("wgi2"),f=r("0pHI"),p=r("2vnA"),m=r("v38i");function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(r,n,e,t,a){var l={};return Object.keys(t).forEach(function(e){l[e]=t[e]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(r,n,l),l=null),l}var b=(o=v((n=function(){function l(){var e,t,r,n,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t="groupBy",n=e=this,(r=o)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0}),this.routes=[{name:"logframe",path:"/:programId<\\d+>/logframe/?groupby"}],this.updateState=function(e){var t=e.route;e.prevRoute;a.groupBy=t.params.groupby},this.router=Object(u.b)(this.routes,{trailingSlashMode:"always"}),this.router.usePlugin(Object(f.a)({useHash:!1,base:"/program"})),this.router.subscribe(this.updateState),this.router.start(),this.headerColumns=[gettext("Result level"),gettext("Indicators"),gettext("Means of verification"),gettext("Assumptions")]}var e,t,r;return e=l,(t=[{key:"setGroupBy",value:function(e){e=parseInt(e);var t=this.router.getState(),r=t.name,n=t.params;[m.c,m.d].includes(e)&&(n.groupby=e),this.router.navigate(r,n,{reload:!0})}},{key:"programId",get:function(){return this.router.getState().params.programId||null}},{key:"excelUrl",get:function(){return!1}}])&&d(e.prototype,t),r&&d(e,r),l}()).prototype,"groupBy",[p.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v(n.prototype,"programId",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"programId"),n.prototype),v(n.prototype,"excelUrl",[p.f],Object.getOwnPropertyDescriptor(n.prototype,"excelUrl"),n.prototype),n);function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g,_,E=function e(t){h(this,e),this.pk=t.pk,this.level_order=t.level_order,this.name=t.name,this.number_display=t.number_display,this.means_of_verification=t.means_of_verification},w=function e(t,r){var n=this;h(this,e),this.pk=t.pk,this.name=t.name,this.display_name=t.display_name,this.indicators=[],t.indicators&&Array.isArray(t.indicators)&&t.indicators.forEach(function(e){return n.indicators.push(r[e])}),this.assumptions=t.assumptions,this.child_levels=t.child_levels||[]},k=function(){function r(e){var o=this;if(h(this,r),this._levelsByPk={},this._levelsByChain=[],this._levelsByTier=[],this._indicatorsByPk={},this.getChildLevels=function(e){var t=[e];return o._levelsByPk[e].child_levels.forEach(function(e){t+=o.getChildLevels(e)}),t},this.getLevelsGroupedBy=function(e){return e===m.c?o._levelsByChain.map(function(e){return o._levelsByPk[e]}):e===m.d?o._levelsByTier.map(function(e){return o._levelsByPk[e]}):Object.values(o._levelsByPk)},this.name=e.name,this.results_framework=e.results_framework,this.results_framework_url=!!this.results_framework&&e.results_framework_url,this.program_page_url=e.program_page_url,this.rf_chain_sort_label=!!this.results_framework&&e.rf_chain_sort_label,e.indicators&&Array.isArray(e.indicators)&&e.indicators.forEach(function(e){var t=new E(e);o._indicatorsByPk[t.pk]=t}),e.levels&&Array.isArray(e.levels)){e.levels.forEach(function(e){var t=new w(e,o._indicatorsByPk);o._levelsByPk[t.pk]=t,o._levelsByChain.push(t.pk),o._levelsByTier.push(t.pk)}),this._levelsByTier.sort(function(e,t){var r=o._levelsByPk[e].get_level_depth,n=o._levelsByPk[t].get_level_depth;if(r<n)return-1;if(n<r)return 1;var a=o._levelsByPk[e].customsort,l=o._levelsByPk[t].customsort;return a<l?-1:l<a?1:0});var t=[];this._levelsByChain.filter(function(e){return 1==o._levelsByPk[e].get_level_depth}).forEach(function(e){t+=o.getChildLevels(levelPk)}),this._levelsByChain=t}}var e,t,n;return e=r,(t=[{key:"oldLevels",get:function(){return Object.values(this._levelsByPk)}}])&&y(e.prototype,t),n&&y(e,n),r}(),O=Object(s.b)("filterStore")(function(e){var t=e.filterStore,r=t.excelUrl?function(){window.open(t.excelUrl,"_blank")}:function(e){e.preventDefault()};return l.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:r,disabled:!t.excelUrl},l.a.createElement("i",{className:"fas fa-download"})," Excel")}),x=Object(s.b)("dataStore")(function(e){var t=e.dataStore;return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"logframe--header"},l.a.createElement("h1",null,gettext("Logframe")),t.results_framework&&l.a.createElement("a",{href:t.results_framework_url},l.a.createElement("i",{className:"fas fa-sitemap"}),gettext("View results framework"))),l.a.createElement(O,null))}),P=r("Ez0T"),j=Object(s.b)("dataStore","filterStore")(Object(s.c)(function(e){var t=e.dataStore,r=e.filterStore;return l.a.createElement("div",{className:"logframe--subheader"},l.a.createElement("h4",null,l.a.createElement("a",{href:t.program_page_url},t.name)),t.results_framework&&l.a.createElement(P.b,{chainLabel:t.rf_chain_sort_label,value:r.groupBy,update:function(e){r.setGroupBy(e.target.value)},labelClass:"col-form-label",formGroupClass:"form-row inline-select"}))})),N=function(e){var t=e.label;return l.a.createElement("div",{className:"table-cell"},l.a.createElement("span",{className:"spacer-span"}),l.a.createElement("span",{className:"table-cell__text"},t))},S=function(e){var t=e.headers;return l.a.createElement("div",{className:"logframe--table--row logframe--table--row__header"},t.map(function(e,t){return l.a.createElement(N,{label:e,key:t})}))};function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T,A,D,F,G,M,U=function(e){var t=e.name;return l.a.createElement("div",{className:"table-cell level-cell"},t)},R=function(e){var t=e.indicator;return l.a.createElement("div",{className:"table-cell--text"},gettext("Indicator")," ",t.number_display,": ",t.name)},q=function(e){var t=e.indicator;return l.a.createElement("div",{className:"table-cell--text"},t.means_of_verification)},H=function(e){var t=e.indicators;return t?l.a.createElement("div",{className:"table-cell-column colspan-2"},t.map(function(e,t){return l.a.createElement("div",{className:"table-cell-inner-row",key:t},l.a.createElement(R,{indicator:e,key:"ind".concat(t)}),l.a.createElement(q,{indicator:e,key:"means".concat(t)}))})):l.a.createElement("div",{className:"table-cell-inner-row colspan-2 table-cell "},l.a.createElement("div",{className:"table-cell--text table-cell--empty"}),l.a.createElement("div",{className:"table-cell--text table-cell--empty"}))},V=function(e){var t=e.assumptions;return l.a.createElement("div",{className:"table-cell"},t)},Y=function(e){var t=e.level;return l.a.createElement("div",{className:"logframe--table--row"},l.a.createElement(U,{name:t.display_name}),l.a.createElement(H,{indicators:t.indicators}),l.a.createElement(V,{assumptions:t.assumptions}))},J=Object(s.b)("dataStore","filterStore")(g=Object(s.c)((T=(_=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,z(t).call(this,e))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,l.a.Component),r=t,(n=[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{headers:this.props.filterStore.headerColumns}),this.levels.map(function(e,t){return l.a.createElement(Y,{level:e,key:t})}))}},{key:"levels",get:function(){return this.props.dataStore.results_framework?this.props.dataStore.getLevelsGroupedBy(this.props.filterStore.groupBy):this.props.dataStore.oldLevels}}])&&C(r.prototype,n),a&&C(r,a),t}()).prototype,A="levels",D=[p.f],F=Object.getOwnPropertyDescriptor(_.prototype,"levels"),G=_.prototype,M={},Object.keys(F).forEach(function(e){M[e]=F[e]}),M.enumerable=!!M.enumerable,M.configurable=!!M.configurable,("value"in M||M.initializer)&&(M.writable=!0),M=D.slice().reverse().reduce(function(e,t){return t(T,A,e)||e},M),G&&void 0!==M.initializer&&(M.value=M.initializer?M.initializer.call(G):void 0,M.initializer=void 0),void 0===M.initializer&&(Object.defineProperty(T,A,M),M=null),g=_))||g)||g,Q=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(j,null),l.a.createElement("div",{className:"logframe--table--wrapper"},l.a.createElement(J,null)))},K=new b,W=new k(jsContext);c.a.render(l.a.createElement(s.a,{filterStore:K,dataStore:W},l.a.createElement(x,null)),document.querySelector(".region-header")),c.a.render(l.a.createElement(s.a,{filterStore:K,dataStore:W},l.a.createElement(Q,null)),document.querySelector("#id_div_content"))},Ez0T:function(e,t,r){"use strict";var n=r("q1tI"),l=r.n(n),o=r("y2Vs"),a=r("VCnP"),i=r.n(a),c=0;function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"id";return c++,"".concat(e).concat(c)}var u=r("v38i");function f(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){d(t,e,r[e])})}return t}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"d",function(){return v}),r.d(t,"a",function(){return b}),r.d(t,"c",function(){return g}),r.d(t,"b",function(){return _});var v=function(e){var t=s("react-select"),r=e.labelClasses||"col-form-label text-uppercase",n=e.formRowClasses||"form-row mb-3",a=e.selectClasses||"tola-react-select";return l.a.createElement("div",{className:n},l.a.createElement("label",{htmlFor:t,className:r},e.label),l.a.createElement(o.default,{onChange:e.update,value:e.value,id:t,className:a,isDisabled:e.disabled,options:e.options}))},b=function(e){var t=s("date-select"),r=e.options&&1==e.options.length&&void 0!==e.options[0].value?l.a.createElement("option",{value:e.options[0].value},e.options[0].label):e.options&&void 0!==e.options[0].options?e.options.map(function(e,t){return l.a.createElement("optgroup",{label:e.label,key:t},e.options.map(function(e){return l.a.createElement("option",{value:e.value,key:e.value},e.label)}))}):e.options.map(function(e,t){return l.a.createElement("option",{value:e.value,key:t},e.label)});return l.a.createElement("div",{className:"form-row mb-3"},l.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),l.a.createElement("select",{className:"form-control",id:t,value:e.value,onChange:e.update,disabled:e.disabled},r))},y=function(e){var t=s("react-select"),r=e.formGroupClass||"form-row mb-3",n=e.labelClass||"col-form-label text-uppercase",a=e.selectClass||"form-control";return l.a.createElement("div",{className:r},l.a.createElement("label",{htmlFor:t,className:n},e.label),l.a.createElement("select",{onChange:e.update,value:e.value,id:t,className:a,disabled:e.disabled},e.options))},h=function(e){return""==e.children?l.a.createElement("div",null):l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",{style:{margin:"3px 0px 0px 0px"}}),l.a.createElement("div",{className:"text-muted",style:{textTransform:"uppercase",paddingLeft:"4px",marginBottom:"2px"}},e.children))},g=function(t){var e=s("multiselect"),r=t.options&&0!=t.options.length?{isMulti:!0,options:t.options,getDropdownButtonLabel:function(e){return e.value?Array.isArray(e.value)?0==e.value.length?gettext("None selected"):1==e.value.length?e.value[0].label:"".concat(e.value.length,"  ").concat(gettext("selected")):e.value.label:gettext("None selected")}}:{getDropdownButtonLabel:function(){return gettext("None available")},isDisabled:!0,menuIsOpen:!1,options:[]},n={dropdownButton:function(e){return t.options&&0!=t.options.length?e:m({},e,{backgroundColor:"#E5E6E8",background:""})},option:function(e,t){return m({},e,{padding:"1px 12px",display:"inline-block"})},container:function(e,t){return m({},e,{backgroundColor:"#f5f5f5"})}};return l.a.createElement("div",{className:"form-row mb-2 tola-react-multiselect-row"},l.a.createElement("label",{htmlFor:e,className:"col-form-label text-uppercase"},t.label),l.a.createElement(i.a,p({id:e,styles:n,formatOptionLabel:function(e){return l.a.createElement("div",{style:{display:"inline-block",float:"right",width:"90%"}},e.label)},components:{GroupHeading:h},value:t.value,onChange:t.update},r)))},_=function(e){var t=e.chainLabel,r=f(e,["chainLabel"]),n=[l.a.createElement("option",{value:u.c,key:1},t),l.a.createElement("option",{value:u.d,key:2},gettext("by Level"))];return l.a.createElement(y,p({label:gettext("Group indicators"),options:n},r))}},v38i:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,"h",function(){return l}),r.d(t,"f",function(){return o}),r.d(t,"g",function(){return i}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return s}),r.d(t,"i",function(){return f}),r.d(t,"e",function(){return p});var n={value:null,label:"---------"},a="—",l=1,o=2,i=[3,4,5,6,7],c=1,s=2,u="undefined"!=typeof gettext?gettext:function(e){return e};function f(){return{targetperiodLabels:{1:u("Life of Program (LoP) only"),3:u("Annual"),2:u("Midline and endline"),5:u("Tri-annual"),4:u("Semi-annual"),7:u("Monthly"),6:u("Quarterly")},timeperiodLabels:{3:u("Years"),5:u("Tri-annual periods"),4:u("Semi-annual periods"),7:u("Months"),6:u("Quarters")}}}var p={NO_INDICATOR_IN_UPDATE:1}}},[["+uhY",0,1]]]);