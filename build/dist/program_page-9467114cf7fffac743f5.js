(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{DaGC:function(e,t){$("[data-delete-pinned-report]").click(function(e){e.preventDefault();var t=$(this).data("deletePinnedReport"),r=$(this).closest(".pinned-report");window.confirm(gettext("Warning: This action cannot be undone. Are you sure you want to delete this pinned report?"))&&$.ajax({type:"POST",url:jsContext.delete_pinned_report_url,data:{pinned_report_id:t},success:function(){r.remove()}})})},aJgA:function(e,t,r){"use strict";r.r(t);var n,a,i,o,l,c,s,d,u=r("q1tI"),_=r.n(u),p=r("i8i4"),g=r.n(p),m=r("qtBC"),f=r("TSYQ"),v=r.n(f),h=r("okNM"),b=r("7O5W"),y=r("IP2g"),E=r("wHSu"),I=r("2vnA");function k(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t,r){return t&&N(e.prototype,t),r&&N(e,r),e}function O(r,n,e,t,a){var i={};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(r,n,i),i=null),i}var S=Object.freeze({missingTarget:1,missingResults:2,missingEvidence:3,aboveTarget:5,belowTarget:6,onTarget:7}),x=(a=O((n=function(){function t(e){w(this,t),k(this,"indicators",a,this),this.indicators=e,this.updateIndicator=this.updateIndicator.bind(this),this.filterIndicators=this.filterIndicators.bind(this)}return T(t,[{key:"updateIndicator",value:function(t){var e=this.indicators.findIndex(function(e){return e.id===t.id});0<e&&(this.indicators[e]=t)}},{key:"filterIndicators",value:function(e){var t;switch(e){case S.missingTarget:t=this.getIndicatorsNeedingTargets;break;case S.missingResults:t=this.getIndicatorsNeedingResults;break;case S.missingEvidence:t=this.getIndicatorsNeedingEvidence;break;case S.aboveTarget:t=this.getIndicatorsAboveTarget;break;case S.belowTarget:t=this.getIndicatorsBelowTarget;break;case S.onTarget:t=this.getIndicatorsOnTarget;break;default:t=this.indicators}return t}},{key:"getIndicatorsNeedingTargets",get:function(){return this.indicators.filter(function(e){return 0===e.all_targets_defined})}},{key:"getIndicatorsNeedingResults",get:function(){return this.indicators.filter(function(e){return 0===e.results_count})}},{key:"getIndicatorsNeedingEvidence",get:function(){return this.indicators.filter(function(e){return e.results_count!==e.results_with_evidence_count})}},{key:"getIndicatorsNotReporting",get:function(){return this.indicators.filter(function(e){return null===e.over_under})}},{key:"getIndicatorsAboveTarget",get:function(){return this.indicators.filter(function(e){return 0<e.over_under})}},{key:"getIndicatorsBelowTarget",get:function(){return this.indicators.filter(function(e){return e.over_under<0})}},{key:"getIndicatorsOnTarget",get:function(){return this.indicators.filter(function(e){return 0===e.over_under})}},{key:"getIndicatorsReporting",get:function(){return this.indicators.filter(function(e){return!0===e.reporting})}},{key:"getTotalResultsCount",get:function(){return this.indicators.reduce(function(e,t){return e+t.results_count},0)}},{key:"getTotalResultsWithEvidenceCount",get:function(){return this.indicators.reduce(function(e,t){return e+t.results_with_evidence_count},0)}}]),t}()).prototype,"indicators",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O(n.prototype,"updateIndicator",[I.d],Object.getOwnPropertyDescriptor(n.prototype,"updateIndicator"),n.prototype),O(n.prototype,"getIndicatorsNeedingTargets",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getIndicatorsNeedingTargets"),n.prototype),O(n.prototype,"getIndicatorsNeedingResults",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getIndicatorsNeedingResults"),n.prototype),O(n.prototype,"getIndicatorsNeedingEvidence",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getIndicatorsNeedingEvidence"),n.prototype),O(n.prototype,"getIndicatorsNotReporting",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getIndicatorsNotReporting"),n.prototype),O(n.prototype,"getIndicatorsAboveTarget",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getIndicatorsAboveTarget"),n.prototype),O(n.prototype,"getIndicatorsBelowTarget",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getIndicatorsBelowTarget"),n.prototype),O(n.prototype,"getIndicatorsOnTarget",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getIndicatorsOnTarget"),n.prototype),O(n.prototype,"getIndicatorsReporting",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getIndicatorsReporting"),n.prototype),O(n.prototype,"getTotalResultsCount",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getTotalResultsCount"),n.prototype),O(n.prototype,"getTotalResultsWithEvidenceCount",[I.e],Object.getOwnPropertyDescriptor(n.prototype,"getTotalResultsWithEvidenceCount"),n.prototype),n),C=(o=O((i=function(){function r(e,t){w(this,r),this.indicatorStore=void 0,k(this,"program",o,this),k(this,"resultsMap",l,this),this.indicatorStore=new x(e),this.program=t,this.addResultsHTML=this.addResultsHTML.bind(this),this.deleteResultsHTML=this.deleteResultsHTML.bind(this)}return T(r,[{key:"addResultsHTML",value:function(e,t){this.resultsMap.set(parseInt(e),t)}},{key:"deleteResultsHTML",value:function(e){this.resultsMap.delete(e)}},{key:"deleteAllResultsHTML",value:function(){this.resultsMap.clear()}}]),r}()).prototype,"program",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=O(i.prototype,"resultsMap",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),O(i.prototype,"addResultsHTML",[I.d],Object.getOwnPropertyDescriptor(i.prototype,"addResultsHTML"),i.prototype),O(i.prototype,"deleteResultsHTML",[I.d],Object.getOwnPropertyDescriptor(i.prototype,"deleteResultsHTML"),i.prototype),O(i.prototype,"deleteAllResultsHTML",[I.d],Object.getOwnPropertyDescriptor(i.prototype,"deleteAllResultsHTML"),i.prototype),i),j=(s=O((c=function(){function e(){w(this,e),k(this,"currentIndicatorFilter",s,this),k(this,"selectedIndicatorIds",d,this),this.setIndicatorFilter=this.setIndicatorFilter.bind(this),this.clearIndicatorFilter=this.clearIndicatorFilter.bind(this),this.setSelectedIndicatorIds=this.setSelectedIndicatorIds.bind(this)}return T(e,[{key:"setIndicatorFilter",value:function(e){this.currentIndicatorFilter=e}},{key:"clearIndicatorFilter",value:function(){this.currentIndicatorFilter=null}},{key:"setSelectedIndicatorIds",value:function(e){this.selectedIndicatorIds=e}}]),e}()).prototype,"currentIndicatorFilter",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=O(c.prototype,"selectedIndicatorIds",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O(c.prototype,"setIndicatorFilter",[I.d],Object.getOwnPropertyDescriptor(c.prototype,"setIndicatorFilter"),c.prototype),O(c.prototype,"clearIndicatorFilter",[I.d],Object.getOwnPropertyDescriptor(c.prototype,"clearIndicatorFilter"),c.prototype),O(c.prototype,"setSelectedIndicatorIds",[I.d],Object.getOwnPropertyDescriptor(c.prototype,"setSelectedIndicatorIds"),c.prototype),c),R=r("xeH2"),L=r.n(R),M=r("bmMU"),P=r.n(M);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var z,U,q,G=function(e){function a(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,(t=!(n=A(a).call(this,e))||"object"!==F(n)&&"function"!=typeof n?B(r):n).onChange=t.onChange.bind(B(B(t))),t.clearInternalSelection=t.clearInternalSelection.bind(B(B(t))),t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(a,_.a.Component),t=a,(r=[{key:"onChange",value:function(){var e=this.$el.find("option:selected").map(function(){return parseInt(L()(this).val())}).get();this.props.onSelectCb&&this.props.onSelectCb(e)}},{key:"clearInternalSelection",value:function(){this.props.forceEmptySelect&&this.$el.val("")}},{key:"componentDidMount",value:function(){var e={nonSelectedText:this.props.nonSelectText,includeSelectAllOption:!0,enableFiltering:!0,enableCaseInsensitiveFiltering:!0,numberDisplayed:1,maxHeight:320,buttonClass:"btn form-control",templates:{filter:'<li class="multiselect-item filter"><div class="input-group"><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="fas fa-times-circle"></i></button></span>'},onChange:this.onChange,onSelectAll:this.onChange,onDeselectAll:this.onChange};this.$el=L()(this.el),this.$el.multiselect(e),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.options,n=t.selected;e&&P()(e.options,r)||this.$el.multiselect("dataprovider",r),this.$el.multiselect("select",n),0===n.length&&this.clearInternalSelection(),this.$el.multiselect("refresh")}},{key:"componentWillUnmount",value:function(){this.$el.multiselect("destroy")}},{key:"render",value:function(){var t=this,e=this.props.isMultiSelect?"multiple":null;return _.a.createElement("select",{className:"form-control",ref:function(e){return t.el=e},multiple:e})}}])&&D(t.prototype,r),n&&D(t,n),a}();function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t,r){return t&&K(e.prototype,t),r&&K(e,r),e}function Y(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?ee(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}b.b.add(E.a,E.b);var te,re,ne=Object(h.a)(z=function(e){function r(e){var t;return W(this,r),(t=Y(this,V(r).call(this,e))).onShowAllClick=t.onShowAllClick.bind(ee(ee(t))),t}return X(r,_.a.Component),Q(r,[{key:"onShowAllClick",value:function(e){e.preventDefault(),m.a.emit("clear-all-indicator-filters")}},{key:"render",value:function(){var e=this.props,t=e.indicatorCount,r=e.programId,n=e.currentIndicatorFilter,a=e.filterApplied;return _.a.createElement("div",{className:"indicators-list__header"},_.a.createElement("h3",{className:"no-bold"},_.a.createElement("span",{id:"indicators-list-title"},function(e,t){var r;switch(e){case S.missingTarget:return r=ngettext("%s indicator has missing targets","%s indicators have missing targets",t),interpolate(r,[t]);case S.missingResults:return r=ngettext("%s indicator has missing results","%s indicators have missing results",t),interpolate(r,[t]);case S.missingEvidence:return r=ngettext("%s indicator has missing evidence","%s indicators have missing evidence",t),interpolate(r,[t]);case S.aboveTarget:return r=ngettext("%s indicator is >15% above target","%s indicators are >15% above target",t),interpolate(r,[t]);case S.belowTarget:return r=ngettext("%s indicator is >15% below target","%s indicators are >15% below target",t),interpolate(r,[t]);case S.onTarget:return r=ngettext("%s indicator is on track","%s indicators are on track",t),interpolate(r,[t]);default:return r=ngettext("%s indicator","%s indicators",t),interpolate(r,[t])}}(n,t)," "),a&&_.a.createElement("a",{href:"#",id:"show-all-indicators",onClick:this.onShowAllClick},_.a.createElement("small",null,"Show all"))),_.a.createElement("div",null,_.a.createElement("a",{href:"/indicators/indicator_create/".concat(r),role:"button",className:"btn-link btn-add"},_.a.createElement("i",{className:"fas fa-plus-circle"})," ",gettext("Add indicator"))))}}]),r}())||z,ae=Object(h.a)(U=function(e){function t(){return W(this,t),Y(this,V(t).apply(this,arguments))}return X(t,_.a.Component),Q(t,[{key:"render",value:function(){var e=this.props.rootStore.indicatorStore.indicators,t=this.props.uiStore.selectedIndicatorIds,r=e.map(function(e){return{value:e.id,label:e.name}});return _.a.createElement("nav",{className:"list__filters list__filters--inline-label",id:"id_div_indicators"},_.a.createElement("label",{className:"filters__label"},gettext("Find an indicator:")),_.a.createElement("div",{className:"filters__control"},_.a.createElement(G,{forceEmptySelect:!0,options:r,selected:t,onSelectCb:function(e){return m.a.emit("select-indicators-to-filter",e)}})))}}]),t}())||U,ie=Object(h.a)(q=function(e){function r(e){var t;return W(this,r),(t=Y(this,V(r).call(this,e))).onIndicatorUpdateClick=t.onIndicatorUpdateClick.bind(ee(ee(t))),t.onIndicatorResultsToggleClick=t.onIndicatorResultsToggleClick.bind(ee(ee(t))),t}return X(r,_.a.Component),Q(r,[{key:"onIndicatorUpdateClick",value:function(e,t){e.preventDefault(),m.a.emit("open-indicator-update-modal",t)}},{key:"onIndicatorResultsToggleClick",value:function(e,t){e.preventDefault(),this.props.resultsMap.has(t)?m.a.emit("delete-indicator-results",t):m.a.emit("load-indicator-results",t)}},{key:"render",value:function(){var a=this,e=this.props.indicators,t=this.props.program,i=new Date(t.reporting_period_end),o=this.props.resultsMap;return _.a.createElement("table",{className:"table indicators-list"},_.a.createElement("thead",null,_.a.createElement("tr",{className:"table-header"},_.a.createElement("th",{className:"",id:"id_indicator_name_col_header"},gettext("Indicator")),_.a.createElement("th",{className:"",id:"id_indicator_buttons_col_header"}," "),_.a.createElement("th",{className:"",id:"id_indicator_level_col_header"},gettext("Level")),_.a.createElement("th",{className:"",id:"id_indicator_unit_col_header"},gettext("Unit of measure")),_.a.createElement("th",{className:"text-right",id:"id_indicator_baseline_col_header"},gettext("Baseline")),_.a.createElement("th",{className:"text-right",id:"id_indicator_target_col_header"},gettext("Target")))),_.a.createElement("tbody",null,e.map(function(t){var e=o.has(t.id),r=o.get(t.id),n=t.target_period_last_end_date?new Date(t.target_period_last_end_date):null;return _.a.createElement(_.a.Fragment,{key:t.id},_.a.createElement("tr",{className:v()("indicators-list__row","indicators-list__indicator-header",{"is-highlighted":t.just_created,"is-expanded":e})},_.a.createElement("td",null,_.a.createElement("a",{href:"#",className:"indicator_results_toggle",onClick:function(e){return a.onIndicatorResultsToggleClick(e,t.id)}},_.a.createElement(y.a,{icon:e?"caret-down":"caret-right"}),_.a.createElement("strong",null,t.number)," ",_.a.createElement("span",{className:"indicator_name"},t.name)),t.key_performance_indicator&&_.a.createElement("span",{className:"badge"},"KPI"),n&&n<i&&_.a.createElement("a",{href:"/indicators/indicator_update/".concat(t.id,"/"),className:"indicator-link color-red missing_targets","data-toggle":"modal","data-target":"#indicator_modal_div","data-tab":"targets"},_.a.createElement("i",{className:"fas fa-bullseye"})," Missing targets")),_.a.createElement("td",null,_.a.createElement("a",{href:"#",className:"indicator-link",onClick:function(e){return a.onIndicatorUpdateClick(e,t.id)}},_.a.createElement("i",{className:"fas fa-cog"}))),_.a.createElement("td",null,t.level?t.level.name:""),_.a.createElement("td",null,t.unit_of_measure),_.a.createElement("td",{className:"text-right"},t.baseline_display),_.a.createElement("td",{className:"text-right"},t.lop_target_display)),e&&_.a.createElement("tr",{className:"indicators-list__row indicators-list__indicator-body"},_.a.createElement("td",{colSpan:"6",ref:function(e){return $(e).find('[data-toggle="popover"]').popover({html:!0})}},_.a.createElement("div",{dangerouslySetInnerHTML:{__html:r}}))))})))}}]),r}())||q,oe=Object(h.a)(function(e){var t=e.rootStore.program,r=e.rootStore.indicatorStore,n=e.rootStore.resultsMap,a=e.uiStore.currentIndicatorFilter,i=e.uiStore.selectedIndicatorIds,o=r.filterIndicators(a);return 0<i.length&&(o=o.filter(function(e){return-1<i.indexOf(e.id)})),_.a.createElement(_.a.Fragment,null,_.a.createElement(ne,{indicatorCount:o.length,programId:t.id,currentIndicatorFilter:a,filterApplied:a||0<i.length}),_.a.createElement(ae,{uiStore:e.uiStore,rootStore:e.rootStore}),t.does_it_need_additional_target_periods&&_.a.createElement("div",{id:"id_missing_targets_msg",className:"color-red"},_.a.createElement("i",{className:"fas fa-bullseye"})," ",gettext("Some indicators have missing targets. To enter these values, click the target icon near the indicator name.")),_.a.createElement(ie,{indicators:o,resultsMap:n,program:t}))});function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t,r){return t&&ue(e.prototype,t),r&&ue(e,r),e}function ge(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?be(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ye=Object(h.a)(te=function(e){function r(e){var t;return de(this,r),(t=ge(this,me(r).call(this,e))).onGuageClick=t.onGuageClick.bind(be(be(t))),t}return fe(r,_.a.Component),pe(r,[{key:"onGuageClick",value:function(){m.a.emit("apply-gauge-tank-filter",this.props.filterType)}},{key:"render",value:function(){var e=this.props,t=e.allIndicatorsLength,r=e.filteredIndicatorsLength,n=e.title,a=e.filledLabel,i=e.unfilledLabel,o=e.cta,l=e.emptyLabel,c=this.props.filterType===this.props.currentIndicatorFilter,s=t<=0||t==r?100:0==r?0:Math.max(1,Math.min(Math.round(r/t*100),99)),d=100-s;return _.a.createElement("div",{className:v()("gauge","filter-trigger",{"is-highlighted":c}),onClick:this.onGuageClick},_.a.createElement("h6",{className:"gauge__title"},n),_.a.createElement("div",{className:"gauge__overview"},_.a.createElement("div",{className:"gauge__graphic gauge__graphic--tank{% if filled_percent == 0 %} gauge__graphic--empty{% endif %}"},_.a.createElement("div",{className:"graphic__tick-marks"},se(Array(10)).map(function(e,t){return _.a.createElement("div",{key:t,className:"graphic__tick"})})),_.a.createElement("div",{className:"graphic__tank--unfilled",style:{flexBasis:"".concat(s,"%")}}),_.a.createElement("div",{className:"graphic__tank--filled",style:{flexBasis:"".concat(d,"%")}})),_.a.createElement("div",{className:"gauge__labels"},0<d?_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"gauge__label text-muted"},s,"% ",i),_.a.createElement("div",{className:"gauge__label"},_.a.createElement("span",{className:"gauge__value"},d,"% ",a))):_.a.createElement("div",{className:"gauge__label"},_.a.createElement("span",{className:"text-danger"},_.a.createElement("strong",null,l))))),0<s&&_.a.createElement("div",{className:"gauge__cta"},_.a.createElement("span",{className:"btn-link btn-inline"},_.a.createElement("i",{className:"fas fa-exclamation-triangle text-warning"})," ",o)," "))}}]),r}())||te,_e=Object(h.a)(re=function(e){function r(e){var t;return de(this,r),(t=ge(this,me(r).call(this,e))).handledFilterTypes=new Set([S.aboveTarget,S.belowTarget,S.onTarget]),t.onFilterLinkClick=t.onFilterLinkClick.bind(be(be(t))),t}return fe(r,_.a.Component),pe(r,[{key:"componentDidUpdate",value:function(){$(this.el).find('[data-toggle="popover"]').popover({html:!0})}},{key:"onFilterLinkClick",value:function(e,t){e.preventDefault(),m.a.emit("apply-gauge-tank-filter",t)}},{key:"render",value:function(){var t=this,e=this.props.indicatorStore,r=this.props.currentIndicatorFilter,n=this.handledFilterTypes.has(r),a=e.indicators.length,i=e.getIndicatorsNotReporting.length,o=e.getIndicatorsAboveTarget.length,l=e.getIndicatorsBelowTarget.length,c=e.getIndicatorsOnTarget.length,s=0<a?function(e){return e==a?100:0==e?0:Math.max(1,Math.min(Math.round(e/a*100),99))}:function(e){return 0},d=s(o),u=s(c),p=s(l),g=s(i),m=100*this.props.indicatorOnScopeMargin,f=function(e){return _.a.createElement("div",{className:v()("gauge",{"is-highlighted":n}),ref:function(e){return t.el=e}},_.a.createElement("h6",{className:"gauge__title"},gettext("Indicators on track")),_.a.createElement("div",{className:"gauge__overview"},e.children))};if(0===e.getTotalResultsCount)return _.a.createElement(f,null,_.a.createElement("div",null,_.a.createElement("p",{className:"text-muted"},gettext("Unavailable until results are reported")),_.a.createElement("div",null,_.a.createElement("i",{className:"gauge__icon gauge__icon--error fas fa-frown"}))));if(0===e.getIndicatorsReporting.length)return _.a.createElement(f,null,_.a.createElement("div",{className:"gauge__graphic gauge__graphic--empty gauge__graphic--performance-band"},_.a.createElement("div",{className:"graphic__tick-marks"},se(Array(10)).map(function(e,t){return _.a.createElement("div",{key:t,className:"graphic__tick"})}))),_.a.createElement("div",{className:"gauge__labels"},_.a.createElement("div",{className:"gauge__label"},_.a.createElement("p",{className:"text-muted"},gettext("Unavailable until the first target period ends with results reported")))));var h,b,y;return _.a.createElement(f,null,_.a.createElement("div",{className:"gauge__graphic gauge__graphic--performance-band"},_.a.createElement("div",{className:"graphic__tick-marks"},se(Array(10)).map(function(e,t){return _.a.createElement("div",{key:t,className:"graphic__tick"})})),_.a.createElement("div",{className:"graphic__performance-band--above-target",style:{flexBasis:"".concat(d,"%")}}),_.a.createElement("div",{className:"graphic__performance-band--on-target",style:{flexBasis:"".concat(u,"%")}}),_.a.createElement("div",{className:"graphic__performance-band--below-target",style:{flexBasis:"".concat(p,"%")}})),_.a.createElement("div",{className:"gauge__labels"},_.a.createElement("div",{className:"gauge__label"},_.a.createElement("span",{className:"text-muted"},interpolate(gettext("%s%% unavailable"),[g]))," ",_.a.createElement("a",{href:"#",tabIndex:"0","data-toggle":"popover","data-placement":"right","data-trigger":"focus","data-content":gettext("The indicator has no targets, no completed target periods, or no results reported."),onClick:function(e){return e.preventDefault()}},_.a.createElement("i",{className:"far fa-question-circle"}))),_.a.createElement("div",{className:"gauge__label"},_.a.createElement("span",{className:"gauge__value--above filter-trigger--band",onClick:function(e){return t.onFilterLinkClick(e,S.aboveTarget)},dangerouslySetInnerHTML:(y=gettext("<strong>%(percentHigh)s%</strong> are >%(marginPercent)s% above target"),{__html:interpolate(y,{percentHigh:d,marginPercent:m},!0)})})),_.a.createElement("div",{className:"gauge__label"},_.a.createElement("span",{className:"gauge__value filter-trigger--band",onClick:function(e){return t.onFilterLinkClick(e,S.onTarget)},dangerouslySetInnerHTML:(b=gettext("<strong>%s%</strong> are on track"),{__html:interpolate(b,[u])})})," ",_.a.createElement("a",{href:"#",tabIndex:"0","data-toggle":"popover","data-placement":"right","data-trigger":"focus","data-content":gettext("The actual value matches the target value, plus or minus 15%. So if your target is 100 and your result is 110, the indicator is 10% above target and on track.  <br><br>Please note that if your indicator has a decreasing direction of change, then “above” and “below” are switched. In that case, if your target is 100 and your result is 200, your indicator is 50% below target and not on track.<br><br><a href='https://docs.google.com/document/d/1Gl9bxJJ6hdhCXeoOCoR1mnVKZa2FlEOhaJcjexiHzY0' target='_blank'>See our documentation for more information.</a>"),onClick:function(e){return e.preventDefault()}},_.a.createElement("i",{className:"far fa-question-circle"}))),_.a.createElement("div",{className:"gauge__label"},_.a.createElement("span",{className:"gauge__value--below filter-trigger--band",onClick:function(e){return t.onFilterLinkClick(e,S.belowTarget)},dangerouslySetInnerHTML:(h=gettext("<strong>%(percentBelow)s%</strong> are >%(marginPercent)s% below target"),{__html:interpolate(h,{percentBelow:p,marginPercent:m},!0)})}))))}}]),r}())||re,ve=Object(h.a)(function(e){var t=e.rootStore.indicatorStore,r=t.indicators,n=e.uiStore.currentIndicatorFilter,a=this.props.indicatorOnScopeMargin,i={title:gettext("Indicators with targets"),filledLabel:gettext("have targets"),unfilledLabel:gettext("no targets"),cta:gettext("Add missing targets"),emptyLabel:gettext("No targets")},o={title:gettext("Indicators with results"),filledLabel:gettext("have results"),unfilledLabel:gettext("no results"),cta:gettext("Add missing results"),emptyLabel:gettext("No results")},l={title:gettext("Results with evidence"),filledLabel:gettext("have evidence"),unfilledLabel:gettext("no evidence"),cta:gettext("Add missing evidence"),emptyLabel:gettext("No evidence")};return 0===r.length?null:_.a.createElement("div",{className:"status__gauges"},_.a.createElement(_e,{currentIndicatorFilter:n,indicatorOnScopeMargin:a,indicatorStore:t}),_.a.createElement(ye,le({filterType:S.missingTarget,currentIndicatorFilter:n,allIndicatorsLength:r.length,filteredIndicatorsLength:t.getIndicatorsNeedingTargets.length},i)),_.a.createElement(ye,le({filterType:S.missingResults,currentIndicatorFilter:n,allIndicatorsLength:r.length,filteredIndicatorsLength:t.getIndicatorsNeedingResults.length},o)),_.a.createElement(ye,le({filterType:S.missingEvidence,currentIndicatorFilter:n,allIndicatorsLength:t.getTotalResultsCount,filteredIndicatorsLength:t.getTotalResultsCount-t.getTotalResultsWithEvidenceCount},l)))}),Ee=(r("DaGC"),new C(jsContext.indicators,jsContext.program)),Ie=new j;m.a.on("open-indicator-update-modal",function(e){var t="/indicators/indicator_update/".concat(e,"/?modal=1");$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").load(t),$("#indicator_modal_div").modal("show")}),m.a.on("load-indicator-results",function(t){var e="/indicators/result_table/".concat(t,"/").concat(Ee.program.id,"/");$.get(e,function(e){Ee.addResultsHTML(t,e)})}),m.a.on("delete-indicator-results",function(e){Ee.deleteResultsHTML(e)}),m.a.on("reload-indicator",function(e){$.get("/indicators/api/indicator/".concat(e),Ee.indicatorStore.updateIndicator)}),m.a.on("apply-gauge-tank-filter",function(e){m.a.emit("clear-all-indicator-filters"),m.a.emit("close-all-indicators"),Ie.setIndicatorFilter(e)}),m.a.on("clear-all-indicator-filters",function(){Ie.clearIndicatorFilter(),m.a.emit("select-indicators-to-filter",[]),m.a.emit("close-all-indicators")}),m.a.on("select-indicators-to-filter",function(e){Ie.clearIndicatorFilter(),Ie.setSelectedIndicatorIds(e),e.forEach(function(e){return m.a.emit("load-indicator-results",e)})}),m.a.on("close-all-indicators",function(){Ee.deleteAllResultsHTML()}),g.a.render(_.a.createElement(oe,{rootStore:Ee,uiStore:Ie}),document.querySelector("#indicator-list-react-component")),g.a.render(_.a.createElement(ve,{rootStore:Ee,uiStore:Ie,indicatorOnScopeMargin:jsContext.indicator_on_scope_margin}),document.querySelector("#program-metrics-react-component")),$("#indicator-list-react-component").on("click",".collected-data__link",function(e){e.preventDefault();var t=$(this).attr("href");t+="?modal=1",$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_collected_data_modal_content").load(t),$("#indicator_collecteddata_div").modal("show")}),$("#indicator-list-react-component").on("click",".indicator-link[data-tab]",function(e){e.preventDefault();var t=$(this).attr("href");t+="?modal=1";var r=$(this).data("tab");r&&""!=r&&null!=r&&"undefined"!=r&&(t+="&targetsactive=true"),$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").load(t),$("#indicator_modal_div").modal("show")}),$("#indicator_modal_div").on("hide.bs.modal",function(e){var t=$(this).find("form").attr("action").split("/"),r=parseInt(t[t.length-2]);m.a.emit("reload-indicator",r),Ee.resultsMap.has(r)&&m.a.emit("load-indicator-results",r)}),$("#indicator_collecteddata_div").on("hide.bs.modal",function(e){if(!0===$(this).find("form").data("recordchanged")){var t=$(this).find("form #id_indicator").val();m.a.emit("load-indicator-results",t),m.a.emit("reload-indicator",t)}})},qtBC:function(e,t,r){"use strict";var n=r("7+Rn"),a=r.n(n)()();t.a=a},xeH2:function(e,t){e.exports=jQuery}},[["aJgA",0,1]]]);