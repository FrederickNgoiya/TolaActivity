(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"5Xg7":function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n("q1tI"),s=n.n(r),c=n("c7k8"),a=n("y2Vs");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=u(this,p(n).call(this,e))).cache=new c.c({fixedWidth:!0,defaultHeight:35}),t.filter_val="",t}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,s.a.PureComponent),t=n,(r=[{key:"render",value:function(){var i=this,e=this.props,o=(e.options,e.children),t=e.maxHeight,n=(e.getValue,e.selectProps),r=o.length||0;return n.inputValue!==this.filter_val&&(this.filter_val=n.inputValue,this.cache.clearAll()),s.a.createElement("div",{style:{display:"flex",height:"100vh",maxHeight:t+"px"}},s.a.createElement("div",{style:{flex:"1 1 auto"}},s.a.createElement(c.a,null,function(e){var t=e.width,n=e.height;return s.a.createElement(c.e,{height:n,width:t,deferredMeasurementCache:i.cache,rowCount:r,rowHeight:i.cache.rowHeight,noRowsRenderer:function(){return s.a.createElement("div",null,"No selections available")},rowRenderer:function(e){var t=e.index,n=e.parent,r=e.key,a=e.style;return s.a.createElement(c.b,{key:r,cache:i.cache,parent:n,columnIndex:0,rowIndex:t},s.a.createElement("div",{style:a},o[t]))}})})))}}])&&l(t.prototype,r),a&&l(t,a),n}();t.b=function(e){return s.a.createElement(a.b,o({components:{VirtualizedMenuList:g}},e))}},DDFe:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t=e.children,n=e.isLoading,r=e.className,a=c(e,["children","isLoading","className"]),i=n?"loading":"";return o.a.createElement("div",s({className:"loading-spinner__container "+i+" "+(r||"")},a),o.a.createElement("div",{className:"loading-spinner__overlay"},o.a.createElement("div",{className:"loading-spinner__spinner"})),t)}},NlW9:function(e,t,n){"use strict";n.r(t);var r,a,i,o,s,c,l,u,p,d,g,f,m,b,y,h,v,_,O,E,j,w,k,N,C,x,S,D,P=n("q1tI"),F=n.n(P),z=n("i8i4"),A=n.n(z),I=n("2vnA");function R(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){U(t,e,n[e])})}return t}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(n,r,e,t,a){var i={};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(n,r,i),i=null),i}var V,J={id:"new",name:"",description:"",status:""},X=(a=q((r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),H(this,"organizations",a,this),H(this,"users",i,this),H(this,"sectors",o,this),H(this,"filters",s,this),H(this,"appliedFilters",c,this),H(this,"is_superuser",l,this),H(this,"allCountries",u,this),H(this,"countries",p,this),H(this,"country_count",d,this),H(this,"new_country",g,this),H(this,"fetching_main_listing",f,this),H(this,"current_page",m,this),H(this,"total_pages",b,this),H(this,"bulk_targets",y,this),H(this,"bulk_targets_all",h,this),H(this,"editing_target",v,this),H(this,"editing_errors",_,this),H(this,"fetching_editing_data",O,this),H(this,"editing_objectives_data",E,this),H(this,"editing_objectives_errors",j,this),H(this,"editing_disaggregations_data",w,this),H(this,"editing_disaggregations_errors",k,this),H(this,"saving",N,this),H(this,"bulk_targets",C,this),H(this,"applying_bulk_updates",x,this),H(this,"bulk_targets_all",S,this),H(this,"active_editor_pane",D,this),this.active_pane_is_dirty=!1,this.api=e,Object.assign(this,t),this.appliedFilters=T({},this.filters),this.fetchCountries()}var e,t,r;return e=n,(t=[{key:"marshalFilters",value:function(e){return Object.entries(e).reduce(function(e,t){var n=L(t,2),r=n[0],a=n[1];return Array.isArray(a)?e[r]=a.map(function(e){return e.value}):a&&(e[r]=a.value),e},{})}},{key:"fetchCountries",value:function(){var t=this;this.dirtyConfirm()&&(this.fetching_main_listing=!0,this.api.fetchCountries(this.current_page+1,this.marshalFilters(this.appliedFilters)).then(function(e){Object(I.m)(function(){t.active_editor_pane="profile",t.active_pane_is_dirty=!1,t.fetching_main_listing=!1,t.countries=e.results,t.country_count=e.total_results,t.total_pages=e.total_pages,t.next_page=e.next_page,t.previous_page=e.previous_page})}))}},{key:"applyFilters",value:function(){this.appliedFilters=T({},this.filters),this.current_page=0,this.fetchCountries()}},{key:"changePage",value:function(e){e.selected!=this.current_page&&(this.current_page=e.selected,this.bulk_targets=new Map,this.bulk_targets_all=!1,this.fetchCountries())}},{key:"changeFilter",value:function(e,t){this.filters=Object.assign(this.filters,U({},e,t))}},{key:"clearFilters",value:function(){this.filters=Object.assign(this.filters,{countries:[],organizations:[],sectors:[],programStatus:null,programs:[]})}},{key:"toggleEditingTarget",value:function(e){var a=this;this.dirtyConfirm()&&("new"==this.editing_target&&(this.countries.shift(),this.editing_errors={}),this.active_editor_pane="profile",this.active_pane_is_dirty=!1,this.editing_target==e?(this.editing_target=!1,this.editing_errors={}):(this.editing_target=e,this.fetching_editing_data=!0,Promise.all([this.api.fetchCountryObjectives(e),this.api.fetchCountryDisaggregations(e)]).then(function(e){var t=L(e,2),n=t[0],r=t[1];Object(I.m)(function(){a.fetching_editing_data=!1,a.editing_objectives_data=n.data,a.editing_disaggregations_data=r.data})})))}},{key:"updateLocalList",value:function(n){this.countries=this.countries.reduce(function(e,t){return t.id==n.id?e.push(n):e.push(t),e},[])}},{key:"onSaveSuccessHandler",value:function(){PNotify.success({text:gettext("Successfully Saved"),delay:5e3})}},{key:"onSaveErrorHandler",value:function(e){PNotify.error({text:e||gettext("Saving Failed"),delay:5e3})}},{key:"onDeleteSuccessHandler",value:function(){PNotify.success({text:gettext("Successfully Deleted"),delay:5e3})}},{key:"dirtyConfirm",value:function(){return!this.active_pane_is_dirty||this.active_pane_is_dirty&&confirm(gettext("You have unsaved changes. Are you sure you want to discard them?"))}},{key:"onProfilePaneChange",value:function(e){this.dirtyConfirm()&&(this.active_editor_pane=e,this.active_pane_is_dirty=!1)}},{key:"setActiveFormIsDirty",value:function(e){this.active_pane_is_dirty=e}},{key:"addCountry",value:function(){if(this.dirtyConfirm()){"new"==this.editing_target&&this.countries.shift(),this.active_editor_pane="profile",this.active_pane_is_dirty=!1;this.countries.unshift({id:"new",country:"",description:"",code:"",organizations:[]}),this.editing_target="new"}}},{key:"saveNewCountry",value:function(e){var t=this;e.id=null,this.saving=!0,this.api.createCountry(e).then(function(e){Object(I.m)(function(){t.saving=!1,t.active_pane_is_dirty=!1,t.countries.shift(),t.countries.unshift(e.data)})}).catch(function(e){Object(I.m)(function(){t.saving=!1,t.editing_errors=e.response.data,t.onSaveErrorHandler(e.response.data.detail)})})}},{key:"updateCountry",value:function(e,t){var n=this;this.saving=!0,this.api.updateCountry(e,t).then(function(e){Object(I.m)(function(){n.saving=!1,n.active_pane_is_dirty=!1,n.updateLocalList(e.data),n.onSaveSuccessHandler()})}).catch(function(e){Object(I.m)(function(){n.saving=!1,n.editing_errors=e.response.data,n.onSaveErrorHandler(e.response.data.detail)})})}},{key:"addObjective",value:function(){this.editing_objectives_data.find(function(e){return"new"==e.id})||(this.editing_objectives_data=[].concat(R(this.editing_objectives_data),[J]))}},{key:"updateObjective",value:function(e,t){var n=this;this.editing_objectives_errors={},this.api.updateObjective(e,t).then(function(e){Object(I.m)(function(){n.onSaveSuccessHandler();var t=e.data;n.active_pane_is_dirty=!1,n.editing_objectives_data=n.editing_objectives_data.map(function(e){return e.id==t.id?t:e})})}).catch(function(e){Object(I.m)(function(){n.saving=!1,n.editing_objectives_errors=e.response.data,n.onSaveErrorHandler(e.response.data.detail)})})}},{key:"createObjective",value:function(e){var n=this;this.editing_objectives_errors={},this.api.createObjective(e).then(function(t){Object(I.m)(function(){n.onSaveSuccessHandler(),n.active_pane_is_dirty=!1;var e=t.data;n.editing_objectives_data=[].concat(R(n.editing_objectives_data.filter(function(e){return"new"!=e.id})),[e])})}).catch(function(e){Object(I.m)(function(){n.saving=!1,n.editing_objectives_errors=e.response.data,n.onSaveErrorHandler(e.response.data.detail)})})}},{key:"deleteObjective",value:function(t){var n=this;"new"!=t?this.api.deleteObjective(t).then(function(e){Object(I.m)(function(){n.editing_objectives_data=n.editing_objectives_data.filter(function(e){return e.id!=t}),n.onDeleteSuccessHandler()})}).catch(function(e){Object(I.m)(function(){n.onSaveErrorHandler(e.response.data.detail)})}):this.editing_objectives_data=this.editing_objectives_data.filter(function(e){return"new"!=e.id})}},{key:"clearObjectiveEditingErrors",value:function(){this.editing_objectives_errors={}}},{key:"clearDisaggregationEditingErrors",value:function(){this.editing_disaggregations_errors={}}},{key:"addDisaggregation",value:function(){this.editing_disaggregations_data.find(function(e){return"new"==e.id})||(this.editing_disaggregations_data=[].concat(R(this.editing_disaggregations_data),[{id:"new",disaggregation_type:"",labels:[]}]))}},{key:"deleteDisaggregation",value:function(e){"new"!=e||(this.editing_disaggregations_data=this.editing_disaggregations_data.filter(function(e){return"new"!=e.id}))}},{key:"updateDisaggregation",value:function(e,t){var n=this;this.editing_disaggregations_errors={},this.api.updateDisaggregation(e,t).then(function(e){Object(I.m)(function(){n.onSaveSuccessHandler();var t=e.data;n.active_pane_is_dirty=!1,n.editing_disaggregations_data=n.editing_disaggregations_data.map(function(e){return e.id==t.id?t:e})})}).catch(function(e){n.saving=!1,n.editing_disaggregations_errors=e.response.data,n.onSaveErrorHandler()})}},{key:"createDisaggregation",value:function(e){var n=this;this.editing_disaggregations_errors={},this.api.createDisaggregation(e).then(function(t){Object(I.m)(function(){n.onSaveSuccessHandler();var e=t.data;n.active_pane_is_dirty=!1,n.editing_disaggregations_data=[].concat(R(n.editing_disaggregations_data.filter(function(e){return"new"!=e.id})),[e])})}).catch(function(e){Object(I.m)(function(){n.saving=!1,n.editing_disaggregations_errors=e.response.data,n.onSaveErrorHandler()})})}}])&&M(e.prototype,t),r&&M(e,r),n}()).prototype,"organizations",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=q(r.prototype,"users",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=q(r.prototype,"sectors",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=q(r.prototype,"filters",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{countries:[],organizations:[],sectors:[],programStatus:null,programs:[]}}}),c=q(r.prototype,"appliedFilters",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=q(r.prototype,"is_superuser",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=q(r.prototype,"allCountries",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=q(r.prototype,"countries",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=q(r.prototype,"country_count",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=q(r.prototype,"new_country",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=q(r.prototype,"fetching_main_listing",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=q(r.prototype,"current_page",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=q(r.prototype,"total_pages",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=q(r.prototype,"bulk_targets",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),h=q(r.prototype,"bulk_targets_all",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=q(r.prototype,"editing_target",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=q(r.prototype,"editing_errors",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),O=q(r.prototype,"fetching_editing_data",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=q(r.prototype,"editing_objectives_data",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=q(r.prototype,"editing_objectives_errors",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=q(r.prototype,"editing_disaggregations_data",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=q(r.prototype,"editing_disaggregations_errors",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),N=q(r.prototype,"saving",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=q(r.prototype,"bulk_targets",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),x=q(r.prototype,"applying_bulk_updates",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=q(r.prototype,"bulk_targets_all",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q(r.prototype,"fetchCountries",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"fetchCountries"),r.prototype),q(r.prototype,"applyFilters",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"applyFilters"),r.prototype),q(r.prototype,"changePage",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"changePage"),r.prototype),q(r.prototype,"changeFilter",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"changeFilter"),r.prototype),q(r.prototype,"clearFilters",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"clearFilters"),r.prototype),q(r.prototype,"toggleEditingTarget",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"toggleEditingTarget"),r.prototype),D=q(r.prototype,"active_editor_pane",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"profile"}}),q(r.prototype,"onProfilePaneChange",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"onProfilePaneChange"),r.prototype),q(r.prototype,"addCountry",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"addCountry"),r.prototype),q(r.prototype,"saveNewCountry",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"saveNewCountry"),r.prototype),q(r.prototype,"updateCountry",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"updateCountry"),r.prototype),q(r.prototype,"addObjective",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"addObjective"),r.prototype),q(r.prototype,"updateObjective",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"updateObjective"),r.prototype),q(r.prototype,"createObjective",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"createObjective"),r.prototype),q(r.prototype,"deleteObjective",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"deleteObjective"),r.prototype),q(r.prototype,"clearObjectiveEditingErrors",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"clearObjectiveEditingErrors"),r.prototype),q(r.prototype,"clearDisaggregationEditingErrors",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"clearDisaggregationEditingErrors"),r.prototype),q(r.prototype,"addDisaggregation",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"addDisaggregation"),r.prototype),q(r.prototype,"deleteDisaggregation",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"deleteDisaggregation"),r.prototype),q(r.prototype,"updateDisaggregation",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"updateDisaggregation"),r.prototype),q(r.prototype,"createDisaggregation",[I.d],Object.getOwnPropertyDescriptor(r.prototype,"createDisaggregation"),r.prototype),r),Y=n("okNM"),W=n("Z2Y6"),$=n("TGVD"),G=n("RCjz"),Q=n("TSYQ"),Z=n.n(Q);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re,ae=Object(Y.a)(V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,te(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,F.a.Component),n=t,(r=[{key:"updateActivePage",value:function(e){this.props.new||this.props.notifyPaneChange(e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.ProfileSection,r=e.StrategicObjectiveSection,a=e.DisaggregationSection,i=e.active_pane;return F.a.createElement("div",{className:"tab-set--vertical"},F.a.createElement("ul",{className:"nav nav-tabs"},F.a.createElement("li",{className:"nav-item"},F.a.createElement("a",{href:"#",className:Z()("nav-link",{active:"profile"==i}),onClick:function(e){e.preventDefault(),t.updateActivePage("profile")}},gettext("Profile"))),F.a.createElement("li",{className:"nav-item"},F.a.createElement("a",{href:"#",className:Z()("nav-link",{active:"objectives"==i,disabled:this.props.new}),onClick:function(e){e.preventDefault(),t.updateActivePage("objectives")}},gettext("Strategic Objectives"))),F.a.createElement("li",{className:"nav-item"},F.a.createElement("a",{href:"#",className:Z()("nav-link",{active:"disaggregations"==i,disabled:this.props.new}),onClick:function(e){e.preventDefault(),t.updateActivePage("disaggregations")}},gettext("Country Disaggregations")))),F.a.createElement("div",{className:"tab-content"},"profile"==i&&F.a.createElement(n,null),"objectives"==i&&F.a.createElement(r,null),"disaggregations"==i&&F.a.createElement(a,null)))}}])&&K(n.prototype,r),a&&K(n,a),t}())||V;function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue,pe,de=Object(Y.a)(function(e){var t=e.errorMessages;return t?F.a.createElement("div",{className:"invalid-feedback"},t.map(function(e,t){return F.a.createElement("span",{key:t},e)})):null}),ge=Object(Y.a)(re=function(e){function r(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=se(this,ce(r).call(this,e));var n=e.country_data;return t.state={original_data:Object.assign({},n),managed_data:Object.assign({},n)},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(r,F.a.Component),t=r,(n=[{key:"hasUnsavedDataAction",value:function(){this.props.onIsDirtyChange(JSON.stringify(this.state.managed_data)!=JSON.stringify(this.state.original_data))}},{key:"save",value:function(){var e=this.props.country_data.id,t=this.state.managed_data;this.props.onUpdate(e,t)}},{key:"saveNew",value:function(){var e=this.state.managed_data;this.props.onCreate(e)}},{key:"updateFormField",value:function(e,t){var n,r,a,i=this;this.setState({managed_data:Object.assign(this.state.managed_data,(n={},r=e,a=t,r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n))},function(){return i.hasUnsavedDataAction()})}},{key:"resetForm",value:function(){var e=this;this.setState({managed_data:Object.assign({},this.state.original_data)},function(){return e.hasUnsavedDataAction()})}},{key:"formErrors",value:function(e){return this.props.errors[e]}},{key:"render",value:function(){var t=this,n=this.state.managed_data;this.props.organizationOptions.find(function(e){return e.value==n.organization});return F.a.createElement("div",{className:"tab-pane--react"},F.a.createElement("form",{className:"form"},F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"country-name-input"},gettext("Country name"),F.a.createElement("span",{className:"required"},"*")),F.a.createElement("input",{type:"text",value:n.country,onChange:function(e){return t.updateFormField("country",e.target.value)},className:Z()("form-control",{"is-invalid":this.formErrors("country")}),id:"country-name-input",required:!0}),F.a.createElement(de,{errorMessages:this.formErrors("country")})),F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"country-description-input"},gettext("Description")),F.a.createElement("textarea",{value:n.description,onChange:function(e){return t.updateFormField("description",e.target.value)},className:Z()("form-control",{"is-invalid":this.formErrors("description")}),id:"country-description-input"}),F.a.createElement(de,{errorMessages:this.formErrors("description")})),F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"country-code-input"},gettext("Country Code")),F.a.createElement("input",{value:n.code,onChange:function(e){return t.updateFormField("code",e.target.value)},className:Z()("form-control",{"is-invalid":this.formErrors("code")}),id:"country-code-input"}),F.a.createElement(de,{errorMessages:this.formErrors("code")})),this.props.new&&F.a.createElement("div",{className:"form-group btn-row"},F.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(e){return t.saveNew(e)}},gettext("Save Changes")),F.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return t.resetForm()}},gettext("Reset"))),!this.props.new&&F.a.createElement("div",{className:"form-group btn-row"},F.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(e){return t.save(e)}},gettext("Save Changes")),F.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return t.resetForm()}},gettext("Reset")))))}}])&&oe(t.prototype,n),a&&oe(t,a),r}())||re,fe=n("IP2g");function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){he(t,e,n[e])})}return t}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),e}function Ee(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne,Ce,xe=Object(Y.a)(function(e){var t=e.errorMessages;return t?F.a.createElement("div",{className:"invalid-feedback"},t.map(function(e,t){return F.a.createElement("span",{key:t},e)})):null}),Se=Object(Y.a)(ue=function(e){function a(e){var t;ve(this,a);var n=(t=Ee(this,je(a).call(this,e))).props.disaggregation,r=n.labels.map(function(e){return ye({},e)});return t.state={managed_data:ye({},n,{labels:be(r)})},t}return we(a,F.a.Component),Oe(a,[{key:"hasUnsavedDataAction",value:function(){var e=this.props.disaggregation.labels.map(function(e){return ye({},e)});this.props.onIsDirtyChange(JSON.stringify(this.state.managed_data)!=JSON.stringify(ye({},this.props.disaggregation,{labels:be(e)})))}},{key:"resetForm",value:function(){var e=this;this.props.clearErrors();var t=this.props.disaggregation,n=t.labels.map(function(e){return ye({},e)});this.setState({managed_data:ye({},t,{labels:be(n)})},function(){return e.hasUnsavedDataAction()})}},{key:"formErrors",value:function(e){return this.props.errors[e]}},{key:"updateDisaggregationTypeField",value:function(e){var t=this;this.setState({managed_data:ye({},this.state.managed_data,{disaggregation_type:e})},function(){return t.hasUnsavedDataAction()})}},{key:"updateLabel",value:function(n,r){var e=this,t=this.state.managed_data,a=this.state.managed_data.labels.map(function(e,t){return t==n?Object.assign(e,{label:r}):e});this.setState({managed_data:ye({},t,{labels:be(a)})},function(){return e.hasUnsavedDataAction()})}},{key:"appendLabel",value:function(){var e=this,t=this.state.managed_data;this.setState({managed_data:ye({},t,{labels:[].concat(be(t.labels),[{id:"new",label:""}])})},function(){return e.hasUnsavedDataAction()})}},{key:"deleteLabel",value:function(n){var e=this,t=this.state.managed_data,r=t.labels.filter(function(e,t){return t!=n||e.in_use});this.setState({managed_data:ye({},t,{labels:be(r)})},function(){return e.hasUnsavedDataAction()})}},{key:"save",value:function(){var e=this.state.managed_data;this.props.saveDisaggregation(e)}},{key:"render",value:function(){var n=this,e=this.props,t=e.disaggregation,r=e.expanded,a=e.expandAction,i=e.deleteAction,o=e.errors,s=this.state.managed_data;return F.a.createElement("div",{className:"edit-disaggregation__row"},F.a.createElement("div",{className:"row-expand__toggle"},F.a.createElement("span",{onClick:a},F.a.createElement(fe.a,{icon:r?"caret-down":"caret-right"}))),F.a.createElement("div",{className:"row__content"},F.a.createElement("a",{onClick:a,tabIndex:"0"},"new"==t.id?"New Disaggregation type":t.disaggregation_type),r&&F.a.createElement("form",null,F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"disaggregation-type-input"},gettext("Disaggregation Type"),"*"),F.a.createElement("input",{id:"disaggregation-type-input",className:Z()("form-control",{"is-invalid":this.formErrors("disaggregation_type")}),value:s.disaggregation_type,onChange:function(e){return n.updateDisaggregationTypeField(e.target.value)},type:"text",required:!0}),F.a.createElement(xe,{errorMessages:this.formErrors("disaggregation_type")})),F.a.createElement("label",null,"Labels"),s.labels.map(function(e,t){return F.a.createElement("div",{key:t,className:"form-group disaggregation-label-group"},F.a.createElement("input",{value:e.label,onChange:function(e){return n.updateLabel(t,e.target.value)},className:Z()("form-control",{"is-invalid":!!o.labels&&Object.keys(o.labels[t]).length})}),F.a.createElement("a",{tabIndex:"0",onClick:function(){return n.deleteLabel(t)},className:Z()("btn btn-link btn-danger",{disabled:e.in_use}),disabled:e.in_use},F.a.createElement("i",{className:"fas fa-trash"}),gettext("Remove")))}),F.a.createElement("div",null,F.a.createElement("a",{tabIndex:"0",onClick:function(){return n.appendLabel()},className:"btn btn-link btn-add"},F.a.createElement("i",{className:"fas fa-plus-circle"}),gettext("Add another option"))),F.a.createElement("div",{className:"disaggregation-form-buttons"},F.a.createElement("div",{className:"form-row btn-row"},"new"==t.id?F.a.createElement("button",{className:"btn btn-primary",onClick:function(e){return n.save()},type:"button"},gettext("Save Changes")):F.a.createElement("button",{className:"btn btn-primary",onClick:function(e){return n.save()},type:"button"},gettext("Save Changes")),F.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return n.resetForm()}},gettext("Reset"))),F.a.createElement("div",{className:"right-buttons"},"new"==t.id&&F.a.createElement("a",{tabIndex:"0",onClick:i,className:"btn btn-link btn-danger"},F.a.createElement("i",{className:"fas fa-trash"}),gettext("Delete")))))))}}]),a}())||ue,De=Object(Y.a)(pe=function(e){function n(e){var t;return ve(this,n),(t=Ee(this,je(n).call(this,e))).state={expanded_id:null,is_dirty:!1},t}return we(n,F.a.Component),Oe(n,[{key:"handleDirtyUpdate",value:function(e){this.setState({is_dirty:e}),this.props.onIsDirtyChange(e)}},{key:"dirtyConfirm",value:function(){return!this.state.is_dirty||this.state.is_dirty&&confirm(gettext("You have unsaved changes. Are you sure you want to discard them?"))}},{key:"toggleExpand",value:function(e){if(this.props.clearErrors(),this.dirtyConfirm()){var t=this.state.expanded_id;e==t?this.setState({expanded_id:null}):this.setState({expanded_id:e}),"new"==t&&this.props.onDelete(t),this.handleDirtyUpdate(!1)}}},{key:"addDisaggregation",value:function(){this.dirtyConfirm()&&(this.props.addDisaggregation(),this.setState({expanded_id:"new"}))}},{key:"saveDisaggregation",value:function(e){var t=Object.assign(e,{country:this.props.country_id});"new"==e.id?this.props.onCreate(t):this.props.onUpdate(e.id,t),this.setState({is_dirty:!1})}},{key:"render",value:function(){var r=this,e=this.props.disaggregations,t=this.state.expanded_id;return F.a.createElement("div",{className:"tab-pane--react"},F.a.createElement("h3",null,"Country Disaggregations"),e.map(function(n){return F.a.createElement(Se,{key:n.id,disaggregation:n,expanded:n.id==t,expandAction:function(){return r.toggleExpand(n.id)},updateLabel:function(e,t){return r.updateLabel(n.id,e,t)},deleteAction:function(){return r.props.onDelete(n.id)},saveDisaggregation:function(e){return r.saveDisaggregation(e)},errors:r.props.errors,clearErrors:r.props.clearErrors,onIsDirtyChange:function(e){return r.handleDirtyUpdate(e)}})}),F.a.createElement("div",null,!e.find(function(e){return"new"==e.id})&&F.a.createElement("a",{tabIndex:"0",className:"btn btn-link btn-add",onClick:function(){return r.addDisaggregation()}},F.a.createElement("i",{className:"fas fa-plus-circle"}),gettext("Add country disaggregation"))))}}]),n}())||pe,Pe=n("y2Vs");function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Ae(t,e,n[e])})}return t}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t&&Re(e.prototype,t),n&&Re(e,n),e}function Te(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=[{value:"proposed",label:gettext("Proposed")},{value:"active",label:gettext("Active")},{value:"acheived",label:gettext("Achieved")}],Ve=Object(Y.a)(function(e){var t=e.errorMessages;return t?F.a.createElement("div",{className:"invalid-feedback"},t.map(function(e,t){return F.a.createElement("span",{key:t},e)})):null}),Je=Object(Y.a)(Ne=function(e){function r(e){var t;Ie(this,r),t=Te(this,Ue(r).call(this,e));var n=e.objective;return t.state={managed_data:ze({},n)},t}return He(r,F.a.Component),Le(r,[{key:"hasUnsavedDataAction",value:function(){this.props.onIsDirtyChange(JSON.stringify(this.state.managed_data)!=JSON.stringify(this.props.objective))}},{key:"updateFormField",value:function(e,t){var n=this,r=this.state.managed_data,a=Object.assign(r,Ae({},e,t));this.setState({managed_data:a},function(){return n.hasUnsavedDataAction()})}},{key:"formErrors",value:function(e){return this.props.errors[e]}},{key:"resetForm",value:function(){var e=this;this.props.clearErrors();var t=this.props.objective;this.setState({managed_data:ze({},t)},function(){return e.hasUnsavedDataAction()})}},{key:"render",value:function(){var t=this,e=this.props,n=e.objective,r=e.expanded,a=e.expandAction,i=e.deleteAction,o=e.saveObjective,s=e.createObjective,c=this.state.managed_data,l=c.status,u=l?qe.find(function(e){return e.value==l}):{};return F.a.createElement("div",{className:"edit-strategic-objective__row"},F.a.createElement("div",{className:"row-expand__toggle"},F.a.createElement("span",{onClick:a},F.a.createElement(fe.a,{icon:r?"caret-down":"caret-right"}))),F.a.createElement("div",{className:"row__content"},F.a.createElement("a",{onClick:a,tabIndex:"0"},"new"==n.id?"New Strategic Objective":n.name),r&&F.a.createElement("form",{className:"form"},F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"objective-name-input"},gettext("Code"),"*"),F.a.createElement("input",{id:"objective-name-input",className:Z()("form-control",{"is-invalid":this.formErrors("name")}),value:c.name,onChange:function(e){return t.updateFormField("name",e.target.value)},type:"text",required:!0}),F.a.createElement(Ve,{errorMessages:this.formErrors("name")})),F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"objective-description-input"},gettext("Objective"),"*"),F.a.createElement("textarea",{id:"objective-description-input",className:Z()("form-control",{"is-invalid":this.formErrors("description")}),value:c.description,onChange:function(e){return t.updateFormField("description",e.target.value)},type:"text"}),F.a.createElement(Ve,{errorMessages:this.formErrors("description")})),F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"objective-status-input"},gettext("Status")),F.a.createElement(Pe.b,{value:u,options:qe,onChange:function(e){return t.updateFormField("status",e.value)},className:Z()("react-select",{"is-invalid":this.formErrors("status")}),id:"objective-status-input"}),F.a.createElement(Ve,{errorMessages:this.formErrors("status")})),F.a.createElement("div",{className:"objective-form-buttons"},"new"==n.id&&F.a.createElement("div",{className:"form-group btn-row"},F.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return s(c)}},gettext("Save Changes"))),"new"!=n.id&&F.a.createElement("div",{className:"form-group btn-row"},F.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return o(c)}},gettext("Save Changes")),F.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return t.resetForm()}},gettext("Reset"))),F.a.createElement("div",{className:"right-buttons"},F.a.createElement("a",{tabIndex:"0",onClick:i,className:"btn btn-link btn-danger"},F.a.createElement("i",{className:"fas fa-trash"}),gettext("Delete")))))))}}]),r}())||Ne,Xe=Object(Y.a)(Ce=function(e){function n(e){var t;return Ie(this,n),(t=Te(this,Ue(n).call(this,e))).state={expanded_id:null,is_dirty:!1},t}return He(n,F.a.Component),Le(n,[{key:"handleDirtyUpdate",value:function(e){this.setState({is_dirty:e}),this.props.onIsDirtyChange(e)}},{key:"dirtyConfirm",value:function(){return!this.state.is_dirty||this.state.is_dirty&&confirm(gettext("You have unsaved changes. Are you sure you want to discard them?"))}},{key:"toggleExpand",value:function(e){if(this.props.clearErrors(),this.dirtyConfirm()){var t=this.state.expanded_id;e==t?this.setState({expanded_id:null}):this.setState({expanded_id:e}),"new"==t&&this.props.onDelete(t),this.handleDirtyUpdate(!1)}}},{key:"addObjective",value:function(){this.dirtyConfirm()&&(this.props.clearErrors(),this.props.addObjective(),this.setState({expanded_id:"new"}),this.handleDirtyUpdate(!1))}},{key:"deleteObjectiveAction",value:function(e){"new"!=e?confirm(gettext("Delete Strategic Objective?"))&&this.props.onDelete(e):this.props.onDelete(e)}},{key:"updateObjective",value:function(e,t){this.props.onUpdate(e,t),this.setState({is_dirty:!1})}},{key:"createObjective",value:function(e){var t=Object.assign(e,{country:this.props.country_id});this.props.onCreate(t),this.setState({is_dirty:!1})}},{key:"render",value:function(){var n=this,e=this.state,r=e.expanded_id,t=(e.new_objective,this.props.objectives);return F.a.createElement("div",{className:"tab-pane--react"},F.a.createElement("h3",null,gettext("Strategic Objectives")),t.map(function(t){return F.a.createElement(Je,{key:t.id,objective:t,expanded:t.id==r,expandAction:function(){return n.toggleExpand(t.id)},deleteAction:function(){return n.deleteObjectiveAction(t.id)},saveObjective:function(e){return n.updateObjective(t.id,e)},createObjective:function(e){return n.createObjective(e)},errors:n.props.errors,clearErrors:n.props.clearErrors,onIsDirtyChange:function(e){return n.handleDirtyUpdate(e)}})}),F.a.createElement("div",null,F.a.createElement("a",{tabIndex:"0",onClick:function(){return n.addObjective()},className:"btn btn-link btn-add"},F.a.createElement("i",{className:"fas fa-plus-circle"}),gettext("Add strategic objective"))))}}]),n}())||Ce,Ye=n("DDFe"),We=n("tnXs");function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ge=Object(Y.a)(function(e){var t=e.store,n=e.filterOptions;return F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"countries_filter"},gettext("Countries")),F.a.createElement(W.a,{value:t.filters.countries,options:n,onChange:function(e){return t.changeFilter("countries",e)},placeholder:gettext("None Selected"),id:"countries_filter"}))}),Qe=Object(Y.a)(function(e){var t=e.store,n=e.filterOptions;return F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"organizations_filter"},gettext("Organizations")),F.a.createElement(W.a,{value:t.filters.organizations,options:n,onChange:function(e){return t.changeFilter("organizations",e)},placeholder:gettext("None Selected"),id:"organizations_filter"}))}),Ze=Object(Y.a)(function(e){var t=e.store,n=e.filterOptions;return F.a.createElement("div",{className:"form-group"},F.a.createElement("label",{htmlFor:"programs-filter"},gettext("Programs")),F.a.createElement(W.a,{value:t.filters.programs,options:n,onChange:function(e){return t.changeFilter("programs",e)},placeholder:gettext("None Selected"),id:"programs-filter"}))}),Be=Object(Y.a)(function(e){var a=e.store,t=a.allCountries.map(function(e){return{value:e.id,label:e.country}}),i=Object.entries(a.organizations).map(function(e){var t=$e(e,2),n=(t[0],t[1]);return{value:n.id,label:n.name}}),n=Object.entries(a.allPrograms).map(function(e){var t=$e(e,2),n=(t[0],t[1]);return{value:n.id,label:n.name}});return F.a.createElement("div",{id:"country-management-index-view",className:"row"},F.a.createElement(We.a,null,F.a.createElement("div",{className:"filter-section"},F.a.createElement(Qe,{store:a,filterOptions:i}),F.a.createElement(Ze,{store:a,filterOptions:n}),F.a.createElement(Ge,{store:a,filterOptions:t}),F.a.createElement("div",{className:"filter-buttons"},F.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.applyFilters()}},gettext("Apply")),F.a.createElement("button",{className:"btn btn-inverse",onClick:function(){return a.clearFilters()}},gettext("Reset"))))),F.a.createElement("div",{className:"col admin-list"},F.a.createElement("header",{className:"page-title"},F.a.createElement("h1",null,gettext("Admin:")," ",F.a.createElement("small",null,gettext("Countries")))),F.a.createElement("div",{className:"admin-list__controls"},F.a.createElement("div",{className:"controls__bulk-actions"}),a.is_superuser&&F.a.createElement("div",{className:"controls__buttons"},F.a.createElement("a",{href:"#",tabIndex:"0",className:"btn btn-link btn-add",onClick:function(){return a.addCountry()}},F.a.createElement("i",{className:"fas fa-plus-circle"}),gettext("Add Country")))),F.a.createElement(Ye.a,{isLoading:a.fetching_main_listing||a.applying_bulk_updates},F.a.createElement("div",{className:"admin-list__table"},F.a.createElement($.a,{newData:a.new_country,data:a.countries,keyField:"id",HeaderRow:function(e){var t=e.Col,n=e.Row;return F.a.createElement(n,null,F.a.createElement(t,{size:".2"}),F.a.createElement(t,{size:"2",className:"td--stretch"},gettext("Country")),F.a.createElement(t,null,gettext("Organizations")),F.a.createElement(t,null,gettext("Programs")),F.a.createElement(t,null,gettext("Users")))},Row:function(e){var t=e.Col,n=e.Row,r=e.data;return F.a.createElement(n,{expanded:r.id==a.editing_target,Expando:Object(Y.a)(function(e){var t=e.Wrapper;return F.a.createElement(t,null,F.a.createElement(ae,{notifyPaneChange:function(e){return a.onProfilePaneChange(e)},active_pane:a.active_editor_pane,new:"new"==r.id,ProfileSection:Object(Y.a)(function(){return F.a.createElement(Ye.a,{isLoading:a.fetching_editing_data||a.saving},F.a.createElement(ge,{new:"new"==r.id,country_data:r,organizationOptions:i,onUpdate:function(e,t){return a.updateCountry(e,t)},onCreate:function(e){return a.saveNewCountry(e)},errors:a.editing_errors,onIsDirtyChange:function(e){return a.setActiveFormIsDirty(e)}}))}),StrategicObjectiveSection:Object(Y.a)(function(){return F.a.createElement(Ye.a,{isLoading:a.fetching_editing_data||a.saving},F.a.createElement(Xe,{country_id:r.id,objectives:a.editing_objectives_data,addObjective:function(){return a.addObjective()},onUpdate:function(e,t){return a.updateObjective(e,t)},onCreate:function(e){return a.createObjective(e)},onDelete:function(e){return a.deleteObjective(e)},errors:a.editing_objectives_errors,clearErrors:function(){return a.clearObjectiveEditingErrors()},onIsDirtyChange:function(e){return a.setActiveFormIsDirty(e)}}))}),DisaggregationSection:Object(Y.a)(function(){return F.a.createElement(Ye.a,{isLoading:a.fetching_editing_data||a.saving},F.a.createElement(De,{country_id:r.id,disaggregations:a.editing_disaggregations_data,addDisaggregation:function(){return a.addDisaggregation()},onDelete:function(e){return a.deleteDisaggregation(e)},onUpdate:function(e,t){return a.updateDisaggregation(e,t)},onCreate:function(e){return a.createDisaggregation(e)},errors:a.editing_disaggregations_errors,clearErrors:function(){return a.clearDisaggregationEditingErrors()},onIsDirtyChange:function(e){return a.setActiveFormIsDirty(e)}}))}),fetchObjectives:function(e){return a.fetchObjectives(e)}}))})},F.a.createElement(t,{size:"0.2"}),F.a.createElement(t,{size:"2",className:"td--stretch"},F.a.createElement("div",{className:"expando-toggle icon__clickable",onClick:function(){return a.toggleEditingTarget(r.id)}},F.a.createElement("div",{className:"expando-toggle__icon"},F.a.createElement(fe.a,{icon:a.editing_target==r.id?"caret-down":"caret-right"})),F.a.createElement("div",{className:"expando-toggle__label"},F.a.createElement("i",{className:"fas fa-globe"})," ",r.country||"---"))),F.a.createElement(t,{className:"text-nowrap"},r.organizations.length?F.a.createElement("a",{href:"/tola_management/organization/?countries[]=".concat(r.id)},F.a.createElement("i",{className:"fas fa-building"})," ",r.organizations.length," ",gettext("Organizations")):"---"),F.a.createElement(t,{className:"text-nowrap"},r.programCount?F.a.createElement("a",{href:"/tola_management/program/?countries[]=".concat(r.id)},F.a.createElement("i",{className:"fas fa-cubes"})," ",r.programCount," ",gettext("Programs")):"---"),F.a.createElement(t,{className:"text-nowrap"},r.user_count?F.a.createElement("a",{href:"/tola_management/user/?countries[]=".concat(r.id)},F.a.createElement("i",{className:"fas fa-users"})," ",r.user_count," ",gettext("Users")):"---"))}}))),F.a.createElement("div",{className:"admin-list__metadata"},F.a.createElement("div",{className:"metadata__count text-muted text-small"},a.country_count?"".concat(a.country_count," ").concat(gettext("countries")):"---"),F.a.createElement("div",{className:"metadata__controls"},a.total_pages&&F.a.createElement(G.a,{pageCount:a.total_pages,initialPage:a.current_page,onPageChange:function(e){return a.changePage(e)}})))))}),Ke=n("XoI5");var et=new X({fetchCountries:function(e,t){return Ke.a.get("/tola_management/country/",{params:function(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,n,r;t=a,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return a}({page:e},t)}).then(function(e){var t=e.data;return{results:t.results,total_results:t.count,total_pages:t.page_count,next_page:t.next,prev_page:t.previous}})},fetchCountryObjectives:function(e){return Ke.a.get("/tola_management/countryobjective/",{params:{country:e}})},fetchCountryDisaggregations:function(e){return Ke.a.get("/tola_management/countrydisaggregation/",{params:{country:e}})},createCountry:function(e){return Ke.a.post("/tola_management/country/",e)},updateCountry:function(e,t){return Ke.a.put("/tola_management/country/".concat(e,"/"),t)},createObjective:function(e){return Ke.a.post("/tola_management/countryobjective/",e)},updateObjective:function(e,t){return Ke.a.put("/tola_management/countryobjective/".concat(e,"/"),t)},deleteObjective:function(e){return Ke.a.delete("/tola_management/countryobjective/".concat(e))},createDisaggregation:function(e){return Ke.a.post("/tola_management/countrydisaggregation/",e)},updateDisaggregation:function(e,t){return Ke.a.put("/tola_management/countrydisaggregation/".concat(e,"/"),t)}},{allCountries:jsContext.countries,organizations:jsContext.organizations,allPrograms:jsContext.programs,is_superuser:jsContext.is_superuser});A.a.render(F.a.createElement(Be,{store:et}),document.querySelector("#app_root"))},RCjz:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),i=n("werx"),o=n.n(i);n("okNM");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){return a.a.createElement(o.a,s({previousLabel:"‹",previousClassName:"page-item previous",previousLinkClassName:"page-link",nextLabel:"›",nextClassName:"page-item next",nextLinkClassName:"page-link",breakLabel:"...",disabledClassName:"disabled",breakClassName:"page-item disabled",breakLinkClassName:"page-link",pageClassName:"page-item",pageLinkClassName:"page-link",marginPagesDisplayed:2,pageRangeDisplayed:5,containerClassName:"pagination",activeClassName:"active"},e))}},TGVD:function(e,t,n){"use strict";var o=n("okNM"),r=n("q1tI"),s=n.n(r),a=n("TSYQ"),c=n.n(a);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=function(e){var t=e.className,n=(e.size,u(e,["className","size"]));return s.a.createElement("td",l({className:["mgmt-table__col",t].join(" ")},n),n.children)},p=function(e){var t=e.className,n=(e.size,u(e,["className","size"]));return s.a.createElement("th",l({className:["mgmt-table__col",t].join(" ")},n),n.children)},d=function(e){var t=e.className,n=u(e,["className"]);return s.a.createElement("tr",l({className:["mgmt-table__row",t].join(" ")},n),n.children)},g=function(e){var t=e.className,n=u(e,["className"]);return s.a.createElement("tr",l({className:["mgmt-table__row table-header",t].join(" ")},n),n.children)},f=Object(o.a)(function(e){var t=e.className,n=e.expanded,r=e.Expando,a=u(e,["className","expanded","Expando"]);if(r){var i=Object(o.a)(r);return s.a.createElement("tbody",l({className:c()(["mgmt-table__body",t].join(" "),{"is-expanded":n})},a),s.a.createElement(d,null,a.children),n&&s.a.createElement(i,{Wrapper:m}))}return s.a.createElement("tbody",l({className:["mgmt-table__body",t].join(" ")},a),s.a.createElement(d,null,a.children))}),m=function(e){var t=e.className,n=u(e,["className"]);return s.a.createElement("tr",l({className:["mgmt-table__row--expanded",t].join(" ")},n),s.a.createElement("td",{colSpan:"6"},n.children))},b=Object(o.a)(function(e){var t=e.data,n=e.Row,r=e.keyField,a=(u(e,["data","Row","keyField"]),Object(o.a)(n));return t.map(function(e){return s.a.createElement(a,{key:e[r],data:e,Col:i,Row:f})})}),y=Object(o.a)(function(e){var t=e.HeaderRow,n=e.className,r=u(e,["HeaderRow","className"]),a=Object(o.a)(t);return s.a.createElement("table",{className:["table bg-white",n].join(" ")},s.a.createElement("thead",null,s.a.createElement(a,{Col:p,Row:g})),s.a.createElement(b,r))});t.a=y},XoI5:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("vDqi"),a=n.n(r).a.create({withCredentials:!0,baseURL:"/api/",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")}})},Z2Y6:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),i=n("y2Vs"),o=n("5Xg7"),s=n("okNM");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){return i.a.Option&&a.a.createElement(i.a.Option,e,a.a.createElement("input",{className:"checkboxed-multi-select-checkbox",type:"checkbox",checked:e.isSelected,onChange:function(e){}})," ",e.data.label)},u=Object(s.a)(function(e){return a.a.createElement(i.b,c({isMulti:!0,closeMenuOnSelect:!1,hideSelectedOptions:!1,components:{MenuList:o.a,Option:l}},e))});t.a=u},tnXs:function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=l(this,u(n).call(this,e))).state={folded:!1},t}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,i.a.Component),t=n,(r=[{key:"toggleFolded",value:function(){this.setState({folded:!this.state.folded})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=s(t,["className"]),a=this.state.folded?"fa-chevron-right":"fa-chevron-left";return i.a.createElement("div",o({className:"folding-sidebar "+(n||"")},r),!this.state.folded&&i.a.createElement(i.a.Fragment,null,this.props.children),i.a.createElement("div",{className:"folding-sidebar__trigger",onClick:function(){return e.toggleFolded()}},i.a.createElement("i",{key:a},i.a.createElement("span",{className:"fa "+a}))))}}])&&c(t.prototype,r),a&&c(t,a),n}();t.a=d}},[["NlW9",0,1]]]);