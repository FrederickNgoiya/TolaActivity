(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1faY":function(e,t,n){"use strict";n.r(t);var r,a,o,i,l,c,s,u,p,m,f,g,d,h,b,y,v,_,E,w,O,k,N,x,j,P=n("q1tI"),S=n.n(P),C=n("i8i4"),F=n.n(C),A=n("2vnA");function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){I(t,e,n[e])})}return t}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(n,r,e,t,a){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var H,G=(a=L((r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),T(this,"countries",a,this),T(this,"allCountries",o,this),T(this,"organizations",i,this),T(this,"users",l,this),T(this,"sectors",c,this),T(this,"filters",s,this),T(this,"appliedFilters",u,this),T(this,"programFilterPrograms",p,this),T(this,"programs",m,this),T(this,"program_count",f,this),T(this,"new_program",g,this),T(this,"fetching_main_listing",d,this),T(this,"current_page",h,this),T(this,"total_pages",b,this),T(this,"bulk_targets",y,this),T(this,"bulk_targets_all",v,this),T(this,"editing_target",_,this),T(this,"editing_errors",E,this),T(this,"fetching_editing_history",w,this),T(this,"editing_history",O,this),T(this,"saving",k,this),T(this,"applying_bulk_updates",N,this),T(this,"active_editor_pane",x,this),T(this,"changelog_expanded_rows",j,this),this.active_pane_is_dirty=!1,this.api=e,Object.assign(this,t),this.appliedFilters=D({},this.filters),this.fetchPrograms()}var e,t,r;return e=n,(t=[{key:"marshalFilters",value:function(e){return Object.entries(e).reduce(function(e,t){var n=z(t,2),r=n[0],a=n[1];return Array.isArray(a)?e[r]=a.map(function(e){return e.value}):a&&(e[r]=a.value),e},{})}},{key:"dirtyConfirm",value:function(){return!this.active_pane_is_dirty||this.active_pane_is_dirty&&confirm(gettext("You have unsaved changes. Are you sure you want to discard them?"))}},{key:"onProfilePaneChange",value:function(e){this.dirtyConfirm()&&(this.active_editor_pane=e,this.active_pane_is_dirty=!1)}},{key:"setActiveFormIsDirty",value:function(e){this.active_pane_is_dirty=e}},{key:"setActivePaneSaveAction",value:function(e){this.active_pane_save=e}},{key:"fetchPrograms",value:function(){var t=this;this.dirtyConfirm()&&(this.fetching_main_listing=!0,this.api.fetchPrograms(this.current_page+1,this.marshalFilters(this.appliedFilters)).then(function(e){Object(A.p)(function(){t.fetching_main_listing=!1,t.programs=e.results,t.program_count=e.total_results,t.total_pages=e.total_pages,t.next_page=e.next_page,t.previous_page=e.previous_page,t.active_editor_pane="profile",t.active_pane_is_dirty=!1})}),this.api.fetchProgramsForFilter(this.marshalFilters(this.appliedFilters)).then(function(e){Object(A.p)(function(){t.programFilterPrograms=e.data})}))}},{key:"applyFilters",value:function(){this.appliedFilters=D({},this.filters),this.current_page=0,this.fetchPrograms()}},{key:"changePage",value:function(e){e.selected!=this.current_page&&(this.current_page=e.selected,this.bulk_targets=new Map,this.bulk_targets_all=!1,this.fetchPrograms())}},{key:"changeFilter",value:function(e,t){this.filters=Object.assign(this.filters,I({},e,t))}},{key:"clearFilters",value:function(){this.filters=Object.assign(this.filters,{countries:[],organizations:[],sectors:[],programStatus:null,programs:[],users:[]})}},{key:"toggleEditingTarget",value:function(e){var t=this;this.dirtyConfirm()&&("new"==this.editing_target&&(this.programs.shift(),this.editing_errors={}),this.active_editor_pane="profile",this.editing_target==e?(this.editing_target=!1,this.editing_errors={}):(this.editing_target=e,this.fetching_editing_history=!0,this.api.fetchProgramHistory(e).then(function(e){Object(A.p)(function(){t.fetching_editing_history=!1,t.editing_history=e.data})})))}},{key:"updateLocalPrograms",value:function(n){this.programs=this.programs.reduce(function(e,t){return t.id==n.id?e.push(n):e.push(t),e},[])}},{key:"onSaveSuccessHandler",value:function(){PNotify.success({text:gettext("Successfully saved"),delay:5e3})}},{key:"onSaveErrorHandler",value:function(){PNotify.error({text:gettext("Saving failed"),delay:5e3})}},{key:"onGAITDatesSyncSuccess",value:function(){PNotify.success({text:gettext("Successfully synced GAIT program start and end dates"),delay:5e3})}},{key:"onGAITDatesSyncFailure",value:function(e,t){var n=this;PNotify.notice({text:gettext("Failed to sync GAIT program start and end dates: "+e),hide:!1,modules:{Confirm:{confirm:!0,buttons:[{text:gettext("Retry"),primary:!0,click:function(e){n.syncGAITDates(t),e.close()}},{text:gettext("Ignore"),click:function(e){e.close()}}]}}})}},{key:"createProgram",value:function(){if(this.dirtyConfirm()){"new"==this.editing_target&&this.programs.shift(),this.active_editor_pane="profile",this.active_pane_is_dirty=!1;this.programs.unshift({id:"new",name:"",gaitid:"",fundcode:"",funding_status:"Funded",description:"",country:[],sector:[]}),this.editing_target="new"}}},{key:"validateGaitId",value:function(e){var t=this;if(e.gaitid){var n=e.id||0;return new Promise(function(a,o){t.api.validateGaitId(e.gaitid,n).then(function(e){if(!1===e.data.unique){var t=gettext("The GAIT ID for this program is shared with at least one other program."),n=gettext("View programs with this ID in GAIT."),r="".concat(t,' <a href="').concat(e.data.gait_link,'" target="_blank">').concat(n,"</a>");window.create_no_rationale_changeset_notice({message_text:gettext("Are you sure you want to continue?"),on_submit:a,on_cancel:o,preamble:r})}else a()}).catch(function(e){return o(e)})})}return new Promise(function(e,t){return e()})}},{key:"syncGAITDates",value:function(n){var r=this;return this.api.syncGAITDates(n).then(function(e){var t=e.data.gait_error;t?r.onGAITDatesSyncFailure(t,n):r.onGAITDatesSyncSuccess()}).catch(function(e){return r.onGAITDatesSyncFailure(gettext("There was a network or server connection error."),n),Promise.reject("Request error to sync GAIT dates")})}},{key:"saveNewProgram",value:function(e){var a=this;e.id=null,this.saving=!0,this.validateGaitId(e).then(function(){return a.api.createProgram(e).catch(function(e){return e.response&&Object(A.p)(function(){a.editing_errors=e.response.data}),Promise.reject("program creation failed")})}).then(function(e){return Promise.all([e,a.api.fetchProgramHistory(e.data.id)])}).then(function(e){var t=z(e,2),n=t[0],r=t[1];return Object(A.p)(function(){a.editing_errors={},a.editing_target=n.data.id,a.editing_target_data=n.data,a.editing_history=r.data,a.programs.shift(),a.programs.unshift(n.data),a.programFilterPrograms.unshift(n.data),a.active_pane_is_dirty=!1,a.onSaveSuccessHandler()}),n}).then(function(e){return e.data.gaitid?a.syncGAITDates(e.data.id):Promise.reject("No GAIT id on program")}).finally(function(){Object(A.p)(function(){a.saving=!1})}).catch(function(e){})}},{key:"updateProgram",value:function(e,n){var r=this;this.saving=!0,this.api.updateProgram(e,n).then(function(t){return r.api.fetchProgramHistory(e).then(function(e){return Object(A.p)(function(){r.saving=!1,r.editing_errors={},r.active_pane_is_dirty=!1,r.editing_target_data=n,r.updateLocalPrograms(t.data),r.editing_history=e.data,r.onSaveSuccessHandler()})})}).catch(function(e){Object(A.p)(function(){r.saving=!1,r.editing_errors=e.response.data,r.onSaveErrorHandler()})})}},{key:"toggleBulkTarget",value:function(e){this.bulk_targets.set(e,!this.bulk_targets.get(e))}},{key:"toggleBulkTargetsAll",value:function(){var t=this;this.bulk_targets_all=!this.bulk_targets_all,this.bulk_targets=new Map(this.programs.map(function(e){return[e.id,t.bulk_targets_all]}))}},{key:"postBulkUpdateLocalPrograms",value:function(e){var r=new Map(e.map(function(e){return[e.id,e]}));this.programs=this.programs.reduce(function(e,t){var n=r.get(t.id);return n?e.push(Object.assign(t,n)):e.push(t),e},[])}},{key:"bulkUpdateProgramStatus",value:function(e){var n=this,t=Array.from(this.bulk_targets.entries()).filter(function(e){var t=z(e,2);t[0];return t[1]}).map(function(e){var t=z(e,2),n=t[0];t[1];return n});t.length&&e&&(this.applying_bulk_updates=!0,this.api.updateProgramFundingStatusBulk(t,e).then(function(e){var t=e.data;Object(A.p)(function(){n.postBulkUpdateLocalPrograms(t),n.applying_bulk_updates=!1,n.onSaveSuccessHandler()})}).catch(function(e){Object(A.p)(function(){n.applying_bulk_updates=!1,n.onSaveErrorHandler()})}))}},{key:"toggleChangeLogRowExpando",value:function(e){this.changelog_expanded_rows.has(e)?this.changelog_expanded_rows.delete(e):this.changelog_expanded_rows.add(e)}}])&&R(e.prototype,t),r&&R(e,r),n}()).prototype,"countries",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=L(r.prototype,"allCountries",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=L(r.prototype,"organizations",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=L(r.prototype,"users",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=L(r.prototype,"sectors",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=L(r.prototype,"filters",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{countries:[],organizations:[],sectors:[],programStatus:null,programs:[],users:[]}}}),u=L(r.prototype,"appliedFilters",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=L(r.prototype,"programFilterPrograms",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=L(r.prototype,"programs",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=L(r.prototype,"program_count",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=L(r.prototype,"new_program",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=L(r.prototype,"fetching_main_listing",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=L(r.prototype,"current_page",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=L(r.prototype,"total_pages",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=L(r.prototype,"bulk_targets",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),v=L(r.prototype,"bulk_targets_all",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=L(r.prototype,"editing_target",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=L(r.prototype,"editing_errors",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=L(r.prototype,"fetching_editing_history",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),O=L(r.prototype,"editing_history",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=L(r.prototype,"saving",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=L(r.prototype,"applying_bulk_updates",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=L(r.prototype,"active_editor_pane",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"profile"}}),j=L(r.prototype,"changelog_expanded_rows",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),L(r.prototype,"onProfilePaneChange",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"onProfilePaneChange"),r.prototype),L(r.prototype,"fetchPrograms",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"fetchPrograms"),r.prototype),L(r.prototype,"applyFilters",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"applyFilters"),r.prototype),L(r.prototype,"changePage",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"changePage"),r.prototype),L(r.prototype,"changeFilter",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"changeFilter"),r.prototype),L(r.prototype,"clearFilters",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"clearFilters"),r.prototype),L(r.prototype,"toggleEditingTarget",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"toggleEditingTarget"),r.prototype),L(r.prototype,"createProgram",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"createProgram"),r.prototype),L(r.prototype,"saveNewProgram",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"saveNewProgram"),r.prototype),L(r.prototype,"updateProgram",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"updateProgram"),r.prototype),L(r.prototype,"toggleBulkTarget",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"toggleBulkTarget"),r.prototype),L(r.prototype,"toggleBulkTargetsAll",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"toggleBulkTargetsAll"),r.prototype),L(r.prototype,"bulkUpdateProgramStatus",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"bulkUpdateProgramStatus"),r.prototype),L(r.prototype,"toggleChangeLogRowExpando",[A.d],Object.getOwnPropertyDescriptor(r.prototype,"toggleChangeLogRowExpando"),r.prototype),r),M=n("okNM"),q=n("y2Vs"),U=n("Z2Y6"),B=n("TGVD"),V=n("RCjz");function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K,Q=Object(M.c)(H=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,X(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,S.a.Component),n=t,(r=[{key:"updateActivePage",value:function(e){this.props.new||this.props.notifyPaneChange(e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.ProfileSection,r=e.SettingsSection,a=e.HistorySection,o=e.active_pane,i="profile"==o?"active":"",l="settings"==o?"active":"",c="status_and_history"==o?"active":"",s=this.props.new?"disabled":"";return S.a.createElement("div",{className:"user-editor tab-set--vertical"},S.a.createElement("ul",{className:"nav nav-tabs"},S.a.createElement("li",{className:"nav-item"},S.a.createElement("a",{href:"#",className:"nav-link ".concat(i),onClick:function(e){e.preventDefault(),t.updateActivePage("profile")}},gettext("Profile"))),S.a.createElement("li",{className:"nav-item"},S.a.createElement("a",{href:"#",className:"nav-link ".concat(l," ").concat(s),onClick:function(e){e.preventDefault(),t.updateActivePage("settings")}},gettext("Settings"))),S.a.createElement("li",{className:"nav-item"},S.a.createElement("a",{href:"#",className:"nav-link ".concat(c," ").concat(s),onClick:function(e){e.preventDefault(),t.updateActivePage("status_and_history")}},gettext("Status and History")))),S.a.createElement("div",{className:"tab-content"},"profile"==o&&S.a.createElement(n,null),"settings"==o&&S.a.createElement(r,null),"status_and_history"==o&&S.a.createElement(a,null)))}}])&&Y(n.prototype,r),a&&Y(n,a),t}())||H,Z=n("TSYQ"),ee=n.n(Z);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie,le=Object(M.c)(function(e){var t=e.errorMessages;return t?S.a.createElement("div",{className:"invalid-feedback"},t.map(function(e,t){return S.a.createElement("span",{key:t},e)})):null}),ce=Object(M.c)(K=function(e){function r(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=re(this,ae(r).call(this,e));var n=e.program_data;return t.state={original_data:Object.assign({},n),managed_data:Object.assign({},n)},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(r,S.a.Component),t=r,(n=[{key:"hasUnsavedDataAction",value:function(){this.props.onIsDirtyChange(JSON.stringify(this.state.managed_data)!=JSON.stringify(this.state.original_data))}},{key:"save",value:function(){var e=this.props.program_data.id,t=this.state.managed_data;this.props.onUpdate(e,t)}},{key:"saveNew",value:function(e){e.preventDefault();var t=this.state.managed_data;this.props.onCreate(t)}},{key:"updateFormField",value:function(e,t){var n,r,a,o=this;this.setState({managed_data:Object.assign(this.state.managed_data,(n={},r=e,a=t,r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n))},function(){return o.hasUnsavedDataAction()})}},{key:"resetForm",value:function(){var e=this;this.setState({managed_data:Object.assign({},this.state.original_data)},function(){return e.hasUnsavedDataAction()})}},{key:"formErrors",value:function(e){return this.props.errors[e]}},{key:"render",value:function(){var n=this,e=this.state.managed_data,t=e.country.map(function(t){return n.props.countryOptions.find(function(e){return e.value==t})}),r=e.sector.map(function(t){return n.props.sectorOptions.find(function(e){return e.value==t})});return S.a.createElement("div",{className:"tab-pane--react"},S.a.createElement("h2",{className:"no-bold"},this.props.program_data.name?this.props.program_data.name+": ":"",gettext("Profile")),S.a.createElement("form",{className:"form"},S.a.createElement("div",{className:"form-group"},S.a.createElement("label",{className:"label--required",htmlFor:"program-name-input"},gettext("Program name")),S.a.createElement("input",{type:"text",value:e.name,onChange:function(e){return n.updateFormField("name",e.target.value)},className:ee()("form-control",{"is-invalid":this.formErrors("name")}),id:"program-name-input",required:!0}),S.a.createElement(le,{errorMessages:this.formErrors("name")})),S.a.createElement("div",{className:"form-group"},S.a.createElement("label",{htmlFor:"program-gait-input"},gettext("GAIT ID")),S.a.createElement("input",{type:"tel",value:e.gaitid,onChange:function(e){return n.updateFormField("gaitid",e.target.value)},className:ee()("form-control",{"is-invalid":this.formErrors("gaitid")}),id:"program-gait-input",disabled:!this.props.new}),S.a.createElement(le,{errorMessages:this.formErrors("gaitid")})),S.a.createElement("div",{className:"form-group"},S.a.createElement("label",{htmlFor:"program-fund-code-input"},gettext("Fund Code")),S.a.createElement("input",{type:"tel",value:"",onChange:function(e){return n.updateFormField("fundCode",e.target.value)},className:ee()("form-control",{"is-invalid":this.formErrors("fundCode")}),id:"program-fund-code-input",disabled:!0}),S.a.createElement(le,{errorMessages:this.formErrors("fundCode")})),S.a.createElement("div",{className:"form-group"},S.a.createElement("label",{htmlFor:"program-description-input"},gettext("Description")),S.a.createElement("textarea",{value:e.description||"",onChange:function(e){return n.updateFormField("description",e.target.value)},className:ee()("form-control",{"is-invalid":this.formErrors("description")}),id:"program-description-input"}),S.a.createElement(le,{errorMessages:this.formErrors("description")})),S.a.createElement("div",{className:"form-group react-multiselect-checkbox"},S.a.createElement("label",{htmlFor:"program-county-input",className:"label--required"},gettext("Countries")),S.a.createElement(U.a,{value:t,options:this.props.countryOptions,onChange:function(e){return n.updateFormField("country",e.map(function(e){return e.value}))},className:ee()("react-select",{"is-invalid":this.formErrors("country")}),id:"program-country-input"}),S.a.createElement(le,{errorMessages:this.formErrors("country")})),S.a.createElement("div",{className:"form-group react-multiselect-checkbox"},S.a.createElement("label",{htmlFor:"program-sectors-input"},gettext("Sectors")),S.a.createElement(U.a,{value:r,options:this.props.sectorOptions,onChange:function(e){return n.updateFormField("sector",e.map(function(e){return e.value}))},className:ee()("react-select",{"is-invalid":this.formErrors("sector")}),id:"program-sectors-input"}),S.a.createElement(le,{errorMessages:this.formErrors("sector")})),this.props.new&&S.a.createElement("div",{className:"form-group btn-row"},S.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(e){return n.saveNew(e)}},gettext("Save Changes")),S.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return n.resetForm()}},gettext("Reset"))),!this.props.new&&S.a.createElement("div",{className:"form-group btn-row"},S.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(e){return n.save(e)}},gettext("Save Changes")),S.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return n.resetForm()}},gettext("Reset")))))}}])&&ne(t.prototype,n),a&&ne(t,a),r}())||K;function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge,de=Object(M.c)(ie=function(e){function o(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=pe(this,me(o).call(this,e))).autonumberChange=function(e){"2"==e.target.value?n.setState({autonumber:!1}):n.setState({autonumber:!0})},n.groupingChange=function(e){e.target.checked?n.setState({grouping:2}):n.setState({grouping:1})},n.save=function(e){e.preventDefault();var t=function(a){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=a,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return a}({},n.props.program_data);!1!==n.state.grouping&&(t._using_results_framework=n.state.grouping),null!==n.state.autonumber&&(t.auto_number_indicators=n.state.autonumber),n.props.onSave(n.props.program_data.id,t)};var t=void 0!==e.program_data._using_results_framework&&e.program_data._using_results_framework,r=1===t?null:e.program_data.auto_number_indicators;n.state={autonumber:r,grouping:t};var a={autonumber:r,grouping:t};return n.resetForm=function(){n.setState(a)},n.formDirty=function(){return n.state.autonumber!=a.autonumber||n.state.grouping!=a.grouping},n}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(o,S.a.Component),t=o,(n=[{key:"render",value:function(){var t=this;return S.a.createElement("div",{className:"tab-pane--react"},S.a.createElement("h2",{className:"no-bold"},this.props.program_data.name?this.props.program_data.name+": ":"",gettext("Settings")),S.a.createElement("div",{className:"d-flex flex-column w-75 pr-5"},S.a.createElement("form",{className:"form"},!1!==this.state.grouping&&S.a.createElement(S.a.Fragment,null,S.a.createElement("h4",null,gettext("Indicator grouping")),S.a.createElement("div",{className:"form-check mb-3"},S.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"grouping",id:"grouping",checked:2==this.state.grouping,onChange:this.groupingChange}),S.a.createElement("label",{className:"form-check-label",htmlFor:"grouping"},S.a.createElement("strong",null,gettext("Group indicators according to the results framework"),":"),S.a.createElement("span",null,"  ",gettext("After you have set a results framework for this program and assigned indicators to it, select this option to retire the original indicator levels and view indicators grouped by results framework levels instead.  This setting affects the program page, indicator plan, and IPTT reports."))))),null!==this.state.autonumber&&S.a.createElement(S.a.Fragment,null,S.a.createElement("h4",null,gettext("Indicator numbering")),S.a.createElement("div",{className:"form-check mb-3"},S.a.createElement("input",{className:"form-check-input",type:"radio",value:"1",name:"autonumber",id:"autonumber_on",checked:this.state.autonumber,onChange:this.autonumberChange}),S.a.createElement("label",{className:"form-check-label",htmlFor:"autonumber_on"},S.a.createElement("strong",null,gettext("Auto-number indicators (recommended)"),":"),"  ",gettext("Indicator numbers are automatically determined by their results framework assignments."))),S.a.createElement("div",{className:"form-check mb-5"},S.a.createElement("input",{className:"form-check-input",type:"radio",value:"2",name:"autonumber",id:"autonumber_off",checked:!this.state.autonumber,onChange:this.autonumberChange}),S.a.createElement("label",{className:"form-check-label",htmlFor:"autonumber_off"},S.a.createElement("strong",null,gettext("Manually number indicators"),":"),"  ",gettext("If your donor requires a special numbering convention, you can enter a custom number for each indicator."),S.a.createElement("strong",{className:"text-danger"},"  ",gettext("Manually entered numbers do not affect the order in which indicators are listed; they are purely for display purposes."))))),S.a.createElement("div",{className:"form-group btn-row"},S.a.createElement("button",{disabled:!this.formDirty(),className:"btn btn-primary",type:"button",onClick:function(e){return t.save(e)}},gettext("Save Changes")),S.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return t.resetForm()}},gettext("Reset"))))))}}])&&ue(t.prototype,n),r&&ue(t,r),o}())||ie,he=(n("c7k8"),n("H4hL"),n("KnAV"));function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=[{value:"Funded",label:gettext("Active")},{value:"Completed",label:gettext("Inactive")}],Oe=Object(M.c)(ge=function(e){function r(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=ve(this,_e(r).call(this,e));var n=e.program_data;return t.state={managed_status:Object.assign({},n),original_status:Object.assign({},n)},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(r,S.a.Component),t=r,(n=[{key:"hasUnsavedDataAction",value:function(){this.props.onIsDirtyChange(JSON.stringify(this.state.managed_status)!=JSON.stringify(this.state.original_status))}},{key:"onStatusChange",value:function(e){var t=this,n=e.value;this.setState({managed_status:Object.assign(this.state.managed_status,{funding_status:n})},function(){return t.hasUnsavedDataAction()})}},{key:"onSave",value:function(){this.props.onSave(this.state.original_status.id,this.state.managed_status)}},{key:"onReset",value:function(){var e=this;this.setState({managed_status:this.state.original_status},function(){return e.hasUnsavedDataAction()})}},{key:"render",value:function(){var t=this,e=this.props,n=e.history,r=e.store,a=r.changelog_expanded_rows,o=we.find(function(e){return e.value==t.state.managed_status.funding_status});return S.a.createElement("div",{className:"tab-pane--react admin-edit-pane"},S.a.createElement("h2",{className:"no-bold"},this.props.program_data.name?this.props.program_data.name+": ":"",gettext("Status and History")),S.a.createElement("div",{className:"form-group"},S.a.createElement("label",{htmlFor:"status-input",className:"label--required",required:!0},gettext("Status")),S.a.createElement(q.default,{isSearchable:!1,options:we,value:o,onChange:function(e){return t.onStatusChange(e)}})),S.a.createElement("div",{className:"row"},S.a.createElement("div",{className:"col"},S.a.createElement("div",{className:"form-group btn-row"},S.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return t.onSave()}},gettext("Save Changes")),S.a.createElement("button",{className:"btn btn-reset",type:"button",onClick:function(){return t.onReset()}},gettext("Reset"))))),S.a.createElement(he.a,{data:n,expanded_rows:a,toggle_expando_cb:function(e){return r.toggleChangeLogRowExpando(e)}}))}}])&&ye(t.prototype,n),a&&ye(t,a),r}())||ge,ke=n("DDFe"),Ne=n("tnXs"),xe=n("IP2g");function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=Object(M.c)(function(e){var t=e.store,n=e.filterOptions;return S.a.createElement("div",{className:"form-group react-multiselect-checkbox"},S.a.createElement("label",{htmlFor:"users_filter"},gettext("Users")),S.a.createElement(U.a,{value:t.filters.users,options:n,onChange:function(e){return t.changeFilter("users",e)},placeholder:gettext("None Selected"),id:"users_filter"}))}),Ie=Object(M.c)(function(e){var t=e.store,n=e.filterOptions;return S.a.createElement("div",{className:"form-group react-multiselect-checkbox"},S.a.createElement("label",{htmlFor:"countries_filter"},gettext("Countries")),S.a.createElement(U.a,{value:t.filters.countries,options:n,onChange:function(e){return t.changeFilter("countries",e)},placeholder:gettext("None Selected"),id:"countries_filter"}))}),Te=Object(M.c)(function(e){var t=e.store,n=e.filterOptions;return S.a.createElement("div",{className:"form-group react-multiselect-checkbox"},S.a.createElement("label",{htmlFor:"organizations_filter"},gettext("Organizations")),S.a.createElement(U.a,{value:t.filters.organizations,options:n,onChange:function(e){return t.changeFilter("organizations",e)},placeholder:gettext("None Selected"),id:"organizations_filter"}))}),Re=Object(M.c)(function(e){var t=e.store,n=e.filterOptions;return S.a.createElement("div",{className:"form-group react-multiselect-checkbox"},S.a.createElement("label",{htmlFor:"sector-filter"},gettext("Sectors")),S.a.createElement(U.a,{value:t.filters.sectors,options:n,onChange:function(e){return t.changeFilter("sectors",e)},placeholder:gettext("None Selected"),id:"sector-filter"}))}),Le=Object(M.c)(function(e){var t=e.store,n=[{value:"Active",label:gettext("Active")},{value:"Inactive",label:gettext("Inactive")}];return S.a.createElement("div",{className:"form-group"},S.a.createElement("label",{htmlFor:"program-status-filter"},gettext("Status")),S.a.createElement(q.default,{isMulti:!1,value:t.filters.programStatus,options:n,onChange:function(e){return t.changeFilter("programStatus",e)},placeholder:gettext("None Selected"),id:"program-status-filter"}))}),He=Object(M.c)(function(e){var t=e.store,n=e.filterOptions;return S.a.createElement("div",{className:"form-group react-multiselect-checkbox"},S.a.createElement("label",{htmlFor:"programs-filter"},gettext("Programs")),S.a.createElement(U.a,{value:t.filters.programs,options:n,onChange:function(e){return t.changeFilter("programs",e)},placeholder:gettext("None Selected"),id:"programs-filter"}))}),Ge=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=Fe(this,Ae(n).call(this,e))).active_child=S.a.createRef(),t.state={current_action:null,current_vals:[]},t}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(n,S.a.Component),t=n,(r=[{key:"onActionChanged",value:function(e){this.setState({current_action:e.value})}},{key:"onChange",value:function(e){this.setState({current_vals:e})}},{key:"onApply",value:function(){var e=this.props.secondaryOptions[this.state.current_action];e&&e.onApply(this.state.current_vals)}},{key:"render",value:function(){var t=this,e=this.props.secondaryOptions[this.state.current_action],n=e&&e.component;return S.a.createElement("div",{className:"controls__bulk-actions"},S.a.createElement("div",{className:"bulk__select"},S.a.createElement(q.default,{placeholder:gettext("Bulk Actions"),value:this.props.primaryOptions.find(function(e){return e.value==t.state.current_action}),options:this.props.primaryOptions,onChange:function(e){return t.onActionChanged(e)}})),e&&S.a.createElement("div",{className:"bulk__select"},S.a.createElement(n,{placeholder:gettext("Select..."),value:this.state.current_vals,onChange:function(e){return t.onChange(e)}})),!e&&S.a.createElement("div",{className:"bulk__select"},S.a.createElement(q.default,{placeholder:"---",noOptionsMessage:function(){return gettext("No options")}})),S.a.createElement("button",{className:"btn btn-secondary",disabled:!this.state.current_action,onClick:function(){return t.onApply()}},gettext("Apply")))}}])&&Ce(t.prototype,r),a&&Ce(t,a),n}(),Me=Object(M.c)(function(e){var o=e.store,i=Object.entries(o.allCountries).map(function(e){var t=Pe(e,2),n=(t[0],t[1]);return{value:n.id,label:n.name}}),t=Object.entries(o.countries).map(function(e){var t=Pe(e,2),n=(t[0],t[1]);return{value:n.id,label:n.name}}),n=Object.entries(o.organizations).map(function(e){var t=Pe(e,2),n=(t[0],t[1]);return{value:n.id,label:n.name}}),l=o.sectors.map(function(e){return{value:e.id,label:e.name}}),r=Object.entries(o.programFilterPrograms).map(function(e){var t=Pe(e,2),n=(t[0],t[1]);return{value:n.id,label:n.name}}),a=Object.entries(o.users).map(function(e){var t=Pe(e,2),n=(t[0],t[1]);return{value:n.id,label:n.name}}),c=[{value:"Funded",label:gettext("Active")},{value:"Completed",label:gettext("Inactive")}],s={primary_options:[{label:gettext("Set program status"),value:"set_program_status"}],secondary_options:{set_program_status:{component:function(e){return S.a.createElement(q.default,je({options:c},e))},onApply:function(e){return o.bulkUpdateProgramStatus(e.value)}}}};return S.a.createElement("div",{id:"program-management-index-view",className:"row"},S.a.createElement(Ne.a,null,S.a.createElement("div",{className:"filter-section"},S.a.createElement(Ie,{store:o,filterOptions:t}),S.a.createElement(De,{store:o,filterOptions:a}),S.a.createElement(Te,{store:o,filterOptions:n}),S.a.createElement(Re,{store:o,filterOptions:l}),S.a.createElement(Le,{store:o}),S.a.createElement(He,{store:o,filterOptions:r})),S.a.createElement("div",{className:"filter-section filter-buttons"},S.a.createElement("button",{className:"btn btn-primary",onClick:function(){return o.applyFilters()}},gettext("Apply")),S.a.createElement("button",{className:"btn btn-reset",onClick:function(){return o.clearFilters()}},gettext("Reset")))),S.a.createElement("div",{className:"col admin-list"},S.a.createElement("header",{className:"page-title"},S.a.createElement("h1",null,gettext("Admin:")," ",S.a.createElement("small",null,gettext("Programs")))),S.a.createElement("div",{className:"admin-list__controls"},S.a.createElement(Ge,{primaryOptions:s.primary_options,secondaryOptions:s.secondary_options}),S.a.createElement("div",{className:"controls__buttons"},S.a.createElement("a",{href:"#",className:"btn btn-link btn-add",tabIndex:"0",onClick:function(){return o.createProgram()}},S.a.createElement("i",{className:"fas fa-plus-circle"}),gettext("Add Program")))),S.a.createElement(ke.a,{isLoading:o.fetching_main_listing||o.applying_bulk_updates},S.a.createElement("div",{className:"admin-list__table"},S.a.createElement(B.a,{newData:o.new_program,data:o.programs,keyField:"id",HeaderRow:function(e){var t=e.Col,n=e.Row;return S.a.createElement(n,null,S.a.createElement(t,{size:"0.5"},S.a.createElement("input",{type:"checkbox",checked:o.bulk_targets_all,onChange:function(){return o.toggleBulkTargetsAll()}})),S.a.createElement(t,{size:"2",className:"td--stretch"},gettext("Program")),S.a.createElement(t,null,gettext("Organizations")),S.a.createElement(t,null,gettext("Users")),S.a.createElement(t,null,gettext("Status")))},Row:function(e){var t,n=e.Col,r=e.Row,a=e.data;return S.a.createElement(r,{expanded:a.id==o.editing_target,Expando:Object(M.c)(function(e){var t=e.Wrapper;return S.a.createElement(t,null,S.a.createElement(Q,{new:"new"==a.id,active_pane:o.active_editor_pane,notifyPaneChange:function(e){return o.onProfilePaneChange(e)},ProfileSection:Object(M.c)(function(){return S.a.createElement(ke.a,{isLoading:o.saving},S.a.createElement(ce,{onIsDirtyChange:function(e){return o.setActiveFormIsDirty(e)},new:"new"==a.id,program_data:a,onUpdate:function(e,t){return o.updateProgram(e,t)},onCreate:function(e){return o.saveNewProgram(e)},sectorOptions:l,countryOptions:i,errors:o.editing_errors}))}),SettingsSection:Object(M.c)(function(){return S.a.createElement(ke.a,{isLoading:o.saving},S.a.createElement(de,{program_data:a,store:o,onSave:function(e,t){return o.updateProgram(e,t)}}))}),HistorySection:Object(M.c)(function(){return S.a.createElement(ke.a,{isLoading:o.saving},S.a.createElement(Oe,{store:o,onIsDirtyChange:function(e){return o.setActiveFormIsDirty(e)},program_data:a,fetching_history:o.fetching_editing_history,history:o.editing_history,saving:o.saving,onSave:function(e,t){return o.updateProgram(e,t)}}))})}))})},S.a.createElement(n,{size:"0.5"},S.a.createElement("input",{type:"checkbox",disabled:"new"==a.id,checked:o.bulk_targets.get(a.id)||!1,onChange:function(){return o.toggleBulkTarget(a.id)}})),S.a.createElement(n,{size:"2",className:"td--stretch"},"new"==a.id&&S.a.createElement("div",{className:"expando-toggle icon__disabled"},S.a.createElement("div",{className:"expando-toggle__icon"},S.a.createElement(xe.a,{icon:o.editing_target==a.id?"caret-down":"caret-right"})),S.a.createElement("div",{className:"expando-toggle__label"},S.a.createElement("i",{className:"fas fa-cube"})," ",a.name||"New Program")),"new"!=a.id&&S.a.createElement("div",{className:"expando-toggle icon__clickable",onClick:function(){return o.toggleEditingTarget(a.id)}},S.a.createElement("div",{className:"expando-toggle__icon"},S.a.createElement(xe.a,{icon:o.editing_target==a.id?"caret-down":"caret-right"})),S.a.createElement("div",{className:"expando-toggle__label"},S.a.createElement("i",{className:"fas fa-cube"})," ",a.name||"New Program"))),S.a.createElement(n,null,(t=a).organizations?S.a.createElement("a",{href:"/tola_management/organization/?programs[]=".concat(t.id)},S.a.createElement("i",{className:"fas fa-building"})," ",t.onlyOrganizationId?o.organizations[t.onlyOrganizationId].name:"".concat(t.organizations," organizations")):"---"),S.a.createElement(n,{className:"text-nowrap"},a.program_users?S.a.createElement("a",{href:"/tola_management/user/?programs[]=".concat(a.id)},S.a.createElement("i",{className:"fas fa-users"})," ",a.program_users," ",gettext("users")):"---"),S.a.createElement(n,null,"funded"===a.funding_status.toLowerCase()?gettext("Active"):gettext("Inactive")))}}))),S.a.createElement("div",{className:"admin-list__metadata"},S.a.createElement("div",{className:"metadata__count text-small text-muted"},o.program_count?"".concat(o.program_count," ").concat(gettext("programs")):"---"),S.a.createElement("div",{className:"metadata__controls"},o.total_pages&&S.a.createElement(V.a,{pageCount:o.total_pages,initialPage:o.current_page,onPageChange:function(e){return o.changePage(e)}})))))}),qe=n("XoI5");function Ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Be(t,e,n[e])})}return t}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve,We,Ye,Je={fetchPrograms:function(e,t){return qe.a.get("/tola_management/program/",{params:Ue({page:e},t)}).then(function(e){var t=e.data;return{results:t.results,total_results:t.count,total_pages:t.page_count,next_page:t.next,prev_page:t.previous}})},fetchProgramsForFilter:function(e){return qe.a.get("/tola_management/program/program_filter_options",{params:Ue({},e)})},fetchProgramHistory:function(e){return qe.a.get("/tola_management/program/".concat(e,"/history/"))},createProgram:function(e){return qe.a.post("/tola_management/program/",e)},updateProgram:function(e,t){return qe.a.put("/tola_management/program/".concat(e,"/"),t)},updateProgramFundingStatusBulk:function(e,t){return qe.a.post("/tola_management/program/bulk_update_status/",{ids:e,funding_status:t})},validateGaitId:function(e,t){return qe.a.get("/tola_management/program/".concat(t,"/gait/").concat(e,"/"))},syncGAITDates:function(e){return qe.a.put("/tola_management/program/".concat(e,"/sync_gait_dates/"))}},Xe=jsContext,$e=Xe.country_filter,Ke=Xe.organization_filter,Qe=Xe.users_filter,Ze=Xe.allCountries,et=Xe.countries,tt=Xe.organizations,nt=Xe.users,rt=Xe.programFilterPrograms,at=Xe.sectors,ot={countries:(Ye=$e,Ye.map(function(e){return et[e]}).map(function(e){return{label:e.name,value:e.id}})),organizations:(We=Ke,We.map(function(e){return tt[e]}).map(function(e){return{label:e.name,value:e.id}})),users:(Ve=Qe,Ve.map(function(e){return nt[e]}).map(function(e){return{label:e.name,value:e.id}}))},it=new G(Je,{countries:et,allCountries:Ze,organizations:tt,programFilterPrograms:rt,sectors:at,filters:ot,users:nt});F.a.render(S.a.createElement(Me,{store:it}),document.querySelector("#app_root"))},DDFe:function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t=e.children,n=e.isLoading,r=e.className,a=c(e,["children","isLoading","className"]),o=n?"loading":"";return i.a.createElement("div",l({className:"loading-spinner__container "+o+" "+(r||"")},a),i.a.createElement("div",{className:"loading-spinner__overlay"},i.a.createElement("div",{className:"loading-spinner__spinner"})),t)}},H4hL:function(e,t,n){"use strict";n("q1tI")},KnAV:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("okNM"),i=n("IP2g");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=function(e){var t=e.name,n=e.data;return a.a.createElement("div",{className:"change__field"},a.a.createElement("strong",null,t),": ",null!=n&&null!=n?n.toString():"N/A")},s=function(e){var t=e.data,n=e.is_expanded,r=e.toggle_expando_cb;return a.a.createElement("tr",{className:n?"changelog__entry__header is-expanded":"changelog__entry__header",onClick:function(){return r(t.id)}},a.a.createElement("td",{className:"text-nowrap text-action"},a.a.createElement(i.a,{icon:n?"caret-down":"caret-right"})," ",a.a.createElement("strong",null,t.date)),a.a.createElement("td",{className:"text-nowrap"},t.admin_user),a.a.createElement("td",{className:"text-nowrap"},t.pretty_change_type),a.a.createElement("td",null),a.a.createElement("td",null))},u=function(e){var t=e.data;return"user_programs_updated"==t.change_type?a.a.createElement(a.a.Fragment,null,0<Object.entries(t.diff_list.countries).length&&Object.entries(t.diff_list.countries).map(function(e){var t=l(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n,className:"changelog__entry__row"},a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("div",{className:"changelog__change--prev"},a.a.createElement(c,{name:"country",data:r.prev.country}),a.a.createElement(c,{name:"role",data:r.prev.role}))),a.a.createElement("td",null,a.a.createElement("div",{className:"changelog__change--new"},a.a.createElement(c,{name:"country",data:r.new.country}),a.a.createElement(c,{name:"role",data:r.new.role}))))}),0<Object.entries(t.diff_list.programs).length&&Object.entries(t.diff_list.programs).map(function(e){var t=l(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n,className:"changelog__entry__row"},a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("div",{className:"changelog__change--prev"},a.a.createElement(c,{name:"program",data:r.prev.program}),a.a.createElement(c,{name:"country",data:r.prev.country}),a.a.createElement(c,{name:"role",data:r.prev.role}))),a.a.createElement("td",null,a.a.createElement("div",{className:"changelog__change--new"},a.a.createElement(c,{name:"program",data:r.new.program}),a.a.createElement(c,{name:"country",data:r.new.country}),a.a.createElement(c,{name:"role",data:r.new.role}))))})):a.a.createElement("tr",{className:"changelog__entry__row"},a.a.createElement("td",{className:"text-nowrap"}),a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("div",{className:"changelog__change--prev"},t.diff_list.map(function(e,t){return a.a.createElement(c,{key:t,name:e.pretty_name,data:e.prev})}))),a.a.createElement("td",null,a.a.createElement("div",{className:"changelog__change--new"},t.diff_list.map(function(e,t){return a.a.createElement(c,{key:t,name:e.pretty_name,data:e.new})}))))},p=function(e){var t=e.data,n=e.is_expanded,r=e.toggle_expando_cb;return a.a.createElement("tbody",{className:"changelog__entry",key:t.id},a.a.createElement(s,{data:t,is_expanded:n,toggle_expando_cb:r}),n&&a.a.createElement(u,{data:t}))},m=Object(o.c)(function(e){var t=e.data,n=e.expanded_rows,r=e.toggle_expando_cb;return a.a.createElement("table",{className:"table table-sm bg-white table-bordered text-small changelog"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{className:"text-nowrap"},gettext("Date")),a.a.createElement("th",{className:"text-nowrap"},gettext("Admin")),a.a.createElement("th",{className:"text-nowrap"},gettext("Change Type")),a.a.createElement("th",{className:"text-nowrap td--half-stretch"},gettext("Previous Entry")),a.a.createElement("th",{className:"text-nowrap td--half-stretch"},gettext("New Entry")))),t.map(function(e){var t=!0;return n&&(t=n.has(e.id)),a.a.createElement(p,{key:e.id,data:e,is_expanded:t,toggle_expando_cb:r})}))});t.a=m},RCjz:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("werx"),i=n.n(o);n("okNM");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){return a.a.createElement(i.a,l({previousLabel:"‹",previousClassName:"page-item previous",previousLinkClassName:"page-link",nextLabel:"›",nextClassName:"page-item next",nextLinkClassName:"page-link",breakLabel:"...",disabledClassName:"disabled",breakClassName:"page-item disabled",breakLinkClassName:"page-link",pageClassName:"page-item",pageLinkClassName:"page-link",marginPagesDisplayed:2,pageRangeDisplayed:5,containerClassName:"pagination",activeClassName:"active"},e))}},TGVD:function(e,t,n){"use strict";var i=n("okNM"),r=n("q1tI"),l=n.n(r),a=n("TSYQ"),c=n.n(a);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=function(e){var t=e.className,n=(e.size,u(e,["className","size"]));return l.a.createElement("td",s({className:["mgmt-table__col",t].join(" ")},n),n.children)},p=function(e){var t=e.className,n=(e.size,u(e,["className","size"]));return l.a.createElement("th",s({className:["mgmt-table__col",t].join(" ")},n),n.children)},m=function(e){var t=e.className,n=u(e,["className"]);return l.a.createElement("tr",s({className:["mgmt-table__row",t].join(" ")},n),n.children)},f=function(e){var t=e.className,n=u(e,["className"]);return l.a.createElement("tr",s({className:["mgmt-table__row table-header",t].join(" ")},n),n.children)},g=Object(i.c)(function(e){var t=e.className,n=e.expanded,r=e.Expando,a=u(e,["className","expanded","Expando"]);if(r){var o=Object(i.c)(r);return l.a.createElement("tbody",s({className:c()(["mgmt-table__body",t].join(" "),{"is-expanded":n})},a),l.a.createElement(m,null,a.children),n&&l.a.createElement(o,{Wrapper:d}))}return l.a.createElement("tbody",s({className:["mgmt-table__body",t].join(" ")},a),l.a.createElement(m,null,a.children))}),d=function(e){var t=e.className,n=u(e,["className"]);return l.a.createElement("tr",s({className:["mgmt-table__row--expanded",t].join(" ")},n),l.a.createElement("td",{colSpan:"6"},n.children))},h=Object(i.c)(function(e){var t=e.data,n=e.Row,r=e.keyField,a=(u(e,["data","Row","keyField"]),Object(i.c)(n));return t.map(function(e){return l.a.createElement(a,{key:e[r],data:e,Col:o,Row:g})})}),b=Object(i.c)(function(e){var t=e.HeaderRow,n=e.className,r=u(e,["HeaderRow","className"]),a=Object(i.c)(t);return l.a.createElement("table",{className:["table bg-white",n].join(" ")},l.a.createElement("thead",null,l.a.createElement(a,{Col:p,Row:f})),l.a.createElement(h,r))});t.a=b},XoI5:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("vDqi"),a=n.n(r).a.create({withCredentials:!0,baseURL:"/api/",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")}})},Z2Y6:function(e,t,n){"use strict";var r=n("q1tI"),l=n.n(r),c=n("c7k8");n("y2Vs");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p,m=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,s(n).call(this,e))).cache=new c.c({fixedWidth:!0,defaultHeight:35}),t.filter_val="",t}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,l.a.PureComponent),t=n,(r=[{key:"render",value:function(){var o=this,e=this.props,i=(e.options,e.children),t=e.maxHeight,n=(e.getValue,e.selectProps),r=i.length||0;return n.inputValue!==this.filter_val&&(this.filter_val=n.inputValue,this.cache.clearAll()),l.a.createElement("div",{style:{display:"flex",height:"100vh",maxHeight:t+"px"}},l.a.createElement("div",{style:{flex:"1 1 auto"}},l.a.createElement(c.a,null,function(e){var t=e.width,n=e.height;return l.a.createElement(c.e,{height:n,width:t,deferredMeasurementCache:o.cache,rowCount:r,rowHeight:o.cache.rowHeight,noRowsRenderer:function(){return l.a.createElement("div",null,"No selections available")},rowRenderer:function(e){var t=e.index,n=e.parent,r=e.key,a=e.style;return l.a.createElement(c.b,{key:r,cache:o.cache,parent:n,columnIndex:0,rowIndex:t},l.a.createElement("div",{style:a},i[t]))}})})))}}])&&o(t.prototype,r),a&&o(t,a),n}(),f=n("VCnP"),g=n.n(f),d=n("okNM");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){return l.a.createElement("div",{className:"count__label"},e.children,e.clearable&&l.a.createElement("div",{onClick:e.clearSelect},l.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))},O=Object(d.c)(p=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=v(this,_(t).call(this,e))).clearSelect=function(e){e.stopPropagation(),r.props.onChange([])},r.makeLabel=function(e){var t=e.placeholderButtonLabel,n=e.value;return n?Array.isArray(n)?0===n.length?l.a.createElement(w,{clearable:!1},t):1===n.length?l.a.createElement(w,{clearable:!0,clearSelect:r.clearSelect},n[0].label):l.a.createElement(w,{clearable:!0,clearSelect:r.clearSelect},"".concat(n.length," ",gettext("selected"))):l.a.createElement(w,{clearable:!1},n.label):l.a.createElement(w,{clearable:!1},t)},r}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,l.a.Component),n=t,(r=[{key:"render",value:function(){return l.a.createElement(g.a,b({},this.props,{placeholder:gettext("Search"),placeholderButtonLabel:this.props.placeholder,getDropdownButtonLabel:this.makeLabel,components:{MenuList:m}}))}}])&&y(n.prototype,r),a&&y(n,a),t}())||p;t.a=O},tnXs:function(e,t,n){"use strict";var r=n("q1tI"),l=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,u(n).call(this,e))).updateDimensions=function(){t.state.folded||t.state.folding||t.setState(function(){return{resize:!0}},function(){t.contentWidth=t.contentsContainer.current.offsetWidth,t.setState({resize:!1})})},t.state={folding:!1,folded:!1,resize:!1},t.contentsContainer=l.a.createRef(),t}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,l.a.Component),t=n,(r=[{key:"componentDidMount",value:function(){this.contentWidth=this.contentsContainer.current.offsetWidth,window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"toggleFolded",value:function(){this.state.folding?this.foldComplete():this.setState({folding:!0,folded:!this.state.folded})}},{key:"foldComplete",value:function(){this.setState(function(){return{folding:!1}},this.updateDimensions)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=s(t,["className"]),a=this.state.folded?this.state.folding?"fa-angle-double-left":"fa-chevron-right":this.state.folding?"fa-angle-double-right":"fa-chevron-left",o=this.state.folded?"0px":this.state.resize?"auto":this.contentWidth+"px",i=this.state.folded||this.state.folding?"hidden":"visible";return l.a.createElement("div",c({className:"folding-sidebar "+(n||"")},r),l.a.createElement("div",{className:"folding-sidebar__contents",onTransitionEnd:function(){return e.foldComplete()},ref:this.contentsContainer,style:{width:o,overflow:i}},l.a.createElement(l.a.Fragment,null,this.props.children)),l.a.createElement("div",{className:"folding-sidebar__trigger",onClick:function(){return e.toggleFolded()}},l.a.createElement("i",{key:a},l.a.createElement("span",{className:"fa "+a}))))}}])&&o(t.prototype,r),a&&o(t,a),n}();t.a=m}},[["1faY",0,1]]]);