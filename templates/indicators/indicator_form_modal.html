{% load widget_tweaks %}
<script type="text/javascript">
    //Searchable select option for service indicator
    $(document).ready(function() {
        /* add select2 js library to the indicator select box */
        $("#id_program").select2().on("select2:selecting select2:unselecting", function(e) {
            e.preventDefault();
        });
        $("#id_strategic_objectives").select2();

        var targetsonly = `{{targetsonly|safe}}`;
        var targetsactive = `{{targetsactive|safe}}`;
        if (targetsonly == 'True') {
            // $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                $('a[href="#targets"][data-toggle="tab"]').tab('show');
                // $('a[href!="#targets"][data-toggle="tab"]').hide();
                // $('a[href="#targets"][data-toggle="tab"]').hide();
                $('ul.nav.nav-tabs').hide();
                $('#indicator_modal_header').html('<a id="backToCollectedDataLink" href="/indicators/periodic_target_generate/' + $("#id_indicator").val() + '/" style="font-size: 21px;"><< Back to Collected Data</a>');
                // e.target // newly activated tab
                // e.relatedTarget // previous active tab
            // });
        }

        if (targetsactive == 'True') {
            $('a[href="#targets"][data-toggle="tab"]').tab('show');
            $("#indicator_modal_body").data("targetsactive", "true");
        }
    });
</script>

<div id="numDataPoints" style="display: none;">{{ object.collecteddata_set.all.count }}</div>
<div id="initialTargetFrequencyValue" style="display:none;">{{ object.target_frequency }}</div>

<div class="modal-header" style="border-bottom:none;">
    <div id="indicator_modal_header" class="modal-title">
        <span id = "modalmessages"></span>
        <h5 style="color:#94979c;">
            {% if indicator.levels %}
                {{ indicator.levels }} indicator:
            {% endif %}
            {{ indicator.name|truncatechars:300 }}
        </h5>
    </div>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
</div>

{% include 'indicators/indicator_form_helper.html' %}
