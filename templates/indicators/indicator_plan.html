{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Indicator Plan" %} | {% endblock %}

{% block page_title %}{% trans "Indicator Plan" %}{% endblock %}

{% block bodyclasses %}indicator-plan{% endblock %}

{% block mainclasses %}region--full-width{% endblock %}

{% block content %}

    <div class="page-subheader">
        <div class="subheader__title">
            <h3><a href="{{ program.program_page_url }}">{{ program.gaitid }} - {{ program.name }}</a></h3>
        </div>
        <div class="subheader__actions d-flex flex-column align-items-end">
            <button type="submit" class="btn btn-sm btn-secondary" onClick="location.href='/indicators/indicator_plan/export/{{ program.id }}/{% if ordering %}?orderby={{ordering}}{% endif %}'"><i class="fas fa-download"></i> Excel {# Excel (brand name) not translated #}</button>
            {% if ordering %}
            <form method="GET" action="#" class="form-inline mt-2">
                <div class="form-group"></div>
                <label for="orderby_select">{% trans 'Group indicators' %}:</label>
                <div class="controls">
                    <select class="select form-control" id="orderby_select" name="orderby" onchange="this.form.submit()">
                        <option value="1" {% if ordering == 1 %}selected{% endif %}>{{ program.rf_chain_sort_label }}</option>
                        <option value="2" {% if ordering == 2 %}selected{% endif %}>{% trans 'by Level' %}</option>
                    </select>
                </div>
            </form>
            {% endif %}
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-bordered table-hover table-sm text-small table__ip"
               style="width: {{ table_width }}px; table-layout: fixed;">
            {% for width in column_widths %}
                <col style="width: {{ width }}px">
            {% endfor %}
            <thead class="thead-light">
                <tr class="title-row">
                    {% for name in column_names %}
                    <th>{{ name }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in rows %}
                {% if row.row_type == 'level' %}
                    <tr>
                        <td class="ip-level-row" colspan="{{column_names|length}}">
                            {{ row.row_data|default_if_none:'' }}
                        </td>
                    </tr>
                {% elif row.row_type == 'indicator' %}
                    <tr>
                        {% for val in row.row_data %}
                            <td>{{ val|linebreaks|default_if_none:'' }}</td>
                        {% endfor %}
                    </tr>
                {% endif %}
                
                {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock content %}
