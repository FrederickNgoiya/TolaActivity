{% load i18n mytags %}
<a href="#"
    tabindex="0"
    data-toggle="popover"
    data-placement="right"
    data-trigger="focus"
    {# variables for use in the on track helptext: program.target_period_info is a dict with keys: 'time_targets' = t/f (are there any time-aware targets), 'annual_period', 'semi_annual_period' etc. give most recent period end date #}
    data-content="
    {% with program.target_period_info as tp_info %}
    {% trans "Only completed target periods are included in the “indicators on track” calculations." %}
    {% if tp_info.annual or tp_info.semi_annual or tp_info.tri_annual or tp_info.quarterly or tp_info.monthly %}
        <br><br><strong>{% trans "Last completed target period" %}</strong>
        {# Translators:  label for the date of the last completed Annual target period. #}
        {% if tp_info.annual %}<br>{% trans "Annual" %}: {{ tp_info.annual|date:"MEDIUM_DATE_FORMAT" }}{% endif %}
        {# Translators:  label for the date of the last completed Semi-Annual target period. #}
        {% if tp_info.semi_annual %}<br>{% trans "Semi-Annual" %}: {{ tp_info.semi_annual|date:"MEDIUM_DATE_FORMAT" }}{% endif %}
        {# Translators:  label for the date of the last completed Tri-Annual target period. #}
        {% if tp_info.tri_annual %}<br>{% trans "Tri-Annual" %}: {{ tp_info.tri_annual|date:"MEDIUM_DATE_FORMAT" }}{% endif %}
        {# Translators:  label for the date of the last completed Quarterly target period. #}
        {% if tp_info.quarterly %}<br>{% trans "Quarterly" %}: {{ tp_info.quarterly|date:"MEDIUM_DATE_FORMAT" }}{% endif %}
        {# Translators:  label for the date of the last completed Monthly target period. #}
        {% if tp_info.monthly %}<br>{% trans "Monthly" %}: {{ tp_info.monthly|date:"MEDIUM_DATE_FORMAT" }}{% endif %}
    {% endif %}
    {% if tp_info.lop or tp_info.event or tp_info.midend %}<br><br>{% endif %}
    {% if tp_info.lop %}{% trans "If an indicator only has a Life of Program (LoP) target, we calculate performance after the program end date." %}{% endif %}
    {% if tp_info.event or tp_info.midend %}
        {# Translators: {{ midend }} is "midline/endline" if there are midline/endline targets, {{ event }} is "event-based" if there are event-based targets, and {{ and_only }} is "and" if there are BOTH midline/endline and event-based targets. This string can look like: "For midline/endline and event-based target periods...", "For midline/endline target periods..." or "For event-based target periods... #}
        {% blocktrans with event=tp_info.event|yesno:_("event-based,") midend=tp_info.midend|yesno:_("midline/endline,") and_only=tp_info.midend|and_only:tp_info.event %}
        For {{ midend }} {{ and_only }} {{ event }} target periods, we begin tracking performance as soon as the first result is submitted.
        {% endblocktrans %}
    {% endif %}
    {% endwith %}
    "><i class="far fa-question-circle"></i></a>
